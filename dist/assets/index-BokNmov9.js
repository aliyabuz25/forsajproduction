import{u as ya,j as e,N as Ci,r as f,B as Ii,a as ki,b as st,d as Oi}from"./vendor-react-B0Xi4u7S.js";import{H as _i,L as Di,P as Kt,A as js,E as As,G as ye,S as Es,I as Ns,M as Mi,U as Bi,a as Ts,B as zi,V as ma,b as Te,c as wi,T as gt,C as Rs,d as Ft,e as Pi,F as bt,f as Ui,g as Fi,h as Yi,i as Ls,j as Ki,k as $i,l as qi,m as Hi,n as Cs,o as Sa,p as ae,q as re,r as Gi,s as mt,t as ht,X as ha,u as Qi,v as us,w as Vi,x as yt,y as fa,z as Zi,D as Wi,J as Xi,K as Ji,N as Is,O as el,Q as tl,R as al,W as Bt,Y as ps,Z as sl,_ as il}from"./vendor-ui-J5TyqjfF.js";import{i as ll}from"./vendor-editor-BvsJV83P.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))m(v);new MutationObserver(v=>{for(const S of v)if(S.type==="childList")for(const b of S.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&m(b)}).observe(document,{childList:!0,subtree:!0});function d(v){const S={};return v.integrity&&(S.integrity=v.integrity),v.referrerPolicy&&(S.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?S.credentials="include":v.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function m(v){if(v.ep)return;v.ep=!0;const S=d(v);fetch(v.href,S)}})();const nl=({menuItems:s,user:l,onLogout:d})=>{const m=l?.role||"secondary",v=ya(),S=j=>j&&(j==="/frontend-settings"||j==="/admin/frontend-settings"||j==="/general-settings"||j==="/admin/general-settings"?"/general-settings?tab=general":j),b={Layout:Kt,Home:qi,Menu:$i,Maximize:Ki,Type:Ls,Star:Yi,Anchor:Fi,Info:Ui,FileText:bt,List:Pi,Calendar:Ft,Clock:Rs,Trophy:gt,Award:wi,Image:Te,Video:ma,BookOpen:zi,Phone:Ts,Users:Bi,Monitor:Mi,Inbox:Ns,Settings:Es,Globe:ye,Eye:As,Activity:js},A=({name:j,className:x})=>{const _=b[j];return _?e.jsx(_,{className:x,size:18}):e.jsx(Kt,{className:x,size:18})},C=j=>{const x=S(j);return x?x.includes("?")?v.pathname+v.search===x:v.pathname===x:!1},I=(j,x,_)=>e.jsx("li",{className:"sidebar-item",children:e.jsxs(Ci,{to:S(_||j.path)||"#",className:()=>`sidebar-link ${C(S(_||j.path))?"active":""}`,children:[(j.icon||x)&&e.jsx(A,{name:j.icon||x||"",className:"sidebar-icon"}),e.jsx("span",{className:"sidebar-text",children:j.title}),j.badge&&e.jsx("span",{className:`badge ${j.badge.color} sidebar-badge`,children:j.badge.text})]})},j.title),U=j=>{const x=["/frontend-settings","/general-settings","/users-management"];return j.map(D=>{const k=D.children?U(D.children):void 0,W=S(D.path);return m==="secondary"&&x.some(O=>W?.toLowerCase().startsWith(O))||!W&&(!k||k.length===0)?null:{...D,path:W,children:k}}).filter(Boolean)},P=j=>{const x=new Set,_=D=>(D||"").toLocaleLowerCase("az").normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim();return j.filter(D=>{const k=_(D.title||"");return!k||x.has(k)?!1:(x.add(k),!0)})};return e.jsxs("aside",{className:"sidebar",children:[e.jsx("div",{className:"sidebar-header",children:e.jsxs("div",{className:"brand-logo",children:[e.jsx(_i,{className:"logo-icon",size:24,fill:"currentColor"}),e.jsxs("span",{className:"brand-name",children:["FORSAJ",e.jsx("span",{children:"PANEL"})]})]})}),e.jsxs("div",{className:"sidebar-content",children:[e.jsx("div",{className:"sidebar-section-label",children:"ƏSAS NAVİQASİYA"}),e.jsxs("ul",{className:"sidebar-menu",children:[P(U(s)).map(j=>{const x=j.children?.find(_=>!!_.path)?.path;return I(j,j.icon,j.path||x)}),s.length===0&&e.jsx("div",{className:"empty-sidebar-msg",children:e.jsx("p",{children:"Menyu boşdur"})})]})]}),e.jsx("div",{className:"sidebar-footer",children:e.jsxs("button",{className:"logout-btn",onClick:d,children:[e.jsx(Di,{size:18}),e.jsx("span",{children:"Çıxış"})]})})]})},rl=({user:s})=>e.jsx("header",{className:"header",children:e.jsxs("div",{className:"header-right",children:[e.jsxs("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"view-site-btn",children:[e.jsx(Hi,{size:16})," Sayta Bax"]}),e.jsxs("div",{className:"header-profile",children:[e.jsxs("div",{className:"profile-info",children:[e.jsx("span",{className:"profile-name",children:s?.name||"Forsaj İdarəçisi"}),e.jsx("span",{className:"profile-status",children:s?.role==="master"?"Baş Admin":"Sayt Redaktoru"})]}),e.jsx("img",{src:`https://ui-avatars.com/api/?name=${s?.name||"Admin"}&background=random`,alt:"Profil"})]})]})});let ol={data:""},dl=s=>{if(typeof window=="object"){let l=(s?s.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return l.nonce=window.__nonce__,l.parentNode||(s||document.head).appendChild(l),l.firstChild}return s||ol},cl=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ul=/\/\*[^]*?\*\/|  +/g,xs=/\n+/g,qe=(s,l)=>{let d="",m="",v="";for(let S in s){let b=s[S];S[0]=="@"?S[1]=="i"?d=S+" "+b+";":m+=S[1]=="f"?qe(b,S):S+"{"+qe(b,S[1]=="k"?"":l)+"}":typeof b=="object"?m+=qe(b,l?l.replace(/([^,])+/g,A=>S.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,C=>/&/.test(C)?C.replace(/&/g,A):A?A+" "+C:C)):S):b!=null&&(S=/^--/.test(S)?S:S.replace(/[A-Z]/g,"-$&").toLowerCase(),v+=qe.p?qe.p(S,b):S+":"+b+";")}return d+(l&&v?l+"{"+v+"}":v)+m},Be={},ks=s=>{if(typeof s=="object"){let l="";for(let d in s)l+=d+ks(s[d]);return l}return s},pl=(s,l,d,m,v)=>{let S=ks(s),b=Be[S]||(Be[S]=(C=>{let I=0,U=11;for(;I<C.length;)U=101*U+C.charCodeAt(I++)>>>0;return"go"+U})(S));if(!Be[b]){let C=S!==s?s:(I=>{let U,P,j=[{}];for(;U=cl.exec(I.replace(ul,""));)U[4]?j.shift():U[3]?(P=U[3].replace(xs," ").trim(),j.unshift(j[0][P]=j[0][P]||{})):j[0][U[1]]=U[2].replace(xs," ").trim();return j[0]})(s);Be[b]=qe(v?{["@keyframes "+b]:C}:C,d?"":"."+b)}let A=d&&Be.g?Be.g:null;return d&&(Be.g=Be[b]),((C,I,U,P)=>{P?I.data=I.data.replace(P,C):I.data.indexOf(C)===-1&&(I.data=U?C+I.data:I.data+C)})(Be[b],l,m,A),b},xl=(s,l,d)=>s.reduce((m,v,S)=>{let b=l[S];if(b&&b.call){let A=b(d),C=A&&A.props&&A.props.className||/^go/.test(A)&&A;b=C?"."+C:A&&typeof A=="object"?A.props?"":qe(A,""):A===!1?"":A}return m+v+(b??"")},"");function Ht(s){let l=this||{},d=s.call?s(l.p):s;return pl(d.unshift?d.raw?xl(d,[].slice.call(arguments,1),l.p):d.reduce((m,v)=>Object.assign(m,v&&v.call?v(l.p):v),{}):d,dl(l.target),l.g,l.o,l.k)}let Os,ga,ba;Ht.bind({g:1});let Pe=Ht.bind({k:1});function ml(s,l,d,m){qe.p=l,Os=s,ga=d,ba=m}function He(s,l){let d=this||{};return function(){let m=arguments;function v(S,b){let A=Object.assign({},S),C=A.className||v.className;d.p=Object.assign({theme:ga&&ga()},A),d.o=/ *go\d+/.test(C),A.className=Ht.apply(d,m)+(C?" "+C:"");let I=s;return s[0]&&(I=A.as||s,delete A.as),ba&&I[0]&&ba(A),Os(I,A)}return v}}var hl=s=>typeof s=="function",$t=(s,l)=>hl(s)?s(l):s,fl=(()=>{let s=0;return()=>(++s).toString()})(),_s=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let l=matchMedia("(prefers-reduced-motion: reduce)");s=!l||l.matches}return s}})(),gl=20,ja="default",Ds=(s,l)=>{let{toastLimit:d}=s.settings;switch(l.type){case 0:return{...s,toasts:[l.toast,...s.toasts].slice(0,d)};case 1:return{...s,toasts:s.toasts.map(b=>b.id===l.toast.id?{...b,...l.toast}:b)};case 2:let{toast:m}=l;return Ds(s,{type:s.toasts.find(b=>b.id===m.id)?1:0,toast:m});case 3:let{toastId:v}=l;return{...s,toasts:s.toasts.map(b=>b.id===v||v===void 0?{...b,dismissed:!0,visible:!1}:b)};case 4:return l.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(b=>b.id!==l.toastId)};case 5:return{...s,pausedAt:l.time};case 6:let S=l.time-(s.pausedAt||0);return{...s,pausedAt:void 0,toasts:s.toasts.map(b=>({...b,pauseDuration:b.pauseDuration+S}))}}},Yt=[],Ms={toasts:[],pausedAt:void 0,settings:{toastLimit:gl}},Re={},Bs=(s,l=ja)=>{Re[l]=Ds(Re[l]||Ms,s),Yt.forEach(([d,m])=>{d===l&&m(Re[l])})},zs=s=>Object.keys(Re).forEach(l=>Bs(s,l)),bl=s=>Object.keys(Re).find(l=>Re[l].toasts.some(d=>d.id===s)),Gt=(s=ja)=>l=>{Bs(l,s)},vl={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},yl=(s={},l=ja)=>{let[d,m]=f.useState(Re[l]||Ms),v=f.useRef(Re[l]);f.useEffect(()=>(v.current!==Re[l]&&m(Re[l]),Yt.push([l,m]),()=>{let b=Yt.findIndex(([A])=>A===l);b>-1&&Yt.splice(b,1)}),[l]);let S=d.toasts.map(b=>{var A,C,I;return{...s,...s[b.type],...b,removeDelay:b.removeDelay||((A=s[b.type])==null?void 0:A.removeDelay)||s?.removeDelay,duration:b.duration||((C=s[b.type])==null?void 0:C.duration)||s?.duration||vl[b.type],style:{...s.style,...(I=s[b.type])==null?void 0:I.style,...b.style}}});return{...d,toasts:S}},Sl=(s,l="blank",d)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:l,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0,...d,id:d?.id||fl()}),St=s=>(l,d)=>{let m=Sl(l,s,d);return Gt(m.toasterId||bl(m.id))({type:2,toast:m}),m.id},ie=(s,l)=>St("blank")(s,l);ie.error=St("error");ie.success=St("success");ie.loading=St("loading");ie.custom=St("custom");ie.dismiss=(s,l)=>{let d={type:3,toastId:s};l?Gt(l)(d):zs(d)};ie.dismissAll=s=>ie.dismiss(void 0,s);ie.remove=(s,l)=>{let d={type:4,toastId:s};l?Gt(l)(d):zs(d)};ie.removeAll=s=>ie.remove(void 0,s);ie.promise=(s,l,d)=>{let m=ie.loading(l.loading,{...d,...d?.loading});return typeof s=="function"&&(s=s()),s.then(v=>{let S=l.success?$t(l.success,v):void 0;return S?ie.success(S,{id:m,...d,...d?.success}):ie.dismiss(m),v}).catch(v=>{let S=l.error?$t(l.error,v):void 0;S?ie.error(S,{id:m,...d,...d?.error}):ie.dismiss(m)}),s};var jl=1e3,Al=(s,l="default")=>{let{toasts:d,pausedAt:m}=yl(s,l),v=f.useRef(new Map).current,S=f.useCallback((P,j=jl)=>{if(v.has(P))return;let x=setTimeout(()=>{v.delete(P),b({type:4,toastId:P})},j);v.set(P,x)},[]);f.useEffect(()=>{if(m)return;let P=Date.now(),j=d.map(x=>{if(x.duration===1/0)return;let _=(x.duration||0)+x.pauseDuration-(P-x.createdAt);if(_<0){x.visible&&ie.dismiss(x.id);return}return setTimeout(()=>ie.dismiss(x.id,l),_)});return()=>{j.forEach(x=>x&&clearTimeout(x))}},[d,m,l]);let b=f.useCallback(Gt(l),[l]),A=f.useCallback(()=>{b({type:5,time:Date.now()})},[b]),C=f.useCallback((P,j)=>{b({type:1,toast:{id:P,height:j}})},[b]),I=f.useCallback(()=>{m&&b({type:6,time:Date.now()})},[m,b]),U=f.useCallback((P,j)=>{let{reverseOrder:x=!1,gutter:_=8,defaultPosition:D}=j||{},k=d.filter(O=>(O.position||D)===(P.position||D)&&O.height),W=k.findIndex(O=>O.id===P.id),le=k.filter((O,L)=>L<W&&O.visible).length;return k.filter(O=>O.visible).slice(...x?[le+1]:[0,le]).reduce((O,L)=>O+(L.height||0)+_,0)},[d]);return f.useEffect(()=>{d.forEach(P=>{if(P.dismissed)S(P.id,P.removeDelay);else{let j=v.get(P.id);j&&(clearTimeout(j),v.delete(P.id))}})},[d,S]),{toasts:d,handlers:{updateHeight:C,startPause:A,endPause:I,calculateOffset:U}}},El=Pe`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Nl=Pe`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Tl=Pe`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Rl=He("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${El} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Nl} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Tl} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Ll=Pe`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Cl=He("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${Ll} 1s linear infinite;
`,Il=Pe`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,kl=Pe`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Ol=He("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Il} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${kl} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,_l=He("div")`
  position: absolute;
`,Dl=He("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Ml=Pe`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Bl=He("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Ml} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,zl=({toast:s})=>{let{icon:l,type:d,iconTheme:m}=s;return l!==void 0?typeof l=="string"?f.createElement(Bl,null,l):l:d==="blank"?null:f.createElement(Dl,null,f.createElement(Cl,{...m}),d!=="loading"&&f.createElement(_l,null,d==="error"?f.createElement(Rl,{...m}):f.createElement(Ol,{...m})))},wl=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Pl=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,Ul="0%{opacity:0;} 100%{opacity:1;}",Fl="0%{opacity:1;} 100%{opacity:0;}",Yl=He("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Kl=He("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,$l=(s,l)=>{let d=s.includes("top")?1:-1,[m,v]=_s()?[Ul,Fl]:[wl(d),Pl(d)];return{animation:l?`${Pe(m)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Pe(v)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},ql=f.memo(({toast:s,position:l,style:d,children:m})=>{let v=s.height?$l(s.position||l||"top-center",s.visible):{opacity:0},S=f.createElement(zl,{toast:s}),b=f.createElement(Kl,{...s.ariaProps},$t(s.message,s));return f.createElement(Yl,{className:s.className,style:{...v,...d,...s.style}},typeof m=="function"?m({icon:S,message:b}):f.createElement(f.Fragment,null,S,b))});ml(f.createElement);var Hl=({id:s,className:l,style:d,onHeightUpdate:m,children:v})=>{let S=f.useCallback(b=>{if(b){let A=()=>{let C=b.getBoundingClientRect().height;m(s,C)};A(),new MutationObserver(A).observe(b,{subtree:!0,childList:!0,characterData:!0})}},[s,m]);return f.createElement("div",{ref:S,className:l,style:d},v)},Gl=(s,l)=>{let d=s.includes("top"),m=d?{top:0}:{bottom:0},v=s.includes("center")?{justifyContent:"center"}:s.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:_s()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${l*(d?1:-1)}px)`,...m,...v}},Ql=Ht`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,zt=16,Vl=({reverseOrder:s,position:l="top-center",toastOptions:d,gutter:m,children:v,toasterId:S,containerStyle:b,containerClassName:A})=>{let{toasts:C,handlers:I}=Al(d,S);return f.createElement("div",{"data-rht-toaster":S||"",style:{position:"fixed",zIndex:9999,top:zt,left:zt,right:zt,bottom:zt,pointerEvents:"none",...b},className:A,onMouseEnter:I.startPause,onMouseLeave:I.endPause},C.map(U=>{let P=U.position||l,j=I.calculateOffset(U,{reverseOrder:s,gutter:m,defaultPosition:l}),x=Gl(P,j);return f.createElement(Hl,{id:U.id,key:U.id,onHeightUpdate:I.updateHeight,className:U.visible?Ql:"",style:x},U.type==="custom"?$t(U.message,U):v?v(U):f.createElement(ql,{toast:U,position:P}))}))},E=ie;const Zl={toolbar:[[{header:[2,3,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]},Wl=["Shield","Users","Leaf","Zap","Target","Globe","Star","Flag"],oa=["Info","Settings","ShieldAlert","Leaf","FileText"],Xl=[{title:"Səhifə və Sistem",subtitle:"Səhifə başlığı, status və sistem mesajları",ids:["PAGE_TITLE","PAGE_SUBTITLE","ONLINE_STATUS_LABEL","FORM_TOAST_REQUIRED","FORM_TOAST_SUCCESS","FORM_TOAST_ERROR"]},{title:"Baş Ofis",subtitle:"Ofis məlumatları və əsas əlaqə sahələri",ids:["OFFICE_LABEL","ADDRESS_LINE_1","ADDRESS_LINE_2","WORK_HOURS","PHONE_LABEL","PHONE_NUMBER","EMAIL_LABEL","EMAIL_Address"]},{title:"Departamentlər",subtitle:"Departament kartları və e-poçt məlumatları",ids:["DEPT_HQ_TITLE","DEPT_HQ_DESC","DEPT_HQ_EMAIL","DEPT_PR_TITLE","DEPT_PR_DESC","DEPT_PR_EMAIL","DEPT_TECH_TITLE","DEPT_TECH_DESC","DEPT_TECH_EMAIL"]},{title:"Form",subtitle:"Müraciət formu sahələri və seçimlər",ids:["FORM_TITLE","FORM_STATUS_LABEL","FORM_METHOD","FORM_CONTENT_TYPE","FIELD_NAME_LABEL","FIELD_NAME_PLACEHOLDER","FIELD_CONTACT_LABEL","FIELD_CONTACT_PLACEHOLDER","FIELD_TOPIC_LABEL","TOPIC_GENERAL","TOPIC_PILOT","TOPIC_TECH","FIELD_MESSAGE_LABEL","FIELD_MESSAGE_PLACEHOLDER","BTN_SEND"]}],wt=s=>{if(!s)return"";const l=s.replace(/\\+\[/g,"[").replace(/\\+\]/g,"]");if(!/\[(\/?)(B|I|U|S|CENTER|FONT|URL|IMG|COLOR|SIZE|QUOTE|CODE|LIST|\*)[\]=\s\w"':#.,+-]*\]/i.test(l))return l;let m=l;return m=m.replace(/\[CENTER\]([\s\S]*?)\[\/CENTER\]/gi,'<div style="text-align:center;">$1</div>'),m=m.replace(/\[FONT=([^\]]+)\]([\s\S]*?)\[\/FONT\]/gi,'<span style="font-family:$1;">$2</span>'),m=m.replace(/\[B\]([\s\S]*?)\[\/B\]/gi,"<strong>$1</strong>"),m=m.replace(/\[I\]([\s\S]*?)\[\/I\]/gi,"<em>$1</em>"),m=m.replace(/\[U\]([\s\S]*?)\[\/U\]/gi,'<span style="text-decoration:underline;">$1</span>'),m=m.replace(/\[S\]([\s\S]*?)\[\/S\]/gi,"<strike>$1</strike>"),m=m.replace(/\[URL=([^\]]+)\]([\s\S]*?)\[\/URL\]/gi,'<a href="$1" target="_blank" rel="noopener noreferrer">$2</a>'),m=m.replace(/\[IMG\]([\s\S]*?)\[\/IMG\]/gi,'<img src="$1" style="max-width:100%;" />'),m=m.replace(/\[COLOR=([^\]]+)\]([\s\S]*?)\[\/COLOR\]/gi,'<span style="color:$1;">$2</span>'),m=m.replace(/\[SIZE=([^\]]+)\]([\s\S]*?)\[\/SIZE\]/gi,'<span style="font-size:$1px;">$2</span>'),m=m.replace(/\[QUOTE\]([\s\S]*?)\[\/QUOTE\]/gi,"<blockquote>$1</blockquote>"),m=m.replace(/\[CODE\]([\s\S]*?)\[\/CODE\]/gi,"<pre><code>$1</code></pre>"),m=m.replace(/\r?\n/g,"<br />"),m},Pt=({value:s,onChange:l,id:d,readOnly:m=!1})=>e.jsx("div",{className:"quill-editor-wrapper",id:d,children:e.jsx(ll,{theme:"snow",value:s||"",onChange:l,modules:m?{toolbar:!1}:Zl,readOnly:m,placeholder:"Məzmunu daxil edin..."})}),lt=s=>{if(/^[A-Z0-9_]+$/.test(s.id))return s.id.trim();const l=(s.label||"").trim();return l.startsWith("KEY:")?l.replace(/^KEY:\s*/i,"").trim():""},Jl=/\b[A-Z0-9]+(?:_[A-Z0-9]+)+\b/,qt=s=>Jl.test((s||"").trim()),en=s=>s.replace(/_/g," ").replace(/\s+/g," ").trim(),ve=s=>{if(!s)return"";let l=s;for(let m=0;m<4;m++){const S=(new DOMParser().parseFromString(l,"text/html").body.textContent||"").trim();if(!S||S===l)break;l=S}return(new DOMParser().parseFromString(l,"text/html").body.textContent||"").replace(/\u00a0/g," ").replace(/\s+/g," ").trim()},ft=s=>{const l=(s||"").trim();if(!l)return"";if(/^(https?:)?\/\//i.test(l))return l;const d=l.startsWith("/")?l:`/${l}`;return`${window.location.origin}${d}`},tn=s=>{const l=(s||"").trim();if(!l)return"";if(/^https?:\/\//i.test(l)){try{const d=new URL(l);if(d.pathname.startsWith("/uploads/"))return`${d.pathname}${d.search}${d.hash}`}catch{}return l}return l.startsWith("/")?l:`/${l}`},ws=s=>/&(?:lt|gt|nbsp|quot|amp);|<\/?[a-z][^>]*>/i.test(s||""),an=s=>/<(ul|ol|li|a|img|iframe|video|table|h[1-6])\b|\[(b|i|u|url|img|center)\]/i.test(s||""),sn=s=>!!(lt(s)||Je(s.id)||s.id.startsWith("txt-")||s.id.startsWith("val-")||s.id.startsWith("RULES_")||s.id.startsWith("PAGE_")||s.id.startsWith("BTN_")||s.id.startsWith("DOC_")||ws(s.value||"")&&!an(s.value||"")),ze="label-stat-",we="value-stat-",Je=s=>s.startsWith(ze)||s.startsWith(we),ms=s=>s.startsWith(ze)?s.slice(ze.length):s.startsWith(we)?s.slice(we.length):"",Ut=(s,l)=>lt(s)?l==="value":!0,ln=s=>!lt(s),hs=s=>{const l=lt(s);return!!((s.id||"").includes("_")||l&&l.includes("_")||l&&l.includes("_")&&qt(ve(s.value||""))||!l&&qt(s.value))},da=/^PARTNER_(\d+)_(NAME|TAG|ICON|USE_IMAGE|IMAGE_ID)$/,nn=/^RULE_TAB_(\d+)_(ID|TITLE|ICON|DOC_NAME|DOC_BUTTON|DOC_URL)$/,rn=/^RULE_TAB_(\d+)_ITEM_(\d+)_(TITLE|DESC)$/,ca=/^RULE_TAB_\d+_(?:ID|TITLE|ICON|DOC_NAME|DOC_BUTTON|DOC_URL|ITEM_\d+_(?:TITLE|DESC))$/,on=s=>s==="NAME"?"name":s==="TAG"?"tag":s==="ICON"?"icon":s==="USE_IMAGE"?"useImage":s==="IMAGE_ID"?"imageId":null,ua={hero:"Hero Bölməsi",marquee:"Marquee Yazısı",navbar:"Menyu və Naviqasiya",about:"HAQQIMIZDA",mission_vision:"Missiya və Vizyon",values:"Dəyərlərimiz",eventspage:"Tədbirlər Səhifəsi",newspage:"Xəbər Səhifəsi",gallerypage:"Qalereya Səhifəsi",contactpage:"Əlaqə Səhifəsi",rulespage:"Qaydalar Səhifəsi",news:"Xəbərlər",drivers:"Sürücülər",categoryleaders:"Kateqoriya Liderləri",gallery:"Qalereya",videos:"Videolar",videoarchive:"Video Arxiv",footer:"Footer",partners:"Tərəfdaşlar",offroadinfo:"Offroad Nədir?",whatisoffroad:"Offroad Nədir?",nextrace:"Növbəti Yarış",site:"Sayt Ayarları",settings:"Ümumi Parametrlər",general:"SİSTEM AYARLARI",app:"Tətbiq Ayarları"},it={home:["navbar","hero","marquee","categoryleaders","footer"],abouttab:["about"],newstab:["newspage"],eventstab:["eventspage"],driverstab:["drivers"],gallerytab:["gallerypage","gallery","videos","videoarchive"],rulestab:["rulespage"],contacttab:["contactpage"]},Ps=Object.entries(it).reduce((s,[l,d])=>(d.forEach(m=>{s[m]=l}),s),{}),fs=s=>{if(!s)return[];if(it[s])return it[s];const l=Ps[s];return l&&it[l]?it[l]:[s]},pa="forsaj_site_content_version",gs="forsaj_grouped_page_collapsed_v1",bs="forsaj_section_collapsed_v1",ce=(s,l)=>Number.isFinite(s)?s:l,dn=()=>{const[s,l]=f.useState([]),[d,m]=f.useState(0),[v,S]=f.useState(!1),[b,A]=f.useState(!1),[C,I]=f.useState(0),[U,P]=f.useState(""),[j,x]=f.useState(!1),[_,D]=f.useState(!1),[k,W]=f.useState(!1),[le,O]=f.useState([]),[L,Ge]=f.useState(null),[Le,Ce]=f.useState(""),[Q,Ie]=f.useState(""),[pe,Qt]=f.useState(()=>{try{const t=localStorage.getItem(gs),a=t?JSON.parse(t):{};return a&&typeof a=="object"?a:{}}catch{return{}}}),[rt,Vt]=f.useState(()=>{try{const t=localStorage.getItem(bs),a=t?JSON.parse(t):{};return a&&typeof a=="object"?a:{}}catch{return{}}}),[ke,ue]=f.useState([]),[Ue,Oe]=f.useState(null),[Z,c]=f.useState({}),[N,M]=f.useState([]),[q,H]=f.useState(null),[Y,oe]=f.useState({}),[xe,jt]=f.useState([]),[ot,Zt]=f.useState(null),[fe,Wt]=f.useState({}),Xt=ya(),Aa=new URLSearchParams(Xt.search),Jt=Aa.get("mode"),Fe=Aa.get("page"),[se,Se]=f.useState("extract"),[ea,At]=f.useState([]),Ea=f.useRef(!1),[dt,Na]=f.useState(null),[Qe,ta]=f.useState({});f.useEffect(()=>{Se(Jt||"extract")},[Jt,Fe]),f.useEffect(()=>{localStorage.setItem(gs,JSON.stringify(pe))},[pe]),f.useEffect(()=>{localStorage.setItem(bs,JSON.stringify(rt))},[rt]);const[ge,Ye]=f.useState([]),[ee,ct]=f.useState(null),[et,ut]=f.useState(null),[me,tt]=f.useState({}),Ta=async()=>{try{const a=await(await fetch("/api/site-content")).json();if(Array.isArray(a)){const r=["hero","marquee","navbar","about","mission_vision","values","rulespage","eventspage","newspage","gallerypage","contactpage","news","drivers","driverspage","categoryleaders","gallery","videos","videoarchive","footer","partners","offroadinfo","whatisoffroad","nextrace","site","settings","general","app"],u=[...a],B=y=>{const T=y.sections||[],R=y.images||[],z=($,V,J)=>{T.some(at=>at.id===$)||T.push({id:$,type:"text",label:V,value:J})},de=($,V,J)=>{R.some(at=>at.id===$)||R.push({id:$,path:V,alt:J,type:"remote",order:R.length})};if(z("PAGE_TITLE","Səhifə Başlığı","HAQQIMIZDA"),z("PAGE_SUBTITLE","Səhifə Alt Başlığı","BİZİM HEKAYƏMİZ // MİSSİYAMIZ VƏ GƏLƏCƏYİMİZ"),z("txt-est-2018-motorsp-949","About Üst Başlıq","EST. 2018 // MOTORSPORT MƏRKƏZİ"),z("txt-forsaj-club-az-rba-66","About Ana Başlıq",'"FORSAJ CLUB" AZƏRBAYCANIN OFFROAD MƏDƏNİYYƏTİNİ PEŞƏKAR SƏVİYYƏYƏ ÇATDIRMAQ ÜÇÜN YARADILMIŞDIR.'),z("txt-bi-zi-m-mi-ssi-yamiz-424","Missiya Başlığı","BİZİM MİSSİYAMIZ"),z("txt-az-rbaycan-n-h-r-bir-45","Missiya Təsviri","Azərbaycanın hər bir guşəsində offroad idmanını təbliğ etmək, yerli pilotları beynəlxalq standartlara uyğun yetişdirmək və təbiəti qoruyaraq ekstremal adrenalin təcrübəsi bəxş etmək."),z("txt-h-d-fi-mi-z-dakar-ral-50","Missiya Hədəf Mətni","HƏDƏFİMİZ: DAKAR RALLİ 2026"),z("txt-bi-zi-m-baxi-imiz-944","Vizyon Başlığı","BİZİM BAXIŞIMIZ"),z("txt-regionun-n-b-y-k-mo-901","Vizyon Təsviri","Regionun ən böyük motorsport hubuna çevrilmək, rəqəmsal və fiziki infrastrukturlarla pilotlarımızı dəstəkləmək və motorsportu hər kəs üçün əlçatan bir ehtirasa çevirmək."),z("txt-qafqazin-li-der-klubu-758","Vizyon Şüarı","QAFQAZIN LİDER KLUBUNA ÇEVRİLMƏK"),z("txt-fundamental-pri-nsi-pl-219","Dəyərlər Alt Başlıq","FUNDAMENTAL PRİNSİPLƏR"),z("txt-sas-d-y-rl-ri-mi-z-482","Dəyərlər Başlığı","ƏSAS DƏYƏRLƏRİMİZ"),z("val-icon-1","Dəyər 1 İkonu","Shield"),z("val-title-1","Dəyər 1 Başlıq","TƏHLÜKƏSİZLİK"),z("val-desc-1","Dəyər 1 Təsvir","EKSTREMAL İDMANDA CAN SAĞLIĞI BİZİM BİR NÖMRƏLİ QAYDAMIZDIR. BÜTÜN TEXNİKALARIMIZ FIA STANDARTLARINA UYĞUN YOXLANILIR."),z("val-icon-2","Dəyər 2 İkonu","Users"),z("val-title-2","Dəyər 2 Başlıq","İCMA RUHU"),z("val-desc-2","Dəyər 2 Təsvir","FORSAJ BİR KLUBDAN DAHA ÇOX, SADİQ VƏ BÖYÜK BİR AİLƏDİR. BİRİMİZ HAMIMIZ, HAMIMIZ BİRİMİZ ÜÇÜN!"),z("val-icon-3","Dəyər 3 İkonu","Leaf"),z("val-title-3","Dəyər 3 Başlıq","TƏBİƏTİ QORU"),z("val-desc-3","Dəyər 3 Təsvir","BİZ OFFROAD EDƏRKƏN TƏBİƏTƏ ZƏRƏR VERMƏMƏYİ ÖZÜMÜZƏ BORC BİLİRİK. EKOLOJİ BALANS BİZİM ÜÇÜN MÜQƏDDƏSDİR."),z("val-icon-4","Dəyər 4 İkonu","Zap"),z("val-title-4","Dəyər 4 Başlıq","MÜKƏMMƏLLİK"),z("val-desc-4","Dəyər 4 Təsvir","HƏR YARIŞDA, HƏR DÖNGƏDƏ DAHA YAXŞI OLMAĞA ÇALIŞIRIQ. TƏLİMLƏRİMİZ PEŞƏKAR İNSTRUKTORLAR TƏRƏFİNDƏN İDARƏ OLUNUR."),T.some($=>$.id.includes("label-stat"))&&T.some($=>$.id.includes("value-stat"))){y.sections=T,de("img-992","https://images.unsplash.com/photo-1541447271487-09612b3f49f7?q=80&w=1974&auto=format&fit=crop","Forsaj Club Detail"),y.images=R;return}[{label:"PİLOTLAR",value:"140+"},{label:"YARIŞLAR",value:"50+"},{label:"GƏNCLƏR",value:"20+"}].forEach(($,V)=>{const J=`${V+1}`;T.push({id:`label-stat-${J}`,type:"text",label:`Statistika Etiketi ${V+1}`,value:$.label}),T.push({id:`value-stat-${J}`,type:"text",label:`Statistika Dəyəri ${V+1}`,value:$.value})}),y.sections=T,de("img-992","https://images.unsplash.com/photo-1541447271487-09612b3f49f7?q=80&w=1974&auto=format&fit=crop","Forsaj Club Detail"),y.images=R},F=y=>{const T=y.sections||[],R=y.images||[],z=(ne,$,V)=>{T.some(J=>J.id===ne)||T.push({id:ne,type:"text",label:$,value:V})},de=ne=>{R.some($=>$.id===ne)||R.push({id:ne,path:"",alt:ne,type:"local",order:R.length})};z("SECTION_TITLE","Bölmə Başlığı","RƏSMİ TƏRƏFDAŞLARIMIZ"),[{name:"AZMF",tag:"OFFICIAL PARTNER",icon:"ShieldCheck"},{name:"OFFROAD AZ",tag:"OFFICIAL PARTNER",icon:"Truck"},{name:"GLOBAL 4X4",tag:"OFFICIAL PARTNER",icon:"Globe"},{name:"RACE TECH",tag:"OFFICIAL PARTNER",icon:"Zap"}].forEach((ne,$)=>{const V=$+1;z(`PARTNER_${V}_NAME`,`Tərəfdaş ${V} Ad`,ne.name),z(`PARTNER_${V}_TAG`,`Tərəfdaş ${V} Etiket`,ne.tag),z(`PARTNER_${V}_ICON`,`Tərəfdaş ${V} İkon`,ne.icon),z(`PARTNER_${V}_USE_IMAGE`,`Tərəfdaş ${V} Görsel İstifadə`,"false"),z(`PARTNER_${V}_IMAGE_ID`,`Tərəfdaş ${V} Görsel ID`,`partner-image-${V}`),de(`partner-image-${V}`)}),y.sections=T,y.images=R},w=y=>{const T=y.sections||[],R=(z,de,Me,ne)=>{const $=T.findIndex(V=>V.id===z);if($===-1){T.push({id:z,type:"text",label:de,value:Me,...ne?{url:ne}:{}});return}ne&&!T[$].url&&(T[$].url=ne)};R("text-3","Hero Düymə 1","YARIŞLARA BAX","events"),R("text-4","Hero Düymə 2","HAQQIMIZDA","about"),y.sections=T},K=(y,T)=>{const R=y.sections||[];T.forEach(z=>{const de=R.findIndex(Me=>Me.id===z.id);if(de===-1){R.push({id:z.id,type:"text",label:z.label,value:z.value,...z.url?{url:z.url}:{}});return}z.url&&!R[de].url&&(R[de].url=z.url)}),y.sections=R},te=y=>{K(y,[{id:"PAGE_TITLE",label:"Səhifə Başlığı",value:"ƏLAQƏ"},{id:"PAGE_SUBTITLE",label:"Səhifə Alt Başlığı",value:"GET IN TOUCH // CONTACT CENTER"},{id:"OFFICE_LABEL",label:"Ofis Bölmə Başlığı",value:"BAŞ OFİS"},{id:"ADDRESS_LINE_1",label:"Ünvan Sətir 1",value:"AZADLIQ 102, BAKI"},{id:"ADDRESS_LINE_2",label:"Ünvan Sətir 2",value:"AZƏRBAYCAN // SECTOR_01"},{id:"WORK_HOURS",label:"İş Saatı",value:"09:00 - 18:00"},{id:"ONLINE_STATUS_LABEL",label:"Onlayn Status Mətni",value:"ONLINE"},{id:"PHONE_LABEL",label:"Telefon Başlığı",value:"ƏLAQƏ NÖMRƏSİ"},{id:"PHONE_NUMBER",label:"Telefon Nömrəsi",value:"+994 50 123 45 67"},{id:"EMAIL_LABEL",label:"E-poçt Başlığı",value:"E-POÇT ÜNVANI"},{id:"EMAIL_Address",label:"Əsas E-poçt Ünvanı",value:"PROTOCOL@FORSAJ.AZ"},{id:"DEPT_HQ_TITLE",label:"Departament 1 Başlıq",value:"BAŞ OFİS"},{id:"DEPT_HQ_DESC",label:"Departament 1 Təsvir",value:"ÜMUMİ SORĞULAR VƏ İDARƏETMƏ"},{id:"DEPT_HQ_EMAIL",label:"Departament 1 E-poçt",value:"HQ@FORSAJ.AZ"},{id:"DEPT_PR_TITLE",label:"Departament 2 Başlıq",value:"MEDİA VƏ PR"},{id:"DEPT_PR_DESC",label:"Departament 2 Təsvir",value:"MƏTBUAT VƏ ƏMƏKDAŞLIQ"},{id:"DEPT_PR_EMAIL",label:"Departament 2 E-poçt",value:"PR@FORSAJ.AZ"},{id:"DEPT_TECH_TITLE",label:"Departament 3 Başlıq",value:"TEXNİKİ DƏSTƏK"},{id:"DEPT_TECH_DESC",label:"Departament 3 Təsvir",value:"PİLOTLAR ÜÇÜN TEXNİKİ YARDIM"},{id:"DEPT_TECH_EMAIL",label:"Departament 3 E-poçt",value:"TECH@FORSAJ.AZ"},{id:"FORM_TITLE",label:"Form Başlığı",value:"MÜRACİƏT FORMU"},{id:"FORM_STATUS_LABEL",label:"Form Status Mətni",value:"STATUS: ONLINE"},{id:"FORM_METHOD",label:"Form Method",value:"POST"},{id:"FORM_CONTENT_TYPE",label:"Form Content-Type",value:"application/json"},{id:"FIELD_NAME_LABEL",label:"Ad Soyad Label",value:"AD VƏ SOYAD"},{id:"FIELD_NAME_PLACEHOLDER",label:"Ad Soyad Placeholder",value:"AD SOYAD DAXİL EDİN"},{id:"FIELD_CONTACT_LABEL",label:"Əlaqə Label",value:"ƏLAQƏ VASİTƏSİ"},{id:"FIELD_CONTACT_PLACEHOLDER",label:"Əlaqə Placeholder",value:"TELEFON VƏ YA EMAIL"},{id:"FIELD_TOPIC_LABEL",label:"Müraciət İstiqaməti Label",value:"MÜRACİƏT İSTİQAMƏTİ"},{id:"TOPIC_GENERAL",label:"Mövzu Seçimi 1",value:"ÜMUMİ SORĞU"},{id:"TOPIC_PILOT",label:"Mövzu Seçimi 2",value:"PİLOT QEYDİYYATI"},{id:"TOPIC_TECH",label:"Mövzu Seçimi 3",value:"TEXNİKİ YARDIM"},{id:"FIELD_MESSAGE_LABEL",label:"Mesaj Label",value:"MESAJINIZ"},{id:"FIELD_MESSAGE_PLACEHOLDER",label:"Mesaj Placeholder",value:"BURADA YAZIN..."},{id:"BTN_SEND",label:"Form Göndər Düyməsi",value:"MESAJI GÖNDƏR"},{id:"FORM_TOAST_REQUIRED",label:"Form Boş Sahə Xəbərdarlığı",value:"Zəhmət olmasa bütün sahələri doldurun."},{id:"FORM_TOAST_SUCCESS",label:"Form Uğurlu Göndəriş Mesajı",value:"Müraciətiniz uğurla göndərildi!"},{id:"FORM_TOAST_ERROR",label:"Form Xəta Mesajı",value:"Gondərilmə zamanı xəta baş verdi."},{id:"FOOTER_NEWSLETTER_TITLE",label:"Abunə Başlığı",value:"XƏBƏRDAR OL"},{id:"FOOTER_NEWSLETTER_DESC",label:"Abunə Təsviri",value:"Yarış təqvimi və xəbərlərdən anında xəbərdar olmaq üçün abunə olun."}])},De=y=>{K(y,[{id:"PAGE_TITLE",label:"Səhifə Başlığı",value:"TƏDBİRLƏR"},{id:"PAGE_SUBTITLE",label:"Səhifə Alt Başlığı",value:"OFFICIAL EVENT CALENDAR // FORSAJ CLUB"},{id:"PILOT_FORM_TOAST_REQUIRED",label:"Pilot Form Boş Sahə Xəbərdarlığı",value:"Zəhmət olmasa bütün sahələri doldurun."},{id:"PILOT_FORM_TOAST_SUCCESS",label:"Pilot Form Uğurlu Göndəriş Mesajı",value:"Qeydiyyat müraciətiniz uğurla göndərildi!"},{id:"PILOT_FORM_TOAST_ERROR",label:"Pilot Form Xəta Mesajı",value:"Gondərilmə zamanı xəta baş verdi."},{id:"PLACEHOLDER_PHONE",label:"Telefon Placeholder",value:"+994 -- --- -- --"},{id:"SPECTATOR_TICKET_URL",label:"İzləyici Bilet Linki",value:"https://iticket.az",url:"https://iticket.az"},{id:"CLUB_OPTION_1",label:"Klub Seçimi 1",value:"Fərdi İştirakçı"},{id:"CLUB_OPTION_2",label:"Klub Seçimi 2",value:"Club 4X4"},{id:"CLUB_OPTION_3",label:"Klub Seçimi 3",value:"Extreme 4X4"},{id:"CLUB_OPTION_4",label:"Klub Seçimi 4",value:"Forsaj Club"},{id:"CLUB_OPTION_5",label:"Klub Seçimi 5",value:"Offroad.az"},{id:"CLUB_OPTION_6",label:"Klub Seçimi 6",value:"Overland 4X4"},{id:"CLUB_OPTION_7",label:"Klub Seçimi 7",value:"PatrolClub.az"},{id:"CLUB_OPTION_8",label:"Klub Seçimi 8",value:"Victory Club"},{id:"CLUB_OPTION_9",label:"Klub Seçimi 9",value:"Zəfər 4X4 Club"}])},Xe=y=>{K(y,[{id:"PAGE_TITLE",label:"Səhifə Başlığı",value:"XƏBƏRLƏR"},{id:"PAGE_SUBTITLE",label:"Səhifə Alt Başlığı",value:"MOTORSPORT MAGAZINE // SEASON 2024"}])},Ne=y=>{K(y,[{id:"PAGE_TITLE",label:"Səhifə Başlığı",value:"QALEREYA"},{id:"PAGE_SUBTITLE",label:"Səhifə Alt Başlığı",value:"XRONOLOJİ MOTORSPORT ARXİVİ // FORSAJ CLUB"},{id:"TAB_PHOTOS",label:"Tab Foto",value:"FOTOLAR"},{id:"TAB_VIDEOS",label:"Tab Video",value:"VİDEOLAR"},{id:"DYNAMIC_COLLECTION",label:"Dinamik Kolleksiya Alt Başlıq",value:"CANLI ARXİV // YENİLƏNƏN MƏZMUN"},{id:"TOTAL_LABEL",label:"Toplam Etiketi",value:"TOPLAM"},{id:"TYPE_PHOTO",label:"Foto Tipi",value:"FOTO"},{id:"TYPE_VIDEO",label:"Video Tipi",value:"VİDEO"}])},X=y=>{K(y,[{id:"PAGE_TITLE",label:"Səhifə Başlığı",value:"SÜRÜCÜLƏR"},{id:"PAGE_SUBTITLE",label:"Səhifə Alt Başlığı",value:"OFFICIAL PILOT STANDINGS // SEASON 2024"}])},_t=y=>{K(y,[{id:"FOOTER_LOGO_ALT",label:"Footer Logo Alt",value:"Forsaj Logo"},{id:"FOOTER_ABOUT_TEXT",label:"Footer Haqqında Mətn",value:"Azərbaycanın ən prestijli motorsport mərkəzi. Sərhədsiz offroad həyəcanını bizimlə yaşayın."},{id:"FOOTER_ADDRESS_LABEL",label:"Footer Ünvan Başlığı",value:"ÜNVAN"},{id:"FOOTER_CONTACT_LABEL",label:"Footer Əlaqə Başlığı",value:"ƏLAQƏ"},{id:"FOOTER_NAV_TITLE",label:"Footer Naviqasiya Başlığı",value:"NAVİQASİYA"},{id:"FOOTER_MOTORSPORT_TITLE",label:"Footer Motorsport Başlığı",value:"MOTORSPORT"},{id:"FOOTER_NEWSLETTER_TITLE",label:"Footer Abunə Başlığı",value:"XƏBƏRDAR OL"},{id:"FOOTER_NEWSLETTER_DESC",label:"Footer Abunə Təsviri",value:"Yarış təqvimi və xəbərlərdən anında xəbərdar olmaq üçün abunə olun."},{id:"FOOTER_NEWSLETTER_PLACEHOLDER",label:"Footer Abunə Placeholder",value:"EMAIL DAXİL EDİN"},{id:"FOOTER_COPYRIGHT",label:"Footer Copyright",value:"© 2024 FORSAJ CLUB. ALL RIGHTS RESERVED."},{id:"FOOTER_PRIVACY_LABEL",label:"Footer Privacy Link Mətni",value:"Privacy Policy",url:"#"},{id:"FOOTER_TERMS_LABEL",label:"Footer Terms Link Mətni",value:"Terms of Service",url:"#"}])},Za=y=>{K(y,[{id:"LEADER_TITLE_SUFFIX",label:"Lider Başlıq Suffix",value:"LİDERİ"},{id:"EMPTY_DRIVER_NAME",label:"Boş Sürücü Adı",value:"---"},{id:"EMPTY_DRIVER_TEAM",label:"Boş Komanda Adı",value:"---"}])},Wa=y=>{K(y,[{id:"RACE_IMAGE_ALT",label:"Növbəti Yarış Görsel Alt",value:"Next Race"}])},Xa=y=>{K(y,[{id:"PAGE_TITLE",label:"Səhifə Başlığı",value:"QAYDALAR"},{id:"PAGE_SUBTITLE",label:"Səhifə Alt Başlığı",value:"FORSAJ MOTORSPORT OFFICIAL RULES"}]);const T=y.sections||[],R=($,V)=>(T.find(J=>J.id===$)?.value||V).trim()||V,z=[{index:1,id:"pilot",title:R("RULES_PILOT_TITLE","PİLOT PROTOKOLU"),icon:"Info",items:[{index:1,title:R("RULES_PILOT_SUB1","İSTİFADƏÇİ ÖHDƏLİKLƏRİ"),desc:R("RULES_PILOT_DESC1","HƏR BİR İŞTİRAKÇI FEDERASİYANIN MÜƏYYƏN ETDİYİ BÜTÜN TEXNİKİ VƏ ETİK NORMALARI QEYD-ŞƏRTSİZ QƏBUL EDİR.")},{index:2,title:R("RULES_PILOT_SUB2","DİSKVALİFİKASİYA"),desc:R("RULES_PILOT_DESC2","PROTOKOLDAN KƏNARA ÇIXMAQ VƏ YA HAKİM QƏRARLARINA ETİRAZ ETMƏK DƏRHAL DİSKVALİFİKASİYA İLƏ NƏTİCƏLƏNƏ BİLƏR.")},{index:3,title:R("RULES_PILOT_SUB3","TEXNİKİ TƏLƏBLƏR"),desc:R("RULES_PILOT_DESC3","BÜTÜN AVADANLIQLAR YARIŞDAN 24 SAAT ƏVVƏL TEXNİKİ KOMİSSİYA TƏRƏFİNDƏN YOXLANILMALI VƏ TƏHLÜKƏSİZLİK SERTİFİKATI İLƏ TƏMİN EDİLMƏLİDİR.")}]},{index:2,id:"technical",title:R("RULES_TECH_TITLE","TEXNİKİ NORMARTİVLƏR"),icon:"Settings",items:[{index:1,title:R("RULES_TECH_SUB1","TƏKƏR ÖLÇÜLƏRİ"),desc:R("RULES_TECH_DESC1","PRO CLASS ÜÇÜN MAKSİMUM TƏKƏR ÖLÇÜSÜ 37 DÜYM, AMATEUR CLASS ÜÇÜN İSƏ 33 DÜYM OLARAQ MÜƏYYƏN EDİLMİŞDİR.")},{index:2,title:R("RULES_TECH_SUB2","MÜHƏRRİK GÜCÜ"),desc:R("RULES_TECH_DESC2","MÜHƏRRİK ÜZƏRİNDƏ APARILAN MODİFİKASİYALAR KATEQORİYA ÜZRƏ LİMİTLƏRİ AŞMAMALIDIR. TURBO SİSTEMLƏRİ YALNIZ XÜSUSİ KLASLARDA İCAZƏLİDİR.")},{index:3,title:R("RULES_TECH_SUB3","ASQI SİSTEMİ"),desc:R("RULES_TECH_DESC3","AVTOMOBİLİN KLİRENSİ (YERDƏN HÜNDÜRLÜYÜ) VƏ ASQI ARTIKULYASİYASI TƏHLÜKƏSİZLİK STANDARTLARINA UYĞUN OLMALIDIR.")}]},{index:3,id:"safety",title:R("RULES_SAFETY_TITLE","TƏHLÜKƏSİZLİK QAYDALARI"),icon:"ShieldAlert",items:[{index:1,title:R("RULES_SAFETY_SUB1","KARKAS TƏLƏBİ"),desc:R("RULES_SAFETY_DESC1","BÜTÜN AÇIQ VƏ YA MODİFİKASİYA OLUNMUŞ AVTOMOBİLLƏRDƏ FIA STANDARTLARINA UYĞUN TƏHLÜKƏSİZLİK KARKASI (ROLL CAGE) MƏCBURİDİR.")},{index:2,title:R("RULES_SAFETY_SUB2","YANĞIN SÖNDÜRMƏ"),desc:R("RULES_SAFETY_DESC2","HƏR BİR AVTOMOBİLDƏ ƏN AZI 2 KİLOQRAMLIQ, ASAN ƏLÇATAN YERDƏ YERLƏŞƏN YANĞINSÖNDÜRƏN BALON OLMALIDIR.")},{index:3,title:R("RULES_SAFETY_SUB3","KƏMƏR VƏ DƏBİLQƏ"),desc:R("RULES_SAFETY_DESC3","5 NÖQTƏLİ TƏHLÜKƏSİZLİK KƏMƏRLƏRİ VƏ SERTİFİKATLI KASKALARIN (DƏBİLQƏLƏRİN) İSTİFADƏSİ BÜTÜN MƏRHƏLƏLƏRDƏ MƏCBURİDİR.")}]},{index:4,id:"eco",title:R("RULES_ECO_TITLE","EKOLOJİ MƏSULİYYƏT"),icon:"Leaf",items:[{index:1,title:R("RULES_ECO_SUB1","TULLANTILARIN İDARƏ EDİLMƏSİ"),desc:R("RULES_ECO_DESC1",'YARIŞ ƏRAZİSİNDƏ VƏ TRASDA HƏR HANSI BİR TULLANTININ ATILMASI QƏTİ QADAĞANDIR. İŞTİRAKÇILAR "LEAVE NO TRACE" PRİNSİPİNƏ ƏMƏL ETMƏLİDİR.')},{index:2,title:R("RULES_ECO_SUB2","MAYE SIZMALARI"),desc:R("RULES_ECO_DESC2","AVTOMOBİLDƏN YAĞ VƏ YA SOYUDUCU MAYE SIZMASI OLDUĞU TƏQDİRDƏ PİLOT DƏRHAL DAYANMALI VƏ ƏRAZİNİN ÇİRKLƏNMƏSİNİN QARŞISINI ALMALIDIR.")},{index:3,title:R("RULES_ECO_SUB3","MARŞRUTDAN KƏNARA ÇIXMAMAQ"),desc:R("RULES_ECO_DESC3","TƏBİİ ÖRTÜYÜ QORUMAQ MƏQSƏDİ İLƏ MÜƏYYƏN OLUNMUŞ TRASDANKƏNAR SÜRÜŞLƏR VƏ YA YAŞIL SAHƏLƏRƏ ZƏRƏR VERMƏK QADAĞANDIR.")}]}],de=[];z.forEach(($,V)=>{const J=V+1;de.push({id:`RULE_TAB_${J}_ID`,type:"text",label:`Qayda Sekməsi ${J} ID`,value:$.id},{id:`RULE_TAB_${J}_TITLE`,type:"text",label:`Qayda Sekməsi ${J} Başlıq`,value:$.title},{id:`RULE_TAB_${J}_ICON`,type:"text",label:`Qayda Sekməsi ${J} İkon`,value:$.icon}),$.items.forEach((at,Li)=>{const Mt=Li+1;de.push({id:`RULE_TAB_${J}_ITEM_${Mt}_TITLE`,type:"text",label:`Sekmə ${J} Maddə ${Mt} Başlıq`,value:at.title},{id:`RULE_TAB_${J}_ITEM_${Mt}_DESC`,type:"text",label:`Sekmə ${J} Maddə ${Mt} Təsvir`,value:at.desc})})});const Me=new Set(T.map($=>$.id)),ne=de.filter($=>!Me.has($.id));y.sections=[...T,...ne]};r.forEach(y=>{const T=u.find(R=>R.id===y);T?y==="about"?B(T):y==="partners"?F(T):y==="hero"?w(T):y==="contactpage"?te(T):y==="eventspage"?De(T):y==="newspage"?Xe(T):y==="gallerypage"?Ne(T):y==="driverspage"?X(T):y==="footer"?_t(T):y==="categoryleaders"?Za(T):y==="nextrace"?Wa(T):y==="rulespage"&&Xa(T):u.push({id:y,title:ua[y]||y,sections:[{id:`${y}-default`,type:"text",label:"Bölmə",value:""}],images:[]})});const Ja=u.find(y=>y.id==="about");Ja&&B(Ja);const es=u.find(y=>y.id==="partners");es&&F(es);const ts=u.find(y=>y.id==="hero");ts&&w(ts);const as=u.find(y=>y.id==="contactpage");as&&te(as);const ss=u.find(y=>y.id==="eventspage");ss&&De(ss);const is=u.find(y=>y.id==="newspage");is&&Xe(is);const ls=u.find(y=>y.id==="gallerypage");ls&&Ne(ls);const ns=u.find(y=>y.id==="driverspage");ns&&X(ns);const rs=u.find(y=>y.id==="footer");rs&&_t(rs);const os=u.find(y=>y.id==="categoryleaders");os&&Za(os);const ds=u.find(y=>y.id==="nextrace");ds&&Wa(ds);const cs=u.find(y=>y.id==="rulespage");cs&&Xa(cs);const Dt=new Map(r.map((y,T)=>[y,T]));u.sort((y,T)=>{const R=Dt.has(y.id)?Dt.get(y.id):Number.MAX_SAFE_INTEGER,z=Dt.has(T.id)?Dt.get(T.id):Number.MAX_SAFE_INTEGER;return R!==z?R-z:(y.title||y.id).localeCompare(T.title||T.id)});const Ri=u.map(y=>({...y,sections:(y.sections||[]).map((T,R)=>{if(T.type!=="text")return T;const de=sn(T)?ve(T.value||""):(T.value||"").replace(/\u00a0/g," "),Me=ws(T.label||"")?ve(T.label||""):T.label;return{...T,label:Me,value:de,...T.url?{url:ft(T.url)}:{},order:ce(T.order,R)}}).sort((T,R)=>ce(T.order,0)-ce(R.order,0)),images:(y.images||[]).map((T,R)=>({...T,order:ce(T.order,R)})).sort((T,R)=>ce(T.order,0)-ce(R.order,0))}));l(Ri)}const[i,n,o,p,g,h]=await Promise.all([fetch(`/api/all-images?v=${Date.now()}`).then(r=>r.json()).catch(()=>({})),fetch("/api/events").then(r=>r.json()).catch(()=>[]),fetch("/api/news").then(r=>r.json()).catch(()=>[]),fetch("/api/drivers").then(r=>r.json()).catch(()=>[]),fetch("/api/gallery-photos").then(r=>r.json()).catch(()=>[]),fetch("/api/videos").then(r=>r.json()).catch(()=>[])]);i?.local&&O(i.local),Array.isArray(n)&&(ue(n),n.length>0&&Ue===null&&(Oe(n[0].id),c(n[0]))),Array.isArray(o)&&(M(o),o.length>0&&q===null&&(H(o[0].id),oe({...o[0]}))),Array.isArray(p)&&(Ye(p),p.length>0&&ee===null&&ct(p[0].id)),Array.isArray(g)&&At(g),Array.isArray(h)&&(jt(h),h.length>0&&ot===null&&Pa(h[0].id))}catch(t){console.error("Content load error:",t)}};f.useEffect(()=>{Ta()},[]),f.useEffect(()=>{if(!s.length)return;const t=s.findIndex(h=>h.id==="about");if(t===-1||(s[t].sections||[]).some(h=>Je(h.id)))return;const n=[{label:"PİLOTLAR",value:"140+"},{label:"YARIŞLAR",value:"50+"},{label:"GƏNCLƏR",value:"20+"}],o=[...s],p={...o[t]},g=[...p.sections||[]];n.forEach((h,r)=>{const u=`${r+1}`;g.push({id:`${ze}${u}`,type:"text",label:`Statistika Etiketi ${r+1}`,value:h.label},{id:`${we}${u}`,type:"text",label:`Statistika Dəyəri ${r+1}`,value:h.value})}),p.sections=g,o[t]=p,l(o)},[s]),f.useEffect(()=>{Ea.current||(Ea.current=!0)},[]),f.useEffect(()=>{const t=new URLSearchParams(Xt.search),a=t.get("mode"),i=t.get("page");if(a&&["extract","events","news","drivers","videos","photos"].includes(a))Se(a);else if(i){Se("extract");const n=fs(i),o=s.findIndex(p=>n.includes(p.id));o!==-1&&m(o)}},[Xt.search,s]);const $s=async()=>{A(!0),P("Front-end komponentləri skan edilir..."),I(30);const t=Date.now(),a=E.loading("Sinxronizasiya başladı...");try{const i=await fetch("/api/extract-content",{method:"POST"});if(!i.ok){const h=await i.text();throw new Error(h||"Extraction failed")}I(60),P("Bulud bazası ilə sinxronizasiya edilir...");const n=await i.json(),o=n.pages||n,p=await fetch("/api/save-content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!p.ok){const h=await p.text();throw new Error(h||"Save failed")}I(90),l(o);const g=Date.now()-t;g<800&&await new Promise(h=>setTimeout(h,800-g)),I(100),P("Tamamlandı!"),setTimeout(()=>{A(!1),localStorage.setItem("forsaj_extracted","true"),localStorage.setItem(pa,Date.now().toString()),E.success("Sinxronizasiya tamamlandı! Baza yeniləndi.",{id:a})},500)}catch(i){console.error("Extraction error:",i),A(!1),E.error(`Sinxronizasiya xətası: ${i.message}`,{id:a})}},_e=(t,a,i,n)=>{const o=[...s],p=o[t].sections.findIndex(g=>g.id===a);if(p!==-1){const g=o[t].sections[p];if(!Ut(g,i))return;let h=n;const u=!!lt(g)||Je(g.id)||g.id.startsWith("val-")||g.id.startsWith("txt-");(i==="value"||i==="label")&&u&&(h=ve(n)),o[t].sections[p][i]=h,l(o)}},qs=(t,a)=>{const i=s[t];if(!i)return;const n=i.sections.find(p=>p.id===a);if(!n||!n.url)return;const o=ft(n.url);o&&o!==n.url&&_e(t,a,"url",o)},Ra=(t,a,i)=>{const n=[...s],o=n[t].images.findIndex(p=>p.id===a);o!==-1&&(n[t].images[o].alt=i,l(n))},Hs=()=>{if(!Le.trim()){E.error("Başlıq daxil edin!");return}const a={id:Le.toLowerCase().replace(/\s+/g,"-"),title:Le,sections:[{id:"text-0",type:"text",label:"Bölmə",value:"Yeni bölmə məzmunu..."}],images:[]};l([...s,a]),m(s.length),x(!1),Ce(""),E.success("Yeni bölmə əlavə edildi!")},La=(t,a,i)=>{if(d<0||d>=s.length)return;const n=[...s],o=n[d];if(o){if(t==="text"){const p=`text-${o.sections.length}-${Date.now()}`,g=o.sections.reduce((h,r,u)=>Math.max(h,ce(r.order,u)),-1)+1;o.sections.push({id:p,type:"text",label:"Bölmə",value:"Yeni mətn sahəsi...",order:g}),E.success("Yeni mətn sahəsi əlavə edildi")}else{const p=`img-${o.images.length}-${Date.now()}`,g=o.images.reduce((h,r,u)=>Math.max(h,ce(r.order,u)),-1)+1;o.images.push({id:p,path:"",alt:"",type:"local",order:g}),E.success("Yeni şəkil sahəsi əlavə edildi")}l(n)}},Ca=(t,a,i=d)=>{if(i<0||i>=s.length)return;const n=[...s],o=n[i];o&&(t==="text"?(o.sections=o.sections.filter(p=>p.id!==a),o.sections=o.sections.map((p,g)=>({...p,order:g}))):(o.images=o.images.filter(p=>p.id!==a),o.images=o.images.map((p,g)=>({...p,order:g}))),l(n),E.success("Sahə silindi"))},Et=(t,a,i,n=d)=>{if(n<0||n>=s.length)return;const o=[...s],p=o[n];if(!p)return;const g=t==="text"?p.sections:p.images,h=g.findIndex(B=>B.id===a);if(h===-1)return;const r=i==="up"?h-1:h+1;if(r<0||r>=g.length)return;const u=g[h];g[h]=g[r],g[r]=u,t==="text"?p.sections=(p.sections||[]).map((B,F)=>({...B,order:F})):p.images=(p.images||[]).map((B,F)=>({...B,order:F})),l(o)},aa=(t=d)=>{if(t<0||t>=s.length)return;const a=[...s],i=a[t];if(!i||i.id!=="about")return;const n=`${Date.now()}`;i.sections.push({id:`${ze}${n}`,type:"text",label:"Statistika Etiketi",value:"YENİ STATİSTİKA"},{id:`${we}${n}`,type:"text",label:"Statistika Dəyəri",value:"0+"}),l(a),E.success("Yeni statistika əlavə edildi")},Nt=(t,a,i,n=d)=>{if(n<0||n>=s.length)return;const o=[...s],p=o[n];if(!p||p.id!=="about")return;const g=a==="label"?`${ze}${t}`:`${we}${t}`,h=p.sections.findIndex(u=>u.id===g),r=ve(i);h!==-1?p.sections[h].value=r:p.sections.push({id:g,type:"text",label:a==="label"?"Statistika Etiketi":"Statistika Dəyəri",value:r}),l(o)},Ia=(t,a=d)=>{if(a<0||a>=s.length)return;const i=[...s],n=i[a];!n||n.id!=="about"||(n.sections=n.sections.filter(o=>o.id!==`${ze}${t}`&&o.id!==`${we}${t}`),l(i),E.success("Statistika silindi"))},Gs=(t=d)=>{const a=[...s];let i=t;if((i<0||i>=a.length||!["about","values"].includes(a[i]?.id))&&(i=a.findIndex(p=>p.id==="about")),i<0||i>=a.length)return;const n=a[i],o=`${Date.now()}`;n.sections.push({id:`val-icon-${o}`,type:"text",label:"İkon Kodu (Shield/Users/Leaf/Zap)",value:"Shield"},{id:`val-title-${o}`,type:"text",label:"Dəyər Başlığı",value:"YENİ DƏYƏR"},{id:`val-desc-${o}`,type:"text",label:"Dəyər Təsviri",value:"Dəyər təsvirini daxil edin."}),l(a),E.success("Yeni dəyər əlavə edildi")},pt=t=>{if(!t)return[];const a=new Map;return(t.sections||[]).forEach(i=>{const n=i.id.match(da);if(!n)return;const o=Number(n[1]),p=on(n[2]);if(!p)return;const g=a.get(o)||{index:o,name:"",tag:"OFFICIAL PARTNER",icon:"ShieldCheck",useImage:"false",imageId:`partner-image-${o}`};g[p]=i.value||"",a.set(o,g)}),Array.from(a.values()).sort((i,n)=>i.index-n.index)},Tt=t=>{if(d<0||d>=s.length)return;const a=[...s],i=a[d];if(!i||i.id!=="partners")return;const n=(i.sections||[]).filter(r=>!da.test(r.id)),o=[];t.forEach(r=>{o.push({id:`PARTNER_${r.index}_NAME`,type:"text",label:`Tərəfdaş ${r.index} Ad`,value:r.name},{id:`PARTNER_${r.index}_TAG`,type:"text",label:`Tərəfdaş ${r.index} Etiket`,value:r.tag},{id:`PARTNER_${r.index}_ICON`,type:"text",label:`Tərəfdaş ${r.index} İkon`,value:r.icon},{id:`PARTNER_${r.index}_USE_IMAGE`,type:"text",label:`Tərəfdaş ${r.index} Görsel İstifadə`,value:r.useImage},{id:`PARTNER_${r.index}_IMAGE_ID`,type:"text",label:`Tərəfdaş ${r.index} Görsel ID`,value:r.imageId||`partner-image-${r.index}`})});const p=i.images||[],g=new Set(t.map(r=>r.imageId||`partner-image-${r.index}`)),h=[...p];g.forEach(r=>{h.some(u=>u.id===r)||h.push({id:r,path:"",alt:r,type:"local",order:h.length})}),i.sections=[...n,...o],i.images=h.map((r,u)=>({...r,order:u})),l(a)},xt=(t,a,i)=>{const n=pt(s[d]).map(o=>o.index===t?{...o,[a]:i}:o);Tt(n)},Qs=()=>{const t=pt(s[d]),a=(t[t.length-1]?.index||0)+1;t.push({index:a,name:`PARTNER ${a}`,tag:"OFFICIAL PARTNER",icon:"ShieldCheck",useImage:"false",imageId:`partner-image-${a}`}),Tt(t)},Vs=t=>{const a=pt(s[d]).filter(i=>i.index!==t);Tt(a)},ka=(t,a)=>{const i=pt(s[d]),n=i.findIndex(h=>h.index===t);if(n===-1)return;const o=a==="up"?n-1:n+1;if(o<0||o>=i.length)return;const p=i[n];i[n]=i[o],i[o]=p;const g=i.map((h,r)=>({...h,index:r+1,imageId:h.imageId||`partner-image-${r+1}`}));Tt(g)},Oa=(t,a)=>ve(t||"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")||a,Zs=[{id:"pilot",icon:"Info",titleKey:"RULES_PILOT_TITLE",titleFallback:"PİLOT PROTOKOLU",docNameFallback:"PILOT_PROTOKOLU.PDF",items:[{titleKey:"RULES_PILOT_SUB1",titleFallback:"İSTİFADƏÇİ ÖHDƏLİKLƏRİ",descKey:"RULES_PILOT_DESC1",descFallback:"HƏR BİR İŞTİRAKÇI FEDERASİYANIN MÜƏYYƏN ETDİYİ BÜTÜN TEXNİKİ VƏ ETİK NORMALARI QEYD-ŞƏRTSİZ QƏBUL EDİR."},{titleKey:"RULES_PILOT_SUB2",titleFallback:"DİSKVALİFİKASİYA",descKey:"RULES_PILOT_DESC2",descFallback:"PROTOKOLDAN KƏNARA ÇIXMAQ VƏ YA HAKİM QƏRARLARINA ETİRAZ ETMƏK DƏRHAL DİSKVALİFİKASİYA İLƏ NƏTİCƏLƏNƏ BİLƏR."},{titleKey:"RULES_PILOT_SUB3",titleFallback:"TEXNİKİ TƏLƏBLƏR",descKey:"RULES_PILOT_DESC3",descFallback:"BÜTÜN AVADANLIQLAR YARIŞDAN 24 SAAT ƏVVƏL TEXNİKİ KOMİSSİYA TƏRƏFİNDƏN YOXLANILMALI VƏ TƏHLÜKƏSİZLİK SERTİFİKATI İLƏ TƏMİN EDİLMƏLİDİR."}]},{id:"technical",icon:"Settings",titleKey:"RULES_TECH_TITLE",titleFallback:"TEXNİKİ NORMARTİVLƏR",docNameFallback:"TEXNIKI_NORMATIVLER.PDF",items:[{titleKey:"RULES_TECH_SUB1",titleFallback:"TƏKƏR ÖLÇÜLƏRİ",descKey:"RULES_TECH_DESC1",descFallback:"PRO CLASS ÜÇÜN MAKSİMUM TƏKƏR ÖLÇÜSÜ 37 DÜYM, AMATEUR CLASS ÜÇÜN İSƏ 33 DÜYM OLARAQ MÜƏYYƏN EDİLMİŞDİR."},{titleKey:"RULES_TECH_SUB2",titleFallback:"MÜHƏRRİK GÜCÜ",descKey:"RULES_TECH_DESC2",descFallback:"MÜHƏRRİK ÜZƏRİNDƏ APARILAN MODİFİKASİYALAR KATEQORİYA ÜZRƏ LİMİTLƏRİ AŞMAMALIDIR. TURBO SİSTEMLƏRİ YALNIZ XÜSUSİ KLASLARDA İCAZƏLİDİR."},{titleKey:"RULES_TECH_SUB3",titleFallback:"ASQI SİSTEMİ",descKey:"RULES_TECH_DESC3",descFallback:"AVTOMOBİLİN KLİRENSİ (YERDƏN HÜNDÜRLÜYÜ) VƏ ASQI ARTIKULYASİYASI TƏHLÜKƏSİZLİK STANDARTLARINA UYĞUN OLMALIDIR."}]},{id:"safety",icon:"ShieldAlert",titleKey:"RULES_SAFETY_TITLE",titleFallback:"TƏHLÜKƏSİZLİK QAYDALARI",docNameFallback:"TEHLUKESIZLIK_QAYDALARI.PDF",items:[{titleKey:"RULES_SAFETY_SUB1",titleFallback:"KARKAS TƏLƏBİ",descKey:"RULES_SAFETY_DESC1",descFallback:"BÜTÜN AÇIQ VƏ YA MODİFİKASİYA OLUNMUŞ AVTOMOBİLLƏRDƏ FIA STANDARTLARINA UYĞUN TƏHLÜKƏSİZLİK KARKASI (ROLL CAGE) MƏCBURİDİR."},{titleKey:"RULES_SAFETY_SUB2",titleFallback:"YANĞIN SÖNDÜRMƏ",descKey:"RULES_SAFETY_DESC2",descFallback:"HƏR BİR AVTOMOBİLDƏ ƏN AZI 2 KİLOQRAMLIQ, ASAN ƏLÇATAN YERDƏ YERLƏŞƏN YANĞINSÖNDÜRƏN BALON OLMALIDIR."},{titleKey:"RULES_SAFETY_SUB3",titleFallback:"KƏMƏR VƏ DƏBİLQƏ",descKey:"RULES_SAFETY_DESC3",descFallback:"5 NÖQTƏLİ TƏHLÜKƏSİZLİK KƏMƏRLƏRİ VƏ SERTİFİKATLI KASKALARIN (DƏBİLQƏLƏRİN) İSTİFADƏSİ BÜTÜN MƏRHƏLƏLƏRDƏ MƏCBURİDİR."}]},{id:"eco",icon:"Leaf",titleKey:"RULES_ECO_TITLE",titleFallback:"EKOLOJİ MƏSULİYYƏT",docNameFallback:"EKOLOJI_MESULIYYET.PDF",items:[{titleKey:"RULES_ECO_SUB1",titleFallback:"TULLANTILARIN İDARƏ EDİLMƏSİ",descKey:"RULES_ECO_DESC1",descFallback:'YARIŞ ƏRAZİSİNDƏ VƏ TRASDA HƏR HANSI BİR TULLANTININ ATILMASI QƏTİ QADAĞANDIR. İŞTİRAKÇILAR "LEAVE NO TRACE" PRİNSİPİNƏ ƏMƏL ETMƏLİDİR.'},{titleKey:"RULES_ECO_SUB2",titleFallback:"MAYE SIZMALARI",descKey:"RULES_ECO_DESC2",descFallback:"AVTOMOBİLDƏN YAĞ VƏ YA SOYUDUCU MAYE SIZMASI OLDUĞU TƏQDİRDƏ PİLOT DƏRHAL DAYANMALI VƏ ƏRAZİNİN ÇİRKLƏNMƏSİNİN QARŞISINI ALMALIDIR."},{titleKey:"RULES_ECO_SUB3",titleFallback:"MARŞRUTDAN KƏNARA ÇIXMAMAQ",descKey:"RULES_ECO_DESC3",descFallback:"TƏBİİ ÖRTÜYÜ QORUMAQ MƏQSƏDİ İLƏ MÜƏYYƏN OLUNMUŞ TRASDANKƏNAR SÜRÜŞLƏR VƏ YA YAŞIL SAHƏLƏRƏ ZƏRƏR VERMƏK QADAĞANDIR."}]}],Rt=(t,a,i)=>{const n=ve((t.find(o=>o.id===a)?.value||"").toString());return!n||qt(n)?i:n},Ws=t=>{const a=Rt(t,"BTN_DOWNLOAD_PDF","PDF YÜKLƏ"),i=ft((t.find(n=>n.id==="BTN_DOWNLOAD_PDF")?.url||"").toString());return Zs.map((n,o)=>({index:o+1,id:n.id,title:Rt(t,n.titleKey,n.titleFallback),icon:n.icon,docName:n.docNameFallback,docButton:a,docUrl:i,items:n.items.map((p,g)=>({index:g+1,title:Rt(t,p.titleKey,p.titleFallback),desc:Rt(t,p.descKey,p.descFallback)}))}))},sa=t=>Oa(t||"",""),Ee=t=>{if(!t||t.id!=="rulespage")return[];const a=new Map;(t.sections||[]).forEach(h=>{const r=h.id.match(nn);if(r){const B=Number(r[1]),F=r[2],w=a.get(B)||{id:`tab-${B}`,title:"",icon:"Info",docName:"",docButton:"",docUrl:"",items:new Map};F==="ID"&&(w.id=h.value||`tab-${B}`),F==="TITLE"&&(w.title=h.value||""),F==="ICON"&&(w.icon=h.value||"Info"),F==="DOC_NAME"&&(w.docName=h.value||""),F==="DOC_BUTTON"&&(w.docButton=h.value||""),F==="DOC_URL"&&(w.docUrl=ft(h.url||h.value||"")),a.set(B,w);return}const u=h.id.match(rn);if(u){const B=Number(u[1]),F=Number(u[2]),w=u[3],K=a.get(B)||{id:`tab-${B}`,title:"",icon:"Info",docName:"",docButton:"",docUrl:"",items:new Map},te=K.items.get(F)||{title:"",desc:""};w==="TITLE"&&(te.title=h.value||""),w==="DESC"&&(te.desc=h.value||""),K.items.set(F,te),a.set(B,K)}});const i=Array.from(a.entries()).sort((h,r)=>h[0]-r[0]).map(([h,r])=>({index:h,id:r.id||`tab-${h}`,title:r.title||"",icon:r.icon||"Info",docName:r.docName||"",docButton:r.docButton||"",docUrl:r.docUrl||"",items:Array.from(r.items.entries()).sort((u,B)=>u[0]-B[0]).map(([u,B])=>({index:u,title:B.title||"",desc:B.desc||""}))})).filter(h=>h.title||h.items.length>0),n=Ws(t.sections||[]);if(!i.length)return n;const o=new Map;i.forEach(h=>{o.set(sa(h.id||h.title||""),h)});const p=new Set,g=n.map(h=>{const r=sa(h.id||h.title||""),u=o.get(r);return u?(p.add(r),{...h,...u,id:u.id||h.id,title:u.title||h.title,icon:u.icon||h.icon,docName:u.docName||h.docName,docButton:u.docButton||h.docButton,docUrl:u.docUrl||h.docUrl,items:u.items&&u.items.length>0?u.items:h.items}):h});return i.forEach(h=>{const r=sa(h.id||h.title||"");p.has(r)||g.push(h)}),g.map((h,r)=>({...h,index:r+1}))},Ke=(t,a=d)=>{if(a<0||a>=s.length)return;const i=[...s],n=i[a];if(!n||n.id!=="rulespage")return;const o=(n.sections||[]).filter(g=>!ca.test(g.id)),p=[];return t.forEach((g,h)=>{const r=h+1,u=Oa(g.id||g.title||"",`tab-${r}`),B=ve(g.title||`SEKME ${r}`),F=oa.includes(g.icon)?g.icon:"Info",w=ve(g.docName||`${u.toUpperCase()}_PROTOKOLU.PDF`),K=ve(g.docButton||"PDF YÜKLƏ"),te=tn(g.docUrl||"");p.push({id:`RULE_TAB_${r}_ID`,type:"text",label:`Qayda Sekməsi ${r} ID`,value:u},{id:`RULE_TAB_${r}_TITLE`,type:"text",label:`Qayda Sekməsi ${r} Başlıq`,value:B},{id:`RULE_TAB_${r}_ICON`,type:"text",label:`Qayda Sekməsi ${r} İkon`,value:F},{id:`RULE_TAB_${r}_DOC_NAME`,type:"text",label:`Sekmə ${r} Sənəd Adı`,value:w},{id:`RULE_TAB_${r}_DOC_BUTTON`,type:"text",label:`Sekmə ${r} Sənəd Düyməsi`,value:K},{id:`RULE_TAB_${r}_DOC_URL`,type:"text",label:`Sekmə ${r} Sənəd Linki`,value:te,...te?{url:te}:{}}),(g.items||[]).forEach((De,Xe)=>{const Ne=Xe+1;p.push({id:`RULE_TAB_${r}_ITEM_${Ne}_TITLE`,type:"text",label:`Sekmə ${r} Maddə ${Ne} Başlıq`,value:ve(De.title||"")},{id:`RULE_TAB_${r}_ITEM_${Ne}_DESC`,type:"text",label:`Sekmə ${r} Maddə ${Ne} Təsvir`,value:ve(De.desc||"")})})}),n.sections=[...o,...p].map((g,h)=>({...g,order:h})),l(i),i},_a=(t=d)=>{const a=Ee(s[t]),i=a.length+1;a.push({index:i,id:`tab-${i}`,title:`SEKME ${i}`,icon:"Info",docName:`TAB_${i}_PROTOKOLU.PDF`,docButton:"PDF YÜKLƏ",docUrl:"",items:[{index:1,title:"YENİ MADDƏ",desc:"Maddə təsviri..."}]}),Ke(a,t),E.success("Yeni sekmə əlavə edildi")},Da=(t,a=d)=>{const i=Ee(s[a]).filter((n,o)=>o!==t);Ke(i,a),E.success("Sekmə silindi")},Lt=(t,a,i=d)=>{const n=Ee(s[i]),o=a==="up"?t-1:t+1;if(o<0||o>=n.length)return;const p=n[t];n[t]=n[o],n[o]=p,Ke(n,i)},be=(t,a,i,n=d)=>{const o=Ee(s[n]);o[t]&&(o[t]={...o[t],[a]:i},Ke(o,n))},Ma=(t,a=d)=>{const i=Ee(s[a]);if(!i[t])return;const n=(i[t].items?.length||0)+1;i[t].items=[...i[t].items||[],{index:n,title:`MADDƏ ${n}`,desc:"Maddə təsviri..."}],Ke(i,a)},Ba=(t,a,i=d)=>{const n=Ee(s[i]);n[t]&&(n[t].items=(n[t].items||[]).filter((o,p)=>p!==a),Ke(n,i))},Ct=(t,a,i,n,o=d)=>{const p=Ee(s[o]);!p[t]||!p[t].items[a]||(p[t].items[a]={...p[t].items[a],[i]:n},Ke(p,o))},za=(t,a)=>{Ge({pageIdx:t,imgId:a}),D(!0)},ia=async(t,a)=>{const i=new FormData;i.append("image",t);const n=E.loading(a?.loadingText||"Şəkil yüklənir...");try{const o=await fetch("/api/upload-image",{method:"POST",body:i});if(o.ok){const p=await o.json();return E.success(a?.successText||"Şəkil uğurla yükləndi",{id:n}),p.url}else throw new Error("Upload fail")}catch(o){return console.error("Upload error:",o),E.error(a?.errorText||"Görsəl yüklənərkən xəta baş verdi",{id:n}),null}},Ve=async t=>ia(t),Xs=async t=>t.type!=="application/pdf"&&!t.name.toLowerCase().endsWith(".pdf")?(E.error("Yalnız PDF faylı yüklənə bilər"),null):ia(t,{loadingText:"PDF yüklənir...",successText:"PDF uğurla yükləndi",errorText:"PDF yüklənərkən xəta baş verdi"}),Js=async t=>{try{(await fetch("/api/save-content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok&&localStorage.setItem(pa,Date.now().toString())}catch(a){console.error("Silent save failed:",a)}},wa=async(t,a,i=d)=>{const n=await Xs(t);if(!n)return;const o=Ee(s[i]);if(!o[a])return;o[a]={...o[a],docName:t.name,docUrl:n};const p=Ke(o,i);p&&se==="extract"&&await Js(p)},ei=async(t,a,i)=>{const n=t.target.files?.[0];if(!n)return;const o=await Ve(n);if(o){const p=[...s],g=p[a].images.findIndex(h=>h.id===i);g!==-1&&(p[a].images[g].path=o,p[a].images[g].type="local",l(p))}},ti=t=>{if(!L)return;const a=[...s];if(k){const i=`img-${a[L.pageIdx].images.length}-${Date.now()}`;a[L.pageIdx].images.push({id:i,path:t,alt:"Daxil edildi",type:"local"}),W(!1)}else{const i=a[L.pageIdx].images.findIndex(n=>n.id===L.imgId);i!==-1&&(a[L.pageIdx].images[i].path=t,a[L.pageIdx].images[i].type="local")}l(a),D(!1),E.success("Şəkil seçildi")},la=async()=>{S(!0);const t=E.loading("Yadda saxlanılır...");try{if(se==="extract"){const a=await fetch("/api/save-content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error(await a.text());localStorage.setItem(pa,Date.now().toString())}else if(se==="events"){const a=await fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ke)});if(!a.ok)throw new Error(await a.text())}else if(se==="news"){const a=await fetch("/api/news",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!a.ok)throw new Error(await a.text())}else if(se==="drivers"){const a=await fetch("/api/drivers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ge)});if(!a.ok)throw new Error(await a.text())}else if(se==="videos"){const a=await fetch("/api/videos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(xe)});if(!a.ok)throw new Error(await a.text())}else if(se==="photos"){const a=await fetch("/api/gallery-photos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ea)});if(!a.ok)throw new Error(await a.text())}E.success("Dəyişikliklər bulud bazasına qeyd edildi!",{id:t}),await Ta()}catch(a){console.error("Save error:",a),E.error(`Yadda saxlama xətası: ${a.message} `,{id:t})}finally{S(!1)}},ai=t=>{const a=ke.find(i=>i.id===t);a&&(Oe(t),c({...a}))},je=(t,a,i)=>{const n=i||Ue;c(o=>{const g=!i||i===Ue?{...o,[t]:a}:o;return n&&ue(h=>h.map(r=>r.id===n?{...r,[t]:a}:r)),g})},si=()=>{const t=ke.length>0?Math.max(...ke.map(i=>i.id))+1:1,a={id:t,title:"Yeni Tədbir",date:new Date().toISOString().split("T")[0],location:"Bakı",category:"OFFROAD",img:"https://images.unsplash.com/photo-1533473359331-0135ef1b58bf?q=80&w=2070&auto=format&fit=crop",description:"",rules:"",status:"planned"};ue([...ke,a]),Oe(t),c(a),E.success("Yeni tədbir yaradıldı")},ii=async(t,a)=>{a.stopPropagation(),window.confirm("Bu tədbiri silmək istədiyinizə əminsiniz?")&&(ue(ke.filter(i=>i.id!==t)),Ue===t&&Oe(null),E.success("Tədbir silindi"))},li=t=>{const a=N.find(i=>i.id===t);a&&(H(t),oe({...a}))},Ze=(t,a,i)=>{const n=i||q;oe(o=>{const g=!i||i===q?{...o,[t]:a}:o;return n&&M(h=>h.map(r=>r.id===n?{...r,[t]:a}:r)),g})},ni=()=>{const t=N.length>0?Math.max(...N.map(i=>i.id))+1:1,a={id:t,title:"Yeni Xəbər",date:new Date().toISOString().split("T")[0],img:"https://images.unsplash.com/photo-1503376780353-7e6692767b70?q=80&w=2070&auto=format&fit=crop",description:"",category:"BLOQ",status:"draft"};M([...N,a]),H(t),oe(a),E.success("Yeni xəbər yaradıldı")},Pa=t=>{Zt(t);const a=xe.find(i=>i.id===t);a&&Wt({...a})},It=(t,a,i)=>{const n=ot;Wt(o=>{let g={...o,[t]:a};if(t==="youtubeUrl"){const h=Ua(a);h&&(g={...g,videoId:h,thumbnail:`https://img.youtube.com/vi/${h}/maxresdefault.jpg`})}return n&&jt(h=>h.map(r=>{if(r.id===n){let u={...r,[t]:a};if(t==="youtubeUrl"){const B=Ua(a);B&&(u.videoId=B,u.thumbnail=`https://img.youtube.com/vi/${B}/maxresdefault.jpg`)}return u}return r})),g})},Ua=t=>{const a=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,i=t.match(a);return i&&i[2].length===11?i[2]:null},Fa=t=>{Na(t);const a=ea.find(i=>i.id===t);a&&ta({...a})},ri=()=>{const t=Date.now(),a={id:t,title:"Yeni Şəkil",url:""};At(i=>[...i,a]),Fa(t)},oi=async(t,a)=>{a.stopPropagation(),window.confirm("Bu şəkli silmək istədiyinizə əminsiniz?")&&(At(i=>i.filter(n=>n.id!==t)),dt===t&&(Na(null),ta({})),E.success("Şəkil silindi"))},na=(t,a)=>{ta(i=>{const n={...i,[t]:a};return dt&&At(o=>o.map(p=>p.id===dt?n:p)),n})},di=async t=>{const a=t.target.files?.[0];if(!a)return;const i=await Ve(a);i&&na("url",i)},ci=()=>{const t=xe.length>0?Math.max(...xe.map(i=>i.id))+1:1,a={id:t,title:"Yeni Video",youtubeUrl:"",videoId:"",duration:"00:00",thumbnail:"",created_at:new Date().toISOString()};jt([...xe,a]),Zt(t),Wt(a),E.success("Yeni video əlavə edildi")},ui=async(t,a)=>{a.stopPropagation(),window.confirm("Bu videonu silmək istədiyinizə əminsiniz?")&&(jt(xe.filter(i=>i.id!==t)),ot===t&&Zt(null),E.success("Video silindi"))},pi=async(t,a)=>{a.stopPropagation(),window.confirm("Bu xəbəri silmək istədiyinizə əminsiniz?")&&(M(N.filter(i=>i.id!==t)),q===t&&H(null),E.success("Xəbər silindi"))},xi=t=>{ct(t),ut(null),tt({})},mi=t=>{ut(t);const i=ge.find(n=>n.id===ee)?.drivers.find(n=>n.id===t);i&&tt({...i})},We=(t,a)=>{!ee||!et||tt(i=>{const n={...i,[t]:a};return Ye(o=>o.map(p=>p.id===ee?{...p,drivers:p.drivers.map(g=>g.id===et?n:g)}:p)),n})},hi=()=>{if(!ee){E.error("Öncə kateqoriya seçin və ya yaradın");return}const t=Date.now(),a={id:t,rank:99,name:"Yeni Sürücü",license:"PILOT LICENSE",team:"TEAM NAME",wins:0,points:0,img:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?q=80&w=400&fit=crop"};Ye(i=>i.map(n=>n.id===ee?{...n,drivers:[...n.drivers,a]}:n)),ut(t),tt(a),E.success("Yeni sürücü siyahıya əlavə edildi")},fi=t=>{window.confirm("Bu sürücünü silmək istədiyinizə əminsiniz?")&&(Ye(a=>a.map(i=>i.id===ee?{...i,drivers:i.drivers.filter(n=>n.id!==t)}:i)),et===t&&(ut(null),tt({})),E.success("Sürücü silindi"))},gi=async()=>{const t=me,a=ge.map(n=>n.id===ee?{...n,drivers:n.drivers.map(o=>o.id===et?{...o,...t}:o)}:n);S(!0);const i=E.loading("Yadda saxlanılır...");try{if(!(await fetch("/api/drivers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw new Error("Yadda saxlama uğursuz oldu");Ye(a),E.success("Bütün sürücü məlumatları qeyd edildi",{id:i})}catch{E.error("Xəta baş verdi",{id:i})}finally{S(!1)}},bi=()=>{const t=window.prompt("Kateqoriya adı (Məs: UNLIMITED CLASS):");if(!t)return;const a=t.toLowerCase().replace(/[^a-z0-9]+/g,"-");if(ge.find(n=>n.id===a)){E.error("Bu adda kateqoriya artıq mövcuddur");return}const i={id:a,name:t,drivers:[]};Ye([...ge,i]),ct(a),E.success("Kateqoriya əlavə edildi")},vi=()=>{if(!ee)return;const t=ge.find(a=>a.id===ee);if(t&&window.confirm(`"${t.name}" kateqoriyasını və içindəki bütün sürücüləri silmək istədiyinizə əminsiniz?`)){const a=ge.filter(i=>i.id!==ee);Ye(a),a.length>0?ct(a[0].id):ct(null),ut(null),tt({}),E.success("Kateqoriya silindi")}},yi=t=>{if(!ee)return;const a=t.trim();if(!a){E.error("Kateqoriya adı boş ola bilməz");return}Ye(i=>i.map(n=>n.id===ee?{...n,name:a}:n))};if(s.length===0&&!b&&!localStorage.getItem("forsaj_extracted"))return e.jsx("div",{className:"extractor-overlay",children:e.jsxs("div",{className:"extractor-card fade-in",children:[e.jsx(ye,{size:64,className:"text-primary",style:{marginBottom:"1.5rem"}}),e.jsx("h2",{children:"Sayt Məzmununu və Görselləri Çıxarın"}),e.jsx("p",{children:"Front-end layihənizdəki bütün səhifələri, mətnləri və şəkilləri avtomatik olaraq bu panelə yükləyin."}),e.jsx("button",{className:"extract-btn",onClick:$s,children:"Sinxronizasiyanı Başlat"})]})});if(b)return e.jsx("div",{className:"extractor-overlay",children:e.jsxs("div",{className:"extractor-card",children:[e.jsx("div",{className:"loader-ring",style:{marginBottom:"1.5rem"}}),e.jsx("h2",{children:"Avtomatik Sinxronizasiya"}),e.jsx("p",{children:"Zəhmət olmasa gözləyin, front-end məlumatları oxunur..."}),e.jsx("div",{className:"progress-container",children:e.jsx("div",{className:"progress-bar",style:{width:`${C}%`}})}),e.jsx("div",{className:"step-label",children:U})]})});const G=s[d],Ya=fs(Fe).map(t=>{const a=s.findIndex(i=>i.id===t);return a===-1?null:{page:s[a],pageIdx:a}}).filter(Boolean),Si=!!Fe&&(!!it[Fe]||!!Ps[Fe]),ji=se==="extract"&&Si&&Ya.length>0,$e=Q.trim().toLowerCase(),he=(...t)=>$e?t.some(a=>(a||"").toString().toLowerCase().includes($e)):!0,kt=(G?.sections||[]).filter(t=>hs(t)||G?.id==="about"&&Je(t.id)||G?.id==="partners"&&(da.test(t.id)||t.id==="SECTION_TITLE")||G?.id==="rulespage"&&ca.test(t.id)||G?.id==="rulespage"&&t.id.startsWith("RULES_")?!1:he(t.id,t.label,t.value,t.url)).sort((t,a)=>ce(t.order,0)-ce(a.order,0)),Ka=G?.id==="about"?(()=>{const t=new Map;return(G.sections||[]).forEach(i=>{if(!Je(i.id))return;const n=ms(i.id)||i.id,o=t.get(n)||{label:"",value:""};i.id.startsWith(ze)&&(o.label=i.value||""),i.id.startsWith(we)&&(o.value=i.value||""),t.set(n,o)}),Array.from(t.entries()).sort(([i],[n])=>i.localeCompare(n,void 0,{numeric:!0})).map(([i,n])=>({suffix:i,...n})).filter(i=>he(i.suffix,i.label,i.value))})():[],$a=G?.id==="partners"?pt(G):[],qa=G?.id==="rulespage"?Ee(G):[],Ot=(G?.images||[]).filter(t=>he(t.id,t.alt,t.path)).sort((t,a)=>ce(t.order,0)-ce(a.order,0)),Ai=t=>{const a=(t.value||"").toLowerCase();return a.includes("<p")||a.includes("<br")||a.includes("[b]")||a.includes("[i]")||a.includes("[u]")||a.includes("[url")||a.includes("[img")||a.includes("[center]")},Ei=t=>t.id.startsWith("val-icon-")||/ikon|icon/i.test(t.label||""),Ni=(t,a)=>`${t}::${a}`,ra=(t,a,i=d,n=G)=>{const o=lt(t),p=Ut(t,"label"),g=Ut(t,"value"),h=Ut(t,"url"),r=!!(t.url||"").trim(),u=ln(t),B=n?.sections||[],F=B.findIndex(X=>X.id===t.id),w=F>0,K=F>=0&&F<B.length-1,te=Ei(t),De=n?.id||G?.id||"unknown",Xe=Ni(De,t.id),Ne=!!rt[Xe];return e.jsxs("div",{className:"field-item-wrapper",style:{background:"#fcfcfd",padding:"1.25rem",borderRadius:"14px",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"center",marginBottom:"0.75rem",flexWrap:"wrap"},children:[e.jsx("input",{type:"text",value:qt(t.label)?en(t.label):t.label,onChange:X=>_e(i,t.id,"label",X.target.value),disabled:!p,style:{fontSize:"0.85rem",fontWeight:800,textTransform:"uppercase",color:"var(--primary)",border:"none",background:"none",width:"auto",padding:0}}),o&&e.jsx("span",{style:{fontSize:"10px",color:"#475569",background:"#f1f5f9",borderRadius:"999px",padding:"3px 8px",fontWeight:700},children:"Açar mətn"}),e.jsxs("span",{style:{fontSize:"10px",color:"#94a3b8",fontWeight:700,marginLeft:"auto"},children:["Sıra: ",a+1]}),e.jsxs("label",{className:"section-hide-toggle",children:[e.jsx("input",{type:"checkbox",checked:Ne,onChange:X=>{Vt(_t=>({..._t,[Xe]:X.target.checked}))}}),e.jsx("span",{children:"Paneldə gizlə"})]})]}),Ne?e.jsx("div",{className:"section-collapsed-tip",children:"Bu section paneldə gizlidir. Yenidən göstərmək üçün “Paneldə gizlə” seçimini söndürün."}):e.jsxs(e.Fragment,{children:[te?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"180px 1fr",gap:"8px"},children:[e.jsx("select",{value:t.value||"",onChange:X=>_e(i,t.id,"value",X.target.value),disabled:!g,style:{padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px"},children:Wl.map(X=>e.jsx("option",{value:X,children:X},X))}),e.jsx("input",{type:"text",value:t.value||"",onChange:X=>_e(i,t.id,"value",X.target.value),disabled:!g,style:{padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px"}})]}):o||!Ai(t)?e.jsx("textarea",{value:t.value||"",onChange:X=>_e(i,t.id,"value",X.target.value),disabled:!g,rows:4,style:{width:"100%",padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px",lineHeight:"1.4",resize:"vertical"}}):e.jsx(Pt,{id:`editor-${t.id}`,value:wt(t.value||""),onChange:X=>_e(i,t.id,"value",X),readOnly:!g}),r&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"0.75rem"},children:[e.jsx(ye,{size:14,style:{color:"#94a3b8"}}),e.jsx("input",{type:"text",value:ft(t.url||""),onChange:X=>_e(i,t.id,"url",X.target.value),onBlur:()=>qs(i,t.id),disabled:!h,placeholder:"URL (Məs: /about veya https://...)",style:{fontSize:"12px",padding:"6px 10px",border:"1px solid #e2e8f0",borderRadius:"6px",flex:1}})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"0.9rem"},children:[!r&&h&&e.jsxs("button",{title:"Link əlavə et",onClick:()=>_e(i,t.id,"url",`${window.location.origin}/`),style:{background:"#fff",border:"1px solid #dbeafe",color:"#2563eb",borderRadius:"8px",padding:"6px 10px",display:"flex",alignItems:"center",gap:6,cursor:"pointer",fontSize:"12px"},children:[e.jsx(ye,{size:12})," Link əlavə et"]}),e.jsxs("button",{title:"Yuxarı daşı",onClick:()=>Et("text",t.id,"up",i),disabled:!w,style:{background:"#fff",border:"1px solid #e2e8f0",color:w?"#334155":"#cbd5e1",borderRadius:"8px",padding:"6px 10px",display:"flex",alignItems:"center",gap:6,cursor:w?"pointer":"not-allowed",fontSize:"12px"},children:[e.jsx(mt,{size:12})," Yuxarı"]}),e.jsxs("button",{title:"Aşağı daşı",onClick:()=>Et("text",t.id,"down",i),disabled:!K,style:{background:"#fff",border:"1px solid #e2e8f0",color:K?"#334155":"#cbd5e1",borderRadius:"8px",padding:"6px 10px",display:"flex",alignItems:"center",gap:6,cursor:K?"pointer":"not-allowed",fontSize:"12px"},children:[e.jsx(ht,{size:12})," Aşağı"]}),u&&e.jsxs("button",{className:"field-delete-btn",onClick:()=>Ca("text",t.id,i),style:{background:"#fff",border:"1px solid #fee2e2",color:"#ef4444",borderRadius:"8px",padding:"6px 10px",display:"flex",alignItems:"center",gap:6,cursor:"pointer",fontSize:"12px"},children:[e.jsx(re,{size:12})," Sil"]})]})]})]},`${t.id}-${a}`)},Ti=(()=>{if(G?.id!=="contactpage")return[];const t=new Set,a=Xl.map(n=>{const o=n.ids.map(p=>kt.find(g=>g.id===p)).filter(Boolean);return o.forEach(p=>t.add(p.id)),{title:n.title,subtitle:n.subtitle,sections:o}}).filter(n=>n.sections.length>0),i=kt.filter(n=>!t.has(n.id));return i.length>0&&a.push({title:"Digər Sahələr",subtitle:"Avtomatik qruplaşdırıla bilməyən sahələr",sections:i}),a})(),Ha=N.filter(t=>he(t.title,t.date,t.category,t.status,t.description)),Ga=ke.filter(t=>he(t.title,t.date,t.location,t.category,t.status,t.description)),Qa=xe.filter(t=>he(t.title,t.duration,t.youtubeUrl,t.videoId,t.created_at)),Va=ea.filter(t=>he(t.title,t.url));return e.jsxs("div",{className:"visual-editor fade-in",children:[e.jsxs("div",{className:"editor-header",children:[e.jsxs("div",{className:"header-top-row",children:[e.jsx("div",{className:"header-info",children:e.jsxs("h1",{children:[e.jsx(ye,{size:20})," Admin Panel"]})}),e.jsxs("div",{className:"header-search-container",children:[e.jsx(Cs,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#94a3b8"}}),e.jsx("input",{placeholder:"Komponentləri və məzmunu axtar...",type:"text",value:Q,onChange:t=>Ie(t.target.value),className:"header-search-input"})]}),e.jsx("div",{className:"header-actions",children:e.jsx("button",{className:`save-btn ${v?"saving":""}`,onClick:la,disabled:v,children:v?"Gözləyin...":e.jsxs(e.Fragment,{children:[e.jsx(Sa,{size:16})," Saxla"]})})})]}),e.jsxs("div",{className:"mode-switcher",children:[e.jsx("button",{className:`mode-btn ${se==="extract"?"active":""}`,onClick:()=>Se("extract"),children:"Ana Səhifə"}),e.jsx("button",{className:`mode-btn ${se==="events"?"active":""}`,onClick:()=>Se("events"),children:"Tədbirlər"}),e.jsx("button",{className:`mode-btn ${se==="news"?"active":""}`,onClick:()=>Se("news"),children:"Xəbərlər"}),e.jsx("button",{className:`mode-btn ${se==="drivers"?"active":""}`,onClick:()=>Se("drivers"),children:"Sürücülər"}),e.jsx("button",{className:`mode-btn ${se==="videos"?"active":""}`,onClick:()=>Se("videos"),children:"Videolar"}),e.jsx("button",{className:`mode-btn ${se==="photos"?"active":""}`,onClick:()=>Se("photos"),children:"Fotolar"})]})]}),se==="news"?e.jsxs("div",{className:"editor-layout with-sidebar",children:[e.jsxs("aside",{className:"page-list",children:[e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Xəbərlər"}),e.jsx("button",{className:"add-section-btn",onClick:ni,children:e.jsx(ae,{size:16})})]}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 300px)"},children:Ha.length===0?e.jsx("div",{style:{padding:"2rem 1rem",textAlign:"center",color:"#94a3b8",fontSize:"0.875rem",border:"1px dashed #e2e8f0",borderRadius:"8px"},children:$e?"Axtarışa uyğun xəbər tapılmadı.":'Hələ heç bir xəbər yoxdur. Yeni xəbər yaratmaq üçün yuxarıdakı "+" düyməsini basın.'}):Ha.map(t=>e.jsxs("div",{className:"page-nav-wrapper",style:{position:"relative",marginBottom:"4px"},children:[e.jsxs("button",{className:`page-nav-item ${q===t.id?"active":""}`,onClick:()=>li(t.id),style:{width:"100%",paddingRight:"40px",textAlign:"left"},children:[e.jsx(bt,{size:14})," ",t.title,e.jsx("div",{style:{fontSize:"10px",color:"#999",marginLeft:"24px"},children:t.date})]}),e.jsx("button",{className:"delete-section-btn",onClick:a=>pi(t.id,a),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ff4d4f",opacity:.5,cursor:"pointer"},children:e.jsx(re,{size:14})})]},t.id))})]}),e.jsx("main",{className:"editor-canvas editor-canvas-flat",children:q!==null&&Y.id!==void 0?e.jsxs("div",{className:"editor-workspace",children:[e.jsxs("div",{className:"canvas-header canvas-header-block",children:[e.jsxs("h2",{style:{fontSize:"2rem",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(bt,{size:22})," Xəbəri Redaktə Et"]}),e.jsxs("p",{style:{color:"#64748b"},children:[Y.title," // ID: ",Y.id]})]}),e.jsxs("div",{className:"edit-grid grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"BAŞLIQ (AZ)"}),e.jsx("input",{type:"text",value:Y.title,onChange:t=>Ze("title",t.target.value,Y.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"TARİX"}),e.jsx("input",{type:"date",value:Y.date,onChange:t=>Ze("date",t.target.value,Y.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"KATEQORİYA"}),e.jsx("input",{type:"text",value:Y.category,onChange:t=>Ze("category",t.target.value,Y.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"VƏZİYYƏT"}),e.jsxs("select",{value:Y.status,onChange:t=>Ze("status",t.target.value,Y.id),children:[e.jsx("option",{value:"draft",children:"Qaralama"}),e.jsx("option",{value:"published",children:"Dərc edilib"})]})]}),e.jsxs("div",{className:"form-group full-span",children:[e.jsx("label",{children:"ŞƏKİL"}),e.jsx("div",{style:{width:"100%",height:"180px",borderRadius:"10px",overflow:"hidden",border:"1px solid #e2e8f0",background:"#f8fafc",marginBottom:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:Y.img?e.jsx("img",{src:Y.img,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("span",{style:{color:"#94a3b8",fontSize:"12px"},children:"Şəkil seçilməyib"})}),e.jsxs("div",{className:"input-row",children:[e.jsx("input",{type:"text",value:Y.img,onChange:t=>Ze("img",t.target.value,Y.id)}),e.jsx("input",{type:"file",id:"news-full-img",style:{display:"none"},onChange:async t=>{const a=t.target.files?.[0];if(a){const i=await Ve(a);i&&Ze("img",i,Y.id)}}}),e.jsx("button",{onClick:()=>document.getElementById("news-full-img")?.click(),className:"btn-secondary",children:"Yüklə"})]})]}),e.jsxs("div",{className:"form-group full-span",children:[e.jsx("label",{children:"MƏZMUN"}),e.jsx(Pt,{id:"news-full-desc",value:wt(Y.description||""),onChange:t=>Ze("description",t,Y.id)})]})]}),e.jsx("div",{className:"editor-savebar",children:e.jsx("button",{className:"btn-primary",onClick:la,children:"Yadda Saxla"})})]}):e.jsxs("div",{className:"editor-empty",children:[e.jsx(bt,{size:48,style:{opacity:.2}}),e.jsx("p",{children:"Redaktə etmək üçün sol tərəfdən xəbər seçin və ya yeni yaradın."})]})})]}):se==="events"?e.jsxs("div",{className:"editor-layout with-sidebar",children:[e.jsxs("aside",{className:"page-list",children:[e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Tədbirlər"}),e.jsx("button",{className:"add-section-btn",onClick:si,children:e.jsx(ae,{size:16})})]}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 300px)"},children:Ga.length===0?e.jsx("div",{style:{padding:"2rem 1rem",textAlign:"center",color:"#94a3b8",fontSize:"0.875rem",border:"1px dashed #e2e8f0",borderRadius:"8px"},children:$e?"Axtarışa uyğun tədbir tapılmadı.":'Hələ heç bir tədbir yoxdur. Yeni tədbir yaratmaq üçün yuxarıdakı "+" düyməsini basın.'}):Ga.map(t=>e.jsxs("div",{className:"page-nav-wrapper",style:{position:"relative",marginBottom:"4px"},children:[e.jsxs("button",{className:`page-nav-item ${Ue===t.id?"active":""}`,onClick:()=>ai(t.id),style:{width:"100%",paddingRight:"40px",textAlign:"left"},children:[e.jsx(Ft,{size:14})," ",t.title,e.jsx("div",{style:{fontSize:"10px",color:"#999",marginLeft:"24px"},children:t.date})]}),e.jsx("button",{className:"delete-section-btn",onClick:a=>ii(t.id,a),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ff4d4f",opacity:.5,cursor:"pointer"},children:e.jsx(re,{size:14})})]},t.id))})]}),e.jsx("main",{className:"editor-canvas editor-canvas-flat",children:Ue!==null&&Z.id!==void 0?e.jsxs("div",{className:"editor-workspace",children:[e.jsxs("div",{className:"canvas-header canvas-header-block",children:[e.jsxs("h2",{style:{fontSize:"2rem",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(Ft,{size:22})," Tədbiri Redaktə Et"]}),e.jsxs("p",{style:{color:"#64748b"},children:[Z.title," // ID: ",Z.id]})]}),e.jsxs("div",{className:"edit-grid grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"TƏDBİR ADI"}),e.jsx("input",{type:"text",value:Z.title,onChange:t=>je("title",t.target.value,Z.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"TARİX"}),e.jsx("input",{type:"date",value:Z.date,onChange:t=>je("date",t.target.value,Z.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"MƏKAN"}),e.jsx("input",{type:"text",value:Z.location,onChange:t=>je("location",t.target.value,Z.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"KATEQORİYA"}),e.jsx("input",{type:"text",value:Z.category,onChange:t=>je("category",t.target.value,Z.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"VƏZİYYƏT"}),e.jsxs("select",{value:Z.status,onChange:t=>je("status",t.target.value,Z.id),children:[e.jsx("option",{value:"planned",children:"Gələcək"}),e.jsx("option",{value:"past",children:"Keçmiş"})]})]}),e.jsxs("div",{className:"form-group full-span",children:[e.jsx("label",{children:"ŞƏKİL"}),e.jsx("div",{style:{width:"100%",height:"180px",borderRadius:"10px",overflow:"hidden",border:"1px solid #e2e8f0",background:"#f8fafc",marginBottom:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:Z.img?e.jsx("img",{src:Z.img,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("span",{style:{color:"#94a3b8",fontSize:"12px"},children:"Şəkil seçilməyib"})}),e.jsxs("div",{className:"input-row",children:[e.jsx("input",{type:"text",value:Z.img,onChange:t=>je("img",t.target.value,Z.id)}),e.jsx("input",{type:"file",id:"event-full-img",style:{display:"none"},onChange:async t=>{const a=t.target.files?.[0];if(a){const i=await Ve(a);i&&je("img",i,Z.id)}}}),e.jsx("button",{onClick:()=>document.getElementById("event-full-img")?.click(),className:"btn-secondary",children:"Yüklə"})]})]}),e.jsxs("div",{className:"form-group full-span",children:[e.jsx("label",{children:"TƏSVİR"}),e.jsx(Pt,{id:"event-full-desc",value:wt(Z.description||""),onChange:t=>je("description",t,Z.id)})]}),e.jsxs("div",{className:"form-group full-span",children:[e.jsx("label",{children:"PDF URL"}),e.jsxs("div",{className:"input-row",children:[e.jsx("input",{type:"text",value:Z.pdfUrl||"",onChange:t=>je("pdfUrl",t.target.value,Z.id),placeholder:"https://.../rules.pdf"}),e.jsx("input",{type:"file",id:"event-full-pdf",accept:".pdf,application/pdf",style:{display:"none"},onChange:async t=>{const a=t.target.files?.[0];if(!a)return;if(a.type!=="application/pdf"&&!a.name.toLowerCase().endsWith(".pdf")){E.error("Yalnız PDF faylı yüklənə bilər");return}const i=await ia(a,{loadingText:"PDF yüklənir...",successText:"PDF uğurla yükləndi",errorText:"PDF yüklənərkən xəta baş verdi"});i&&je("pdfUrl",i,Z.id),t.target.value=""}}),e.jsx("button",{type:"button",onClick:()=>document.getElementById("event-full-pdf")?.click(),className:"btn-secondary",children:"PDF Yüklə"})]})]}),e.jsxs("div",{className:"form-group full-span",children:[e.jsx("label",{children:"QAYDALAR"}),e.jsx(Pt,{id:"event-full-rules",value:wt(Z.rules||""),onChange:t=>je("rules",t,Z.id)})]})]}),e.jsx("div",{className:"editor-savebar",children:e.jsx("button",{className:"btn-primary",onClick:la,children:"Yadda Saxla"})})]}):e.jsxs("div",{className:"editor-empty",children:[e.jsx(Ft,{size:48,style:{opacity:.2}}),e.jsx("p",{children:"Redaktə etmək üçün sol tərəfdən tədbir seçin və ya yeni yaradın."})]})})]}):se==="drivers"?e.jsxs("div",{className:"editor-layout with-sidebar",children:[e.jsxs("aside",{className:"page-list",children:[e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Kateqoriyalar"}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("button",{className:"add-section-btn",onClick:bi,title:"Kateqoriya əlavə et",children:e.jsx(ae,{size:16})}),e.jsx("button",{className:"delete-section-btn",onClick:vi,title:"Seçilmiş kateqoriyanı sil",style:{background:"none",border:"none",color:"#ff4d4f",cursor:"pointer",padding:"4px"},children:e.jsx(re,{size:16})})]})]}),e.jsx("select",{value:ee||"",onChange:t=>xi(t.target.value),style:{width:"100%",padding:"10px",marginBottom:"1.5rem",borderRadius:"8px",border:"1px solid #e2e8f0",background:"white",fontWeight:"bold"},children:ge.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))}),ee&&e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"11px",fontWeight:800,color:"#64748b",textTransform:"uppercase"},children:"Kateqoriya adı"}),e.jsx("div",{style:{display:"flex",gap:"8px"},children:e.jsx("input",{type:"text",value:ge.find(t=>t.id===ee)?.name||"",onChange:t=>yi(t.target.value),placeholder:"Kateqoriya adı",style:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid #e2e8f0",background:"white",fontWeight:"bold"}})})]}),e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Sürücülər"}),e.jsx("button",{className:"add-section-btn",onClick:hi,children:e.jsx(ae,{size:16})})]}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 400px)"},children:ee&&(ge.find(t=>t.id===ee)?.drivers||[]).filter(t=>he(t.name,t.license,t.team,t.rank,t.points,t.wins)).length===0?e.jsx("div",{style:{padding:"2rem 1rem",textAlign:"center",color:"#94a3b8",fontSize:"0.875rem"},children:$e?"Axtarışa uyğun sürücü tapılmadı.":"Bu kateqoriyada sürücü yoxdur."}):(ge.find(t=>t.id===ee)?.drivers||[]).filter(t=>he(t.name,t.license,t.team,t.rank,t.points,t.wins)).map(t=>e.jsxs("div",{className:"page-nav-wrapper",style:{position:"relative",marginBottom:"4px"},children:[e.jsxs("button",{className:`page-nav-item ${et===t.id?"active":""}`,onClick:()=>mi(t.id),style:{width:"100%",paddingRight:"40px",textAlign:"left"},children:[e.jsxs("span",{style:{fontWeight:"900",color:"var(--primary)",marginRight:"8px"},children:["#",t.rank]})," ",t.name]}),e.jsx("button",{className:"delete-section-btn",onClick:a=>{a.stopPropagation(),fi(t.id)},style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ff4d4f",opacity:.5,cursor:"pointer"},children:e.jsx(re,{size:14})})]},t.id))})]}),e.jsx("main",{className:"editor-canvas editor-canvas-flat",children:et!==null&&me.id!==void 0?e.jsxs("div",{className:"editor-workspace",children:[e.jsxs("div",{className:"canvas-header canvas-header-block",children:[e.jsx("h2",{style:{fontSize:"2rem"},children:me.name}),e.jsxs("p",{style:{color:"#64748b"},children:[ge.find(t=>t.id===ee)?.name," // RANK #",me.rank]})]}),e.jsxs("div",{className:"edit-grid grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"SÜRÜCÜNÜN ADI VƏ SOYADI"}),e.jsx("input",{type:"text",value:me.name,onChange:t=>We("name",t.target.value),placeholder:"Məs: Əli Məmmədov",style:{width:"100%",padding:"14px",border:"2px solid #e2e8f0",borderRadius:"12px",fontSize:"16px",fontWeight:"bold"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"YARIŞ SIRALAMASI (RANK)"}),e.jsx("input",{type:"number",value:me.rank,readOnly:!0,style:{width:"100%",padding:"14px",border:"2px solid #e2e8f0",borderRadius:"12px",fontSize:"16px",background:"#f8fafc",color:"#94a3b8",cursor:"not-allowed"}}),e.jsx("p",{style:{fontSize:"11px",color:"#3b82f6",marginTop:"6px",fontWeight:"bold"},children:"ℹ️ Bu sıra ballara görə avtomatik hesablanır"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"PİLOT LİSENZİYASI"}),e.jsx("input",{type:"text",value:me.license,onChange:t=>We("license",t.target.value),placeholder:"Məs: A-SİNFİ",style:{width:"100%",padding:"14px",border:"2px solid #e2e8f0",borderRadius:"12px",fontSize:"15px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"TƏMSİL ETDİYİ KOMANDA"}),e.jsx("input",{type:"text",value:me.team,onChange:t=>We("team",t.target.value),placeholder:"Məs: FORSAJ RACING",style:{width:"100%",padding:"14px",border:"2px solid #e2e8f0",borderRadius:"12px",fontSize:"15px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"QALİBİYYƏT (WINS)"}),e.jsx("input",{type:"number",value:me.wins,onChange:t=>We("wins",parseInt(t.target.value)),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"XAL (POINTS)"}),e.jsx("input",{type:"number",value:me.points,onChange:t=>We("points",parseInt(t.target.value)),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),e.jsxs("div",{className:"form-group full-span",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"PİLOT ŞƏKLİ"}),e.jsxs("div",{className:"input-row",children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",overflow:"hidden",background:"#f1f5f9",border:"2px solid var(--primary)"},children:me.img?e.jsx("img",{src:me.img,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Te,{size:24,style:{opacity:.2}})})}),e.jsxs("div",{className:"input-row",style:{flex:1},children:[e.jsx("input",{type:"text",value:me.img||"",onChange:t=>We("img",t.target.value),placeholder:"Şəkil URL və ya yol...",style:{flex:1,padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),e.jsx("input",{type:"file",id:"driver-img-upload",style:{display:"none"},accept:"image/*",onChange:async t=>{const a=t.target.files?.[0];if(a){const i=await Ve(a);i&&We("img",i)}}}),e.jsx("button",{onClick:()=>document.getElementById("driver-img-upload")?.click(),style:{background:"#f1f5f9",border:"1px solid #e2e8f0",padding:"12px",borderRadius:"8px",cursor:"pointer"},children:"Yüklə"})]})]})]})]}),e.jsx("div",{className:"editor-savebar",children:e.jsx("button",{className:"btn-primary",onClick:gi,disabled:v,children:v?"Gözləyin...":"Sürücünü Yadda Saxla"})})]}):e.jsxs("div",{className:"editor-empty",children:[e.jsx(gt,{size:48,style:{opacity:.2}}),e.jsx("p",{children:"Redaktə etmək üçün sol tərəfdən sürücü seçin."})]})})]}):se==="videos"?e.jsxs("div",{className:"editor-layout with-sidebar",children:[e.jsxs("aside",{className:"page-list",children:[e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Videolar"}),e.jsx("button",{className:"add-section-btn",onClick:ci,children:e.jsx(ae,{size:16})})]}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 300px)"},children:Qa.length===0?e.jsx("div",{style:{padding:"2rem 1rem",textAlign:"center",color:"#94a3b8",fontSize:"0.875rem"},children:$e?"Axtarışa uyğun video tapılmadı.":"Heç bir video əlavə edilməyib."}):Qa.map(t=>e.jsxs("div",{className:"page-nav-wrapper",style:{position:"relative",marginBottom:"4px"},children:[e.jsxs("button",{className:`page-nav-item ${ot===t.id?"active":""}`,onClick:()=>Pa(t.id),style:{width:"100%",paddingRight:"40px",textAlign:"left",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"24px",height:"16px",background:"#333",borderRadius:"2px",overflow:"hidden"},children:t.thumbnail&&e.jsx("img",{src:t.thumbnail,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})}),e.jsx("span",{style:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.title})]}),e.jsx("button",{className:"delete-section-btn",onClick:a=>{a.stopPropagation(),ui(t.id,a)},style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ff4d4f",opacity:.5,cursor:"pointer"},children:e.jsx(re,{size:14})})]},t.id))})]}),e.jsx("main",{className:"editor-canvas editor-canvas-flat",children:ot!==null&&fe.id!==void 0?e.jsxs("div",{className:"editor-workspace",children:[e.jsxs("div",{className:"canvas-header canvas-header-block",children:[e.jsx("h2",{style:{fontSize:"2rem"},children:"Video Redaktəsi"}),e.jsxs("p",{style:{color:"#64748b"},children:[fe.title," // ID: ",fe.id]})]}),e.jsxs("div",{className:"edit-grid grid-1",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"VİDEO BAŞLIĞI"}),e.jsx("input",{type:"text",value:fe.title,onChange:t=>It("title",t.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"16px",fontWeight:"bold"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"YOUTUBE URL"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(ye,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#94a3b8"}}),e.jsx("input",{type:"text",value:fe.youtubeUrl,onChange:t=>It("youtubeUrl",t.target.value),placeholder:"https://www.youtube.com/watch?v=...",style:{width:"100%",padding:"12px 12px 12px 40px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),e.jsx("p",{style:{fontSize:"11px",color:"#64748b",marginTop:"6px"},children:"YouTube linkini daxil etdikdə şəkil və ID avtomatik təyin olunacaq."})]}),e.jsxs("div",{className:"edit-grid grid-2-compact",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"MÜDDƏT (MƏS: 05:20)"}),e.jsx("input",{type:"text",value:fe.duration,onChange:t=>It("duration",t.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"VİDEO ID (AVTOMATİK)"}),e.jsx("input",{type:"text",value:fe.videoId,readOnly:!0,style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#94a3b8"}})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"YARADILMA TARİXİ"}),e.jsx("input",{type:"text",value:fe.created_at||"",onChange:t=>It("created_at",t.target.value),placeholder:"2026-02-16T10:30:00.000Z",style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"ÖNİZLƏMƏ (THUMBNAIL)"}),e.jsxs("div",{style:{width:"100%",aspectRatio:"16/9",borderRadius:"12px",overflow:"hidden",background:"#000",border:"1px solid #e2e8f0",position:"relative"},children:[fe.thumbnail?e.jsx("img",{src:fe.thumbnail,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"1rem"},children:[e.jsx(ma,{size:48,style:{opacity:.1,color:"white"}}),e.jsx("p",{style:{color:"#64748b",fontSize:"12px"},children:"YouTube linki daxil edin"})]}),fe.videoId&&e.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.3)",cursor:"pointer"},onClick:()=>window.open(fe.youtubeUrl,"_blank"),children:e.jsx("div",{style:{background:"#FF4D00",color:"white",padding:"12px",borderRadius:"50%",boxShadow:"0 0 20px rgba(255,77,0,0.4)"},children:e.jsx(Gi,{size:24,fill:"currentColor"})})})]})]})]})]}):e.jsxs("div",{className:"editor-empty",children:[e.jsx(ma,{size:48,style:{opacity:.2}}),e.jsx("p",{children:"Redaktə etmək üçün sol tərəfdən video seçin və ya yeni əlavə edin."})]})})]}):se==="photos"?e.jsxs("div",{className:"editor-layout with-sidebar",children:[e.jsxs("aside",{className:"page-list",children:[e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Foto Arxiv"}),e.jsx("button",{className:"add-section-btn",onClick:ri,title:"Yeni şəkil əlavə et",children:e.jsx(ae,{size:16})})]}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 200px)"},children:Va.length===0?e.jsx("p",{style:{padding:"20px",color:"#94a3b8",textAlign:"center",fontSize:"13px"},children:$e?"Axtarışa uyğun şəkil tapılmadı.":"Şəkil yoxdur"}):Va.map(t=>e.jsxs("div",{className:"page-nav-wrapper",style:{position:"relative",marginBottom:"4px"},children:[e.jsxs("button",{className:`page-nav-item ${dt===t.id?"active":""}`,onClick:()=>Fa(t.id),style:{width:"100%",paddingRight:"40px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"4px",overflow:"hidden",flexShrink:0,background:"#eee"},children:t.url?e.jsx("img",{src:t.url,style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx(Te,{size:12,style:{margin:"6px",opacity:.3}})}),e.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.title})]}),e.jsx("button",{className:"delete-section-btn",onClick:a=>oi(t.id,a),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ff4d4f",opacity:.5,cursor:"pointer"},children:e.jsx(re,{size:14})})]},t.id))})]}),e.jsx("main",{className:"editor-canvas editor-canvas-flat",children:dt!==null&&Qe.id!==void 0?e.jsxs("div",{className:"editor-workspace",children:[e.jsxs("div",{className:"canvas-header canvas-header-block",children:[e.jsx("h2",{style:{fontSize:"2rem"},children:"Şəkil Redaktəsi"}),e.jsxs("p",{style:{color:"#64748b"},children:[Qe.title," // ID: ",Qe.id]})]}),e.jsxs("div",{className:"edit-grid grid-1",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"ŞƏKİL BAŞLIĞI"}),e.jsx("input",{type:"text",value:Qe.title,onChange:t=>na("title",t.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"16px",fontWeight:"bold"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"FOTO"}),e.jsxs("div",{style:{width:"100%",minHeight:"300px",borderRadius:"12px",overflow:"hidden",background:"#f8fafc",border:"1px dashed #cbd5e1",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"1rem"},children:[Qe.url?e.jsx("img",{src:Qe.url,alt:"",style:{maxWidth:"100%",maxHeight:"400px",objectFit:"contain"}}):e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"1rem"},children:[e.jsx(Te,{size:48,style:{opacity:.1}}),e.jsx("p",{style:{color:"#64748b",fontSize:"12px"},children:"Şəkil seçilməyib"})]}),e.jsxs("div",{style:{marginTop:"1rem",display:"flex",gap:"1rem"},children:[e.jsx("input",{type:"file",id:"gallery-photo-upload",style:{display:"none"},accept:"image/*",onChange:di}),e.jsxs("button",{onClick:()=>document.getElementById("gallery-photo-upload")?.click(),className:"btn-primary",style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(ae,{size:18})," Şəkil Yüklə"]}),e.jsx("input",{type:"text",value:Qe.url||"",onChange:t=>na("url",t.target.value),placeholder:"URL və ya yol...",style:{padding:"10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px",width:"250px"}})]})]})]})]})]}):e.jsxs("div",{className:"editor-empty",children:[e.jsx(Te,{size:48,style:{opacity:.2}}),e.jsx("p",{children:"Redaktə etmək üçün sol tərəfdən şəkil seçin və ya yeni əlavə edin."})]})})]}):e.jsx("div",{className:"editor-layout",children:e.jsx("main",{className:"editor-canvas",style:{width:"100%"},children:ji?e.jsxs("div",{className:"edit-fields",style:{width:"100%"},children:[Fe==="home"&&e.jsx("div",{className:"canvas-header",children:e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:800,color:"var(--text-main)"},children:"Ana Səhifə Blokları"})}),Fe==="abouttab"&&e.jsx("div",{className:"canvas-header",children:e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:800,color:"var(--text-main)"},children:"HAQQIMIZDA"})}),Ya.map(({page:t,pageIdx:a})=>{const i=t.id==="marquee",n=i&&!!pe[t.id],o=(t.sections||[]).filter(r=>hs(r)||t.id==="about"&&Je(r.id)||t.id==="rulespage"&&ca.test(r.id)||t.id==="rulespage"&&r.id.startsWith("RULES_")?!1:he(r.id,r.label,r.value,r.url)).sort((r,u)=>ce(r.order,0)-ce(u.order,0)),p=(t.images||[]).filter(r=>he(r.id,r.alt,r.path)).sort((r,u)=>ce(r.order,0)-ce(u.order,0)),g=t.id==="about"?(()=>{const r=new Map;return(t.sections||[]).forEach(u=>{if(!Je(u.id))return;const B=ms(u.id)||u.id,F=r.get(B)||{label:"",value:""};u.id.startsWith(ze)&&(F.label=u.value||""),u.id.startsWith(we)&&(F.value=u.value||""),r.set(B,F)}),Array.from(r.entries()).sort(([u],[B])=>u.localeCompare(B,void 0,{numeric:!0})).map(([u,B])=>({suffix:u,...B})).filter(u=>he(u.suffix,u.label,u.value))})():[],h=t.id==="rulespage"?Ee(t).filter(r=>he(r.id,r.title,r.icon,r.docName,r.docButton,r.docUrl,...(r.items||[]).flatMap(u=>[u.title,u.desc]))):[];return $e&&o.length===0&&p.length===0&&g.length===0&&h.length===0?null:e.jsxs("div",{className:"field-group",children:[e.jsx("div",{className:"canvas-header",children:e.jsx("h2",{style:{fontSize:"1.05rem",fontWeight:800,color:"var(--text-main)"},children:ua[t.id]||t.title})}),i&&e.jsxs("div",{className:"marquee-control-panel",children:[e.jsxs("div",{className:"marquee-control-item",children:[e.jsxs("div",{className:"marquee-control-copy",children:[e.jsx("div",{className:"marquee-control-title",children:"Marquee aktivdir"}),e.jsx("div",{className:"marquee-control-desc",children:"Frontenddə sürüşən yazı göstərilsin"})]}),e.jsxs("label",{className:"marquee-switch","aria-label":"Marquee aktivdir",children:[e.jsx("input",{type:"checkbox",checked:t.active!==!1,onChange:r=>{const u=[...s];u[a]&&(u[a].active=r.target.checked,l(u))}}),e.jsx("span",{className:"marquee-switch-slider"})]})]}),e.jsxs("div",{className:"marquee-control-item",children:[e.jsxs("div",{className:"marquee-control-copy",children:[e.jsx("div",{className:"marquee-control-title",children:"Paneldə gizlə"}),e.jsx("div",{className:"marquee-control-desc",children:"Bu kartı editorda daralt və yadda saxla"})]}),e.jsxs("label",{className:"marquee-switch","aria-label":"Paneldə gizlə",children:[e.jsx("input",{type:"checkbox",checked:n,onChange:r=>{Qt(u=>({...u,[t.id]:r.target.checked}))}}),e.jsx("span",{className:"marquee-switch-slider"})]})]})]}),(t.id!=="marquee"||!n)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.9rem"},children:[t.id==="about"&&e.jsxs("div",{className:"field-item-wrapper",style:{position:"relative",background:"#fcfcfd",padding:"1rem",borderRadius:"12px",border:"1px solid #f0f0f2"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b",fontWeight:800},children:"Statistikalar"}),e.jsxs("button",{type:"button",className:"add-field-minimal",onClick:()=>aa(a),children:[e.jsx(ae,{size:14})," Yeni Statistika"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:g.map(r=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 180px auto",gap:"8px",alignItems:"center"},children:[e.jsx("input",{type:"text",value:r.label,onChange:u=>Nt(r.suffix,"label",u.target.value,a),placeholder:"Statistika adı",style:{padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px",fontWeight:700}}),e.jsx("input",{type:"text",value:r.value,onChange:u=>Nt(r.suffix,"value",u.target.value,a),placeholder:"Dəyər",style:{padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px",fontWeight:700}}),e.jsx("button",{type:"button",onClick:()=>Ia(r.suffix,a),style:{background:"#fff",border:"1px solid #fee2e2",color:"#ef4444",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(re,{size:14})})]},r.suffix))})]}),t.id==="rulespage"&&e.jsxs("div",{className:"field-item-wrapper",style:{position:"relative",background:"#fcfcfd",padding:"1rem",borderRadius:"12px",border:"1px solid #f0f0f2"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b",fontWeight:800},children:"Qaydalar Sekmələri"}),e.jsxs("button",{type:"button",className:"add-field-minimal",onClick:()=>_a(a),children:[e.jsx(ae,{size:14})," Yeni Sekmə"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:h.map((r,u)=>{const B=u>0,F=u<h.length-1;return e.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"10px",padding:"10px",background:"#fff"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 180px 160px auto",gap:"8px",marginBottom:"8px",alignItems:"center"},children:[e.jsx("input",{type:"text",value:r.title,onChange:w=>be(u,"title",w.target.value,a),placeholder:"Sekmə başlığı",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px",fontWeight:700}}),e.jsx("input",{type:"text",value:r.id,onChange:w=>be(u,"id",w.target.value,a),placeholder:"Sekmə ID",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),e.jsx("select",{value:r.icon,onChange:w=>be(u,"icon",w.target.value,a),style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"},children:oa.map(w=>e.jsx("option",{value:w,children:w},w))}),e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[e.jsx("button",{type:"button",title:"Yuxarı",onClick:()=>Lt(u,"up",a),disabled:!B,style:{width:"30px",height:"30px",border:"1px solid #e2e8f0",background:"#fff",borderRadius:"8px",color:B?"#334155":"#cbd5e1"},children:e.jsx(mt,{size:14})}),e.jsx("button",{type:"button",title:"Aşağı",onClick:()=>Lt(u,"down",a),disabled:!F,style:{width:"30px",height:"30px",border:"1px solid #e2e8f0",background:"#fff",borderRadius:"8px",color:F?"#334155":"#cbd5e1"},children:e.jsx(ht,{size:14})}),e.jsx("button",{type:"button",title:"Sekməni sil",onClick:()=>Da(u,a),style:{width:"30px",height:"30px",border:"1px solid #fee2e2",background:"#fff",borderRadius:"8px",color:"#ef4444"},children:e.jsx(re,{size:14})})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 180px",gap:"8px",marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:r.docName||"",onChange:w=>be(u,"docName",w.target.value,a),placeholder:"Sənəd adı (Məs: PILOT_PROTOKOLU.PDF)",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),e.jsx("input",{type:"text",value:r.docButton||"",onChange:w=>be(u,"docButton",w.target.value,a),placeholder:"Düymə mətni (Məs: PDF YÜKLƏ)",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsx(ye,{size:14,style:{color:"#94a3b8"}}),e.jsx("input",{type:"text",value:r.docUrl||"",onChange:w=>be(u,"docUrl",w.target.value,a),placeholder:"Sənəd linki (Məs: /uploads/pilot.pdf və ya https://...)",style:{width:"100%",padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),e.jsx("input",{id:`rules-doc-upload-${a}-${u}`,type:"file",accept:".pdf,application/pdf",style:{display:"none"},onChange:async w=>{const K=w.target.files?.[0];K&&(await wa(K,u,a),w.target.value="")}}),e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>document.getElementById(`rules-doc-upload-${a}-${u}`)?.click(),children:"PDF Yüklə"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[(r.items||[]).map((w,K)=>e.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"8px",padding:"8px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"8px",marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:w.title,onChange:te=>Ct(u,K,"title",te.target.value,a),placeholder:"Maddə başlığı",style:{padding:"8px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px",fontWeight:700}}),e.jsx("button",{type:"button",title:"Maddəni sil",onClick:()=>Ba(u,K,a),style:{width:"30px",height:"30px",border:"1px solid #fee2e2",background:"#fff",borderRadius:"8px",color:"#ef4444"},children:e.jsx(re,{size:14})})]}),e.jsx("textarea",{rows:3,value:w.desc,onChange:te=>Ct(u,K,"desc",te.target.value,a),placeholder:"Maddə təsviri",style:{width:"100%",padding:"8px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px",lineHeight:1.4,resize:"vertical"}})]},`rules-tab-item-group-${r.index}-${w.index}`)),e.jsxs("button",{type:"button",className:"add-field-minimal",onClick:()=>Ma(u,a),children:[e.jsx(ae,{size:14})," Maddə Əlavə Et"]})]})]},`rules-tab-group-${r.index}-${r.id}`)})})]}),o.map((r,u)=>ra(r,u,a,t))]}),e.jsxs("div",{style:{marginTop:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b",fontWeight:700},children:"Şəkillər"}),e.jsxs("button",{type:"button",className:"add-field-minimal",onClick:()=>{const r=[...s],u=r[a];u&&(u.images.push({id:`img-${u.images.length}-${Date.now()}`,path:"",alt:"",type:"local",order:u.images.length}),l(r))},children:[e.jsx(ae,{size:14})," Yeni Şəkil"]})]}),e.jsxs("div",{className:"images-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))",gap:"1rem"},children:[p.length===0&&e.jsx("div",{className:"empty-fields-tip",style:{gridColumn:"1/-1",textAlign:"center",padding:"1rem",border:"1px dashed #cbd5e1",borderRadius:"10px",color:"#64748b"},children:"Bu bölmədə şəkil yoxdur."}),p.map(r=>e.jsxs("div",{className:"image-edit-card",style:{border:"1px solid #eee",borderRadius:"12px",padding:"0.75rem",background:"#fff"},children:[e.jsx("div",{style:{height:"120px",background:"#f8fafc",borderRadius:"8px",marginBottom:"8px",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:r.path?e.jsx("img",{src:r.path,alt:r.alt||r.id,style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("span",{style:{fontSize:"11px",color:"#94a3b8"},children:"Önizləmə yoxdur"})}),e.jsx("input",{type:"text",value:r.path,placeholder:"Tam şəkil linki",onChange:u=>{const B=[...s],F=B[a];if(!F)return;const w=F.images.findIndex(K=>K.id===r.id);w!==-1&&(F.images[w].path=u.target.value,l(B))},style:{width:"100%",fontSize:"12px",padding:"8px 10px",border:"1px solid #e2e8f0",borderRadius:"6px",marginBottom:"8px"}}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"},children:[e.jsx("input",{id:`group-file-up-${t.id}-${r.id}`,type:"file",accept:"image/*",style:{display:"none"},onChange:async u=>{const B=u.target.files?.[0];if(!B)return;const F=await Ve(B);if(!F)return;const w=[...s],K=w[a];if(!K)return;const te=K.images.findIndex(De=>De.id===r.id);te!==-1&&(K.images[te].path=F,K.images[te].type="local",l(w))}}),e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>document.getElementById(`group-file-up-${t.id}-${r.id}`)?.click(),style:{fontSize:"11px",padding:"6px 10px"},children:"Fayldan yüklə"}),e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>za(a,r.id),style:{fontSize:"11px",padding:"6px 10px"},children:"Kitabxanadan seç"})]}),e.jsx("input",{type:"text",value:r.alt,placeholder:"Alt mətni",onChange:u=>Ra(a,r.id,u.target.value),style:{width:"100%",fontSize:"12px",padding:"8px 10px",border:"1px solid #e2e8f0",borderRadius:"6px"}})]},`${t.id}-${r.id}`))]})]})]}),n&&e.jsx("div",{className:"empty-fields-tip",style:{textAlign:"center",padding:"1rem",border:"1px dashed #cbd5e1",borderRadius:"10px",color:"#64748b"},children:"Marquee bölməsi paneldə gizlədildi. Yuxarıdakı checkbox ilə geri aça bilərsiniz."})]},t.id)})]}):G?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"canvas-header",children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:800,color:"var(--text-main)"},children:ua[G.id]||G.title}),e.jsxs("div",{className:"canvas-actions",children:[G.id==="about"&&e.jsxs("button",{className:"add-field-minimal",onClick:()=>aa(),style:{background:"#f5f3ff",color:"#7c3aed",border:"1px solid #ddd6fe"},children:[e.jsx(gt,{size:14})," Statistika Əlavə Et"]}),(G.id==="about"||G.id==="values")&&e.jsxs("button",{className:"add-field-minimal",onClick:()=>Gs(),style:{background:"#f0fdf4",color:"#16a34a",border:"1px solid #bbf7d0"},children:[e.jsx(ae,{size:14})," Yeni Dəyər Əlavə Et"]}),e.jsx("div",{style:{width:"1px",height:"24px",background:"#e2e8f0",margin:"0 4px"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"#f8fafc",padding:"4px 12px",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:800,color:"#64748b"},children:"VƏZİYYƏT:"}),e.jsx("button",{onClick:()=>{const t=[...s];t[d].active=G?.active===!1,l(t),E.success(t[d].active?"Bölmə aktivləşdirildi":"Bölmə deaktiv edildi")},style:{width:"36px",height:"18px",borderRadius:"9px",background:G?.active!==!1?"#10b981":"#cbd5e1",position:"relative",cursor:"pointer",border:"none",transition:"background 0.3s"},children:e.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:"white",position:"absolute",top:"2px",left:G?.active!==!1?"20px":"2px",transition:"left 0.3s"}})})]})]})]}),e.jsxs("div",{className:"edit-fields",children:[G.id==="about"&&e.jsxs("div",{className:"field-group",children:[e.jsxs("div",{className:"field-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("label",{children:[e.jsx(gt,{size:16})," Statistikalar"]}),e.jsxs("button",{className:"add-field-minimal",onClick:()=>aa(),children:[e.jsx(ae,{size:14})," Yeni Statistika"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:Ka.length>0?Ka.map(t=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 180px auto",gap:"8px",alignItems:"center",padding:"10px",border:"1px solid #e2e8f0",borderRadius:"10px",background:"#fff"},children:[e.jsx("input",{type:"text",value:t.label,onChange:a=>Nt(t.suffix,"label",a.target.value),placeholder:"Statistika adı (Məs: PİLOTLAR)",style:{padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px",fontWeight:700}}),e.jsx("input",{type:"text",value:t.value,onChange:a=>Nt(t.suffix,"value",a.target.value),placeholder:"Dəyər (Məs: 140+)",style:{padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px",fontWeight:700}}),e.jsx("button",{onClick:()=>Ia(t.suffix),title:"Statistikanı sil",style:{background:"#fff",border:"1px solid #fee2e2",color:"#ef4444",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(re,{size:14})})]},t.suffix)):e.jsx("div",{style:{padding:"1rem",border:"1px dashed #cbd5e1",borderRadius:"8px",color:"#64748b",fontSize:"13px"},children:Q?"Axtarışa uyğun statistika tapılmadı.":'Hələ statistika yoxdur. "Yeni Statistika" ilə əlavə edin.'})})]}),G.id==="partners"&&e.jsxs("div",{className:"field-group",children:[e.jsxs("div",{className:"field-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("label",{children:[e.jsx(gt,{size:16})," Tərəfdaş Kartları"]}),e.jsxs("button",{className:"add-field-minimal",onClick:Qs,children:[e.jsx(ae,{size:14})," Tərəfdaş Əlavə Et"]})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",color:"#64748b",marginBottom:"6px",fontWeight:700},children:"Bölmə Başlığı"}),e.jsx("input",{type:"text",value:G.sections.find(t=>t.id==="SECTION_TITLE")?.value||"",onChange:t=>_e(d,"SECTION_TITLE","value",t.target.value),style:{width:"100%",padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px",fontWeight:700}})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:$a.map((t,a)=>{const i=a>0,n=a<$a.length-1;return e.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"10px",padding:"12px",background:"#fff"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 200px auto",gap:"8px",marginBottom:"8px",alignItems:"center"},children:[e.jsx("input",{type:"text",value:t.name,onChange:o=>xt(t.index,"name",o.target.value),placeholder:"Tərəfdaş adı",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),e.jsx("input",{type:"text",value:t.tag,onChange:o=>xt(t.index,"tag",o.target.value),placeholder:"Etiket",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),e.jsx("input",{type:"text",value:t.icon,onChange:o=>xt(t.index,"icon",o.target.value),placeholder:"ShieldCheck / Truck / Globe / Zap",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[e.jsx("button",{title:"Yuxarı",onClick:()=>ka(t.index,"up"),disabled:!i,style:{width:"30px",height:"30px",border:"1px solid #e2e8f0",background:"#fff",borderRadius:"8px",color:i?"#334155":"#cbd5e1"},children:e.jsx(mt,{size:14})}),e.jsx("button",{title:"Aşağı",onClick:()=>ka(t.index,"down"),disabled:!n,style:{width:"30px",height:"30px",border:"1px solid #e2e8f0",background:"#fff",borderRadius:"8px",color:n?"#334155":"#cbd5e1"},children:e.jsx(ht,{size:14})}),e.jsx("button",{title:"Sil",onClick:()=>Vs(t.index),style:{width:"30px",height:"30px",border:"1px solid #fee2e2",background:"#fff",borderRadius:"8px",color:"#ef4444"},children:e.jsx(re,{size:14})})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"170px 1fr",gap:"8px",alignItems:"center"},children:[e.jsxs("select",{value:t.useImage,onChange:o=>xt(t.index,"useImage",o.target.value),style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"},children:[e.jsx("option",{value:"false",children:"İkon istifadə et"}),e.jsx("option",{value:"true",children:"Görsel istifadə et"})]}),e.jsx("input",{type:"text",value:t.imageId,onChange:o=>xt(t.index,"imageId",o.target.value),placeholder:"Görsel ID (Məs: partner-image-1)",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}})]})]},t.index)})})]}),G.id==="rulespage"&&e.jsxs("div",{className:"field-group",children:[e.jsxs("div",{className:"field-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("label",{children:[e.jsx(Kt,{size:16})," Qaydalar Sekmələri"]}),e.jsxs("button",{className:"add-field-minimal",onClick:()=>_a(),children:[e.jsx(ae,{size:14})," Yeni Sekmə"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:qa.map((t,a)=>{const i=a>0,n=a<qa.length-1;return e.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"10px",padding:"12px",background:"#fff"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 200px 170px auto",gap:"8px",marginBottom:"8px",alignItems:"center"},children:[e.jsx("input",{type:"text",value:t.title,onChange:o=>be(a,"title",o.target.value),placeholder:"Sekmə başlığı",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px",fontWeight:700}}),e.jsx("input",{type:"text",value:t.id,onChange:o=>be(a,"id",o.target.value),placeholder:"Sekmə ID",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),e.jsx("select",{value:t.icon,onChange:o=>be(a,"icon",o.target.value),style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"},children:oa.map(o=>e.jsx("option",{value:o,children:o},o))}),e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[e.jsx("button",{title:"Yuxarı",onClick:()=>Lt(a,"up"),disabled:!i,style:{width:"30px",height:"30px",border:"1px solid #e2e8f0",background:"#fff",borderRadius:"8px",color:i?"#334155":"#cbd5e1"},children:e.jsx(mt,{size:14})}),e.jsx("button",{title:"Aşağı",onClick:()=>Lt(a,"down"),disabled:!n,style:{width:"30px",height:"30px",border:"1px solid #e2e8f0",background:"#fff",borderRadius:"8px",color:n?"#334155":"#cbd5e1"},children:e.jsx(ht,{size:14})}),e.jsx("button",{title:"Sekməni sil",onClick:()=>Da(a),style:{width:"30px",height:"30px",border:"1px solid #fee2e2",background:"#fff",borderRadius:"8px",color:"#ef4444"},children:e.jsx(re,{size:14})})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 180px",gap:"8px",marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:t.docName||"",onChange:o=>be(a,"docName",o.target.value),placeholder:"Sənəd adı (Məs: PILOT_PROTOKOLU.PDF)",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),e.jsx("input",{type:"text",value:t.docButton||"",onChange:o=>be(a,"docButton",o.target.value),placeholder:"Düymə mətni (Məs: PDF YÜKLƏ)",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsx(ye,{size:14,style:{color:"#94a3b8"}}),e.jsx("input",{type:"text",value:t.docUrl||"",onChange:o=>be(a,"docUrl",o.target.value),placeholder:"Sənəd linki (Məs: /uploads/pilot.pdf və ya https://...)",style:{width:"100%",padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),e.jsx("input",{id:`rules-doc-upload-current-${a}`,type:"file",accept:".pdf,application/pdf",style:{display:"none"},onChange:async o=>{const p=o.target.files?.[0];p&&(await wa(p,a),o.target.value="")}}),e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>document.getElementById(`rules-doc-upload-current-${a}`)?.click(),children:"PDF Yüklə"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[(t.items||[]).map((o,p)=>e.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"8px",padding:"8px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"8px",marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:o.title,onChange:g=>Ct(a,p,"title",g.target.value),placeholder:"Maddə başlığı",style:{padding:"8px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px",fontWeight:700}}),e.jsx("button",{title:"Maddəni sil",onClick:()=>Ba(a,p),style:{width:"30px",height:"30px",border:"1px solid #fee2e2",background:"#fff",borderRadius:"8px",color:"#ef4444"},children:e.jsx(re,{size:14})})]}),e.jsx("textarea",{rows:3,value:o.desc,onChange:g=>Ct(a,p,"desc",g.target.value),placeholder:"Maddə təsviri",style:{width:"100%",padding:"8px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px",lineHeight:1.4,resize:"vertical"}})]},`rules-item-${t.index}-${o.index}`)),e.jsxs("button",{className:"add-field-minimal",onClick:()=>Ma(a),children:[e.jsx(ae,{size:14})," Maddə Əlavə Et"]})]})]},`rules-tab-${t.index}-${t.id}`)})})]}),G.id!=="rulespage"&&e.jsxs("div",{className:"field-group",children:[e.jsxs("div",{className:"field-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("label",{children:[e.jsx(Ls,{size:16})," Mətn Sahələri"]}),e.jsxs("button",{className:"add-field-minimal",onClick:()=>La("text"),children:[e.jsx(ae,{size:14})," Mətn Əlavə Et"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:kt.length===0&&Q?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#94a3b8",fontSize:"0.9rem",border:"1px dashed #e2e8f0",borderRadius:"8px"},children:"Bu səhifədə sorğuya uyğun mətn tapılmadı."}):G?.id==="contactpage"?Ti.map(t=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",border:"1px solid #e2e8f0",borderRadius:"12px",background:"#f8fafc",padding:"12px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"3px",padding:"4px 2px 8px 2px",borderBottom:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#334155",fontWeight:900,textTransform:"uppercase"},children:t.title}),e.jsx("div",{style:{fontSize:"11px",color:"#64748b",fontWeight:600},children:t.subtitle})]}),t.sections.map((a,i)=>ra(a,i))]},t.title)):kt.map((t,a)=>ra(t,a))})]}),e.jsxs("div",{className:"field-group",children:[e.jsxs("div",{className:"field-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("label",{children:[e.jsx(Te,{size:16})," Bölmədəki Şəkillər"]}),e.jsxs("button",{className:"add-field-minimal",onClick:()=>La("image"),children:[e.jsx(ae,{size:14})," Yeni Şəkil Yeri"]})]}),Ot.length>0&&e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:800,color:"#64748b",marginBottom:"8px"},children:"Komponent Daxili Önizləmə (Sıra ilə)"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(160px, 1fr))",gap:"10px"},children:Ot.map((t,a)=>e.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"10px",overflow:"hidden",background:"#fff"},children:[e.jsx("div",{style:{height:"84px",background:"#f8fafc"},children:t.path?e.jsx("img",{src:t.path,alt:t.alt||`Preview ${a+1}`,style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"#94a3b8",fontSize:"11px"},children:"Şəkil yoxdur"})}),e.jsxs("div",{style:{padding:"6px 8px",fontSize:"10px",color:"#475569",fontWeight:700},children:["#",a+1," • ",t.id]})]},`preview-${t.id}`))})]}),e.jsx("div",{className:"images-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))",gap:"1.5rem"},children:Ot.length>0?Ot.map((t,a)=>{const i=G?.images||[],n=i.findIndex(g=>g.id===t.id),o=n>0,p=n>=0&&n<i.length-1;return e.jsxs("div",{className:"image-edit-card",style:{border:"1px solid #eee",borderRadius:"12px",overflow:"hidden",background:"#fff",position:"relative"},children:[e.jsx("button",{className:"field-delete-btn",onClick:()=>Ca("image",t.id),style:{position:"absolute",right:"8px",top:"8px",zIndex:10,background:"rgba(255,255,255,0.9)",border:"1px solid #fee2e2",color:"#ef4444",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(re,{size:12})}),e.jsxs("div",{style:{position:"absolute",right:"40px",top:"8px",zIndex:10,display:"flex",gap:"6px"},children:[e.jsx("button",{title:"Yuxarı daşı",onClick:()=>Et("image",t.id,"up"),disabled:!o,style:{background:"rgba(255,255,255,0.9)",border:"1px solid #e2e8f0",color:o?"#334155":"#cbd5e1",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:o?"pointer":"not-allowed"},children:e.jsx(mt,{size:12})}),e.jsx("button",{title:"Aşağı daşı",onClick:()=>Et("image",t.id,"down"),disabled:!p,style:{background:"rgba(255,255,255,0.9)",border:"1px solid #e2e8f0",color:p?"#334155":"#cbd5e1",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:p?"pointer":"not-allowed"},children:e.jsx(ht,{size:12})})]}),e.jsx("div",{style:{height:"120px",background:"#f8fafc",position:"relative",overflow:"hidden"},children:t.path&&(t.path.startsWith("http")||t.path.startsWith("/"))?e.jsx("img",{src:t.path,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"#f1f5f9"},children:[e.jsx(Te,{size:32,style:{opacity:.1}}),e.jsx("span",{style:{fontSize:"10px",color:"#999",position:"absolute",bottom:"10px"},children:"Yol yoxdur"})]})}),e.jsxs("div",{style:{padding:"0.75rem"},children:[e.jsxs("div",{style:{fontSize:"10px",color:"#94a3b8",fontWeight:700,marginBottom:"6px"},children:["Sıra: ",a+1]}),e.jsxs("div",{style:{display:"flex",gap:"0.25rem",marginBottom:"4px"},children:[e.jsx("input",{type:"text",placeholder:"Resur yolu...",value:t.path,onChange:g=>{if(d<0||d>=s.length)return;const h=[...s],r=h[d];if(!r)return;const u=r.images.findIndex(B=>B.id===t.id);u!==-1&&(r.images[u].path=g.target.value,l(h))},style:{fontSize:"0.75rem",flex:1,padding:"0.4rem",border:"1px solid #eee",borderRadius:"4px"}}),e.jsx("button",{onClick:()=>za(d,t.id),title:"Sistemdən seç",style:{padding:"0 8px",background:"#f1f5f9",border:"1px solid #e2e8f0",borderRadius:"4px",cursor:"pointer"},children:e.jsx(ye,{size:14})}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:"file",id:`file-up-${t.id}`,style:{display:"none"},accept:"image/*",onChange:g=>ei(g,d,t.id)}),e.jsx("button",{onClick:()=>document.getElementById(`file-up-${t.id}`)?.click(),title:"Kompüterdən yüklə",style:{padding:"0 8px",height:"100%",background:"#f1f5f9",border:"1px solid #e2e8f0",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(ae,{size:14})})]})]}),e.jsx("input",{type:"text",placeholder:"Alt mətni...",value:t.alt,onChange:g=>Ra(d,t.id,g.target.value),style:{fontSize:"0.75rem",width:"100%",padding:"0.4rem",border:"1px solid #eee",borderRadius:"4px"}})]})]},t.id)}):e.jsx("div",{className:"empty-fields-tip",style:{gridColumn:"1/-1",textAlign:"center",padding:"2rem",background:"#f8fafc",borderRadius:"12px",border:"1px dashed #cbd5e1",color:"#64748b"},children:Q?"Sorğuya uyğun şəkil tapılmadı.":"Bu bölmədə redaktə ediləcək şəkil yoxdur."})})]}),e.jsxs("div",{className:"field-group",children:[e.jsxs("label",{children:[e.jsx(Te,{size:16})," Yeni Şəkil Yüklə"]}),e.jsxs("div",{className:"upload-dropzone",children:[e.jsx(ae,{size:24}),e.jsx("p",{children:"Şəkil yükləmək üçün seçin"}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[e.jsx("button",{className:"btn-secondary",onClick:()=>{const t=document.createElement("input");t.type="file",t.accept="image/*",t.onchange=async a=>{const i=a.target.files?.[0];if(!i)return;const n=await Ve(i);if(n&&d>=0&&d<s.length){const o=[...s],p=o[d];if(p){const g=`img-${p.images.length}-${Date.now()}`;p.images.push({id:g,path:n,alt:"",type:"local"}),l(o),E.success("Yeni şəkil əlavə edildi")}}},t.click()},children:"Cihazdan Yüklə"}),e.jsx("button",{className:"btn-secondary",onClick:()=>{const t=`img-${(G.images||[]).length}`;Ge({pageIdx:d,imgId:t}),W(!0),D(!0)},children:"Kitabxanadan Seç"})]})]})]})]})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"#94a3b8",gap:"1rem"},children:[e.jsx(Kt,{size:48,style:{opacity:.2}}),e.jsx("p",{children:"Redaktə etmək üçün sol tərəfdən bir komponent seçin."})]})})}),j&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-card fade-in",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Yeni Bölmə Əlavə Et"}),e.jsx("button",{onClick:()=>x(!1),children:e.jsx(ha,{size:20})})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Bölmə Başlığı"}),e.jsx("input",{type:"text",value:Le,onChange:t=>Ce(t.target.value),placeholder:"Məs: Xidmətlərimiz, Kampaniyalar...",autoFocus:!0})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>x(!1),children:"Ləğv et"}),e.jsx("button",{className:"btn-primary",onClick:Hs,children:"Əlavə et"})]})]})}),_&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-card fade-in",style:{maxWidth:"800px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Sistem Şəkilləri"}),e.jsx("button",{onClick:()=>D(!1),children:e.jsx(ha,{size:20})})]}),e.jsx("div",{className:"modal-body",style:{maxHeight:"60vh",overflowY:"auto"},children:e.jsx("div",{className:"image-selector-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(130px, 1fr))",gap:"1rem"},children:le.length>0?le.map((t,a)=>e.jsxs("div",{className:"selector-image-card",onClick:()=>ti(t),style:{cursor:"pointer",border:"2px solid #f1f5f9",borderRadius:"12px",overflow:"hidden",transition:"all 0.2s"},children:[e.jsx("div",{style:{aspectRatio:"1/1",background:"#f8fafc"},children:e.jsx("img",{src:t,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})}),e.jsx("div",{style:{padding:"0.5rem",fontSize:"10px",color:"#64748b",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center"},children:t.split("/").pop()})]},a)):e.jsx("div",{style:{gridColumn:"1/-1",textAlign:"center",padding:"3rem",color:"#94a3b8"},children:"Sistemdə heç bir şəkil tapılmadı."})})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"btn-secondary",onClick:()=>D(!1),children:"Bağla"})})]})})]})},Us="forsaj_admin_user",Fs="forsaj_admin_token",va="forsaj:session-expired",vt=()=>{const s=localStorage.getItem(Fs);return!s||s==="null"||s==="undefined"?null:s},Ae=()=>{localStorage.removeItem(Us),localStorage.removeItem(Fs),window.dispatchEvent(new Event(va))},cn=({currentUser:s})=>{const[l,d]=f.useState([]),[m,v]=f.useState(!0),[S,b]=f.useState(!1),[A,C]=f.useState(null),I=async()=>{try{const x=vt();if(!x){Ae();return}const _=await fetch("/api/users",{headers:{Authorization:`Bearer ${x}`}});if(_.status===401||_.status===403){Ae(),E.error("Sessiya müddəti bitib. Yenidən daxil olun.");return}if(!_.ok)throw new Error("Yükləmə uğursuz oldu");const D=await _.json();d(D||[])}catch{E.error("İstifadəçiləri yükləmək mümkün olmadı")}finally{v(!1)}};f.useEffect(()=>{I()},[]);const U=async x=>{if(x.preventDefault(),!A?.username||!A?.name||!A?.id&&!A?.password){E.error("Zəhmət olmasa bütün sahələri doldurun");return}try{const _=vt();if(!_){Ae();return}const D=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`},body:JSON.stringify(A)});if(D.status===401||D.status===403){Ae(),E.error("Sessiya müddəti bitib. Yenidən daxil olun.");return}if(D.ok)E.success(A.id?"İstifadəçi yeniləndi":"Yeni istifadəçi yaradıldı"),b(!1),C(null),I();else{const k=await D.json();E.error(k.error||"Xəta baş verdi")}}catch{E.error("Serverlə bağlantı kəsildi")}},P=async x=>{if(window.confirm("Bu istifadəçini silmək istədiyinizə əminsiniz?"))try{const _=vt();if(!_){Ae();return}const D=await fetch(`/api/users/${x}`,{method:"DELETE",headers:{Authorization:`Bearer ${_}`}});if(D.status===401||D.status===403){Ae(),E.error("Sessiya müddəti bitib. Yenidən daxil olun.");return}if(D.ok)E.success("İstifadəçi silindi"),I();else{const k=await D.json();E.error(k.error||"Silmək mümkün olmadı")}}catch{E.error("Serverlə bağlantı kəsildi")}},j=(x=null)=>{C(x?{...x}:{username:"",name:"",password:"",role:"secondary"}),b(!0)};return m?e.jsx("div",{className:"loading-state",children:"Yüklənir..."}):e.jsxs("div",{className:"users-manager fade-in",children:[e.jsxs("div",{className:"manager-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Admin Hesabları"}),e.jsx("p",{children:"Sistemi idarə edən bütün administratorların siyahısı və səlahiyyətləri"})]}),s.role==="master"&&e.jsxs("button",{className:"add-user-btn",onClick:()=>j(),children:[e.jsx(Qi,{size:18})," Yeni idarəçi"]})]}),e.jsx("div",{className:"users-grid",children:l.map(x=>e.jsxs("div",{className:"user-card",children:[e.jsxs("div",{className:"user-avatar",children:[e.jsx("img",{src:`https://ui-avatars.com/api/?name=${x.name}&background=${x.role==="master"?"3b82f6":"f59e0b"}&color=fff`,alt:x.name}),e.jsxs("div",{className:`role-badge ${x.role||"secondary"}`,children:[e.jsx(us,{size:10})," ",x.role==="master"?"Baş admin":"Redaktor"]})]}),e.jsxs("div",{className:"user-details",children:[e.jsx("h3",{children:x.name}),e.jsxs("span",{children:["@",x.username||"username"]})]}),s.role==="master"&&e.jsxs("div",{className:"user-actions",children:[e.jsx("button",{className:"edit-btn",onClick:()=>j(x),title:"Düzəliş et",children:e.jsx(Vi,{size:16})}),e.jsx("button",{className:"delete-btn",onClick:()=>P(x.id.toString()),title:"Sil",children:e.jsx(re,{size:16})})]})]},x.id))}),S&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:A?.id?"İstifadəçini redaktə et":"Yeni idarəçi hesabı"}),e.jsx("button",{onClick:()=>b(!1),children:e.jsx(ha,{size:20})})]}),e.jsxs("form",{onSubmit:U,children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(yt,{size:14})," Tam Ad"]}),e.jsx("input",{type:"text",value:A?.name||"",onChange:x=>C({...A,name:x.target.value}),placeholder:"Məs: Əli Məmmədov",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(yt,{size:14})," İstifadəçi Adı"]}),e.jsx("input",{type:"text",value:A?.username||"",onChange:x=>C({...A,username:x.target.value}),placeholder:"Məs: alimm",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(fa,{size:14})," Şifrə ",A?.id&&e.jsx("span",{className:"helper-text",children:"(Dəyişmək istəmirsinizsə boş saxlayın)"})]}),e.jsx("input",{type:"password",value:A?.password||"",onChange:x=>C({...A,password:x.target.value}),placeholder:"••••••••",required:!A?.id})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(us,{size:14})," Yetki (Rol)"]}),e.jsxs("select",{value:A?.role||"secondary",onChange:x=>C({...A,role:x.target.value}),children:[e.jsx("option",{value:"master",children:"Baş Admin (Tam səlahiyyət)"}),e.jsx("option",{value:"secondary",children:"Redaktor (Məhdud səlahiyyət)"})]})]}),A?.role==="master"&&e.jsxs("div",{className:"role-warning",children:[e.jsx(Zi,{size:14})," Baş Admin bütün sistem daxilində tam səlahiyyətə malikdir."]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>b(!1),children:"Ləğv et"}),e.jsxs("button",{type:"submit",className:"save-btn",children:[e.jsx(Sa,{size:18})," Yadda Saxla"]})]})]})]})})]})},un=()=>{const[s,l]=f.useState(!1),d=async()=>{l(!0);const v=E.loading("Front qovluğu skan edilir...");try{if(!(await fetch("/api/extract-content",{method:"POST"})).ok)throw new Error("Skan xətası");E.success("Skan tamamlandı! Panel yenilənir...",{id:v}),setTimeout(()=>window.location.reload(),1500)}catch{E.error("Skan uğursuz oldu!",{id:v})}finally{l(!1)}},m=[{id:1,title:"Sitemap Faylını Yaradın",description:"public/sitemap.json faylına menyu strukturunuzu əlavə edin və ya front-dan gətirin.",path:"public/sitemap.json",icon:Wi},{id:2,title:"Front Layihəsini Sinxronlaşdırın",description:"/front qovluğundakı React layihəsini skan edərək bütün səhifələri menyuya çıxarın.",path:"/front/src/pages",icon:Xi},{id:3,title:"Sistem Ayarlarını Tənzimləyin",description:"Saytın ümumi tənzimləmələrini, loqo və əlaqə məlumatlarını idarə edin.",path:"Sistem Ayarları",icon:Es}];return e.jsxs("div",{className:"setup-guide",children:[e.jsxs("div",{className:"setup-header",children:[e.jsxs("div",{className:"setup-brand",children:[e.jsx("div",{className:"octo-logo",children:"🏎️"}),e.jsx("h2",{children:"Forsaj Club İdarəetmə"})]}),e.jsx("h1",{children:"Xoş Gəlmisiniz! Paneli Qurmağa Başlayaq"}),e.jsx("p",{children:"Forsaj Club platformanız üçün premium admin paneli artıq hazırdır. Aşağıdakı addımları izləyərək front layihənizi adminlə birləşdirin."})]}),e.jsxs("div",{className:"setup-grid",children:[e.jsx("div",{className:"steps-container",children:m.map(v=>e.jsxs("div",{className:"step-card",children:[e.jsx("div",{className:"step-icon",children:e.jsx(v.icon,{size:26})}),e.jsxs("div",{className:"step-content",children:[e.jsx("h3",{children:v.title}),e.jsx("p",{children:v.description}),e.jsx("span",{className:"step-badge",children:v.path})]})]},v.id))}),e.jsxs("div",{className:"setup-sidebar-actions",children:[e.jsxs("div",{className:"action-card primary",children:[e.jsx(Ji,{size:32}),e.jsx("h4",{children:"Yeni Səhifə Əlavə Et"}),e.jsx("p",{children:"Dinamik olaraq yeni admin səhifəsi yaradın."})]}),e.jsxs("div",{className:"action-card secondary",children:[e.jsx(Cs,{size:32}),e.jsx("h4",{children:"Front Skaner"}),e.jsx("p",{children:"/front qosulub. Skanlamağa hazırdır."}),e.jsx("button",{className:`scan-btn ${s?"loading":""}`,onClick:d,disabled:s,children:s?e.jsx(Is,{className:"animate-spin"}):"İndi Skan Et"})]})]})]}),e.jsx("div",{className:"setup-footer",children:e.jsxs("div",{className:"info-box",children:[e.jsx("strong",{children:"Məlumat:"})," /front qovluğu aşkar edildi. Sitemap avtomatik generasiya olunduqda bu ekran Dashboard ilə əvəzlənəcək."]})})]})},pn=({onLogin:s})=>{const[l,d]=f.useState(!0),[m,v]=f.useState(""),[S,b]=f.useState(""),[A,C]=f.useState(""),[I,U]=f.useState(!1);f.useEffect(()=>{(async()=>{try{(await(await fetch("/api/check-setup")).json()).needsSetup&&d(!1)}catch(x){console.error("Setup check failed",x)}})()},[]);const P=async j=>{j.preventDefault();const x=m.trim(),_=A.trim();if(!x||!S.trim()){E.error("İstifadəçi adı və şifrə mütləqdir");return}if(!l&&!_){E.error("Tam ad mütləqdir");return}if(!l&&S.length<6){E.error("Şifrə ən azı 6 simvol olmalıdır");return}U(!0);try{const W=await fetch(l?"/api/login":"/api/setup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l?{username:x,password:S}:{username:x,password:S,name:_})}),le=await W.json();if(!W.ok)throw new Error(le.error||(l?"Giriş uğursuz oldu":"Quraşdırma uğursuz oldu"));l?(localStorage.setItem("forsaj_admin_token",le.token),localStorage.setItem("forsaj_admin_user",JSON.stringify(le.user)),s(le.user),E.success("Xoş gəldiniz!")):(E.success("Baza uğurla başladıldı! İndi daxil ola bilərsiniz."),d(!0))}catch(D){E.error(D.message||"Əməliyyat uğursuz oldu")}finally{U(!1)}};return e.jsx("div",{className:"login-page",children:e.jsxs("div",{className:"login-card fade-in",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("div",{className:"login-logo",children:l?e.jsx(el,{size:40,className:"logo-icon"}):e.jsx(fa,{size:40,className:"logo-icon"})}),e.jsx("h1",{children:l?"Forsaj İdarəetmə Paneli":"Sistem Quraşdırılması"}),e.jsx("p",{children:l?"Sistemə daxil olmaq üçün məlumatlarınızı daxil edin":"İlkin Baş Admin hesabını yaradaraq sistemi başladın"})]}),e.jsxs("form",{className:"login-form",onSubmit:P,children:[!l&&e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(yt,{size:16})," Tam Adınız"]}),e.jsx("input",{type:"text",value:A,onChange:j=>C(j.target.value),placeholder:"Məs: Əli Məmmədov",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(yt,{size:16})," İstifadəçi Adı"]}),e.jsx("input",{type:"text",value:m,onChange:j=>v(j.target.value),placeholder:"Məs: admin",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(fa,{size:16})," Şifrə"]}),e.jsx("input",{type:"password",value:S,onChange:j=>b(j.target.value),placeholder:"••••••••",required:!0})]}),e.jsx("button",{type:"submit",className:"login-btn",disabled:I,children:I?e.jsxs("div",{className:"loader-container",children:[e.jsx(Is,{className:"animate-spin",size:20}),e.jsx("span",{children:"Gözləyin..."})]}):l?"Daxil ol":"Sistemi başlat"})]}),e.jsx("div",{className:"login-footer",children:e.jsx("p",{children:"© 2026 Forsaj Club. Platformanın təhlükəsizliyi üçün mütəmadi olaraq şifrənizi yeniləyin."})})]})})},xn=()=>{const[s,l]=f.useState([]),[d,m]=f.useState(null),[v,S]=f.useState(!0),[b,A]=f.useState("all"),C=async()=>{const x=localStorage.getItem("forsaj_admin_token");try{const _=await fetch("/api/applications",{headers:{Authorization:`Bearer ${x}`}});if(_.ok){const D=await _.json();l(D)}}catch{E.error("Müraciətlər yüklənərkən xəta baş verdi")}finally{S(!1)}};f.useEffect(()=>{C()},[]);const I=async x=>{const _=localStorage.getItem("forsaj_admin_token");try{(await fetch(`/api/applications/${x}/read`,{method:"POST",headers:{Authorization:`Bearer ${_}`}})).ok&&(l(k=>k.map(W=>W.id===x?{...W,status:"read"}:W)),d?.id===x&&m(k=>k?{...k,status:"read"}:null))}catch(D){console.error(D)}},U=async x=>{if(!window.confirm("Bu müraciəti silmək istədiyinizə əminsiniz?"))return;const _=localStorage.getItem("forsaj_admin_token");try{(await fetch(`/api/applications/${x}`,{method:"DELETE",headers:{Authorization:`Bearer ${_}`}})).ok&&(l(k=>k.filter(W=>W.id!==x)),d?.id===x&&m(null),E.success("Müraciət silindi"))}catch{E.error("Silinmə zamanı xəta baş verdi")}},P=s.filter(x=>b==="unread"?x.status==="unread":b==="read"?x.status==="read":!0),j=x=>{try{const _=JSON.parse(x);return e.jsx("div",{className:"app-details-grid",children:Object.entries(_).map(([D,k])=>e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"detail-label",children:[D.toUpperCase(),":"]}),e.jsx("span",{className:"detail-value",children:String(k)})]},D))})}catch{return e.jsx("div",{className:"detail-text",children:x})}};return v?e.jsx("div",{className:"loading-state",children:"Yüklənir..."}):e.jsxs("div",{className:"applications-manager fade-in",children:[e.jsxs("div",{className:"manager-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Müraciətlər"}),e.jsx("p",{children:"İstifadəçilər tərəfindən göndərilən formlar və qeydiyyatlar"})]}),e.jsxs("div",{className:"filter-tabs",children:[e.jsx("button",{className:b==="all"?"active":"",onClick:()=>A("all"),children:"Hamısı"}),e.jsx("button",{className:b==="unread"?"active":"",onClick:()=>A("unread"),children:"Oxunmamış"}),e.jsx("button",{className:b==="read"?"active":"",onClick:()=>A("read"),children:"Oxunmuş"})]})]}),e.jsxs("div",{className:"manager-body",children:[e.jsx("div",{className:"applications-list",children:P.length===0?e.jsx("div",{className:"empty-list",children:"Heç bir müraciət tapılmadı"}):P.map(x=>e.jsxs("div",{className:`application-item ${x.status} ${d?.id===x.id?"selected":""}`,onClick:()=>{m(x),x.status==="unread"&&I(x.id)},children:[e.jsx("div",{className:"app-item-icon",children:x.status==="unread"?e.jsx(Rs,{className:"icon-unread"}):e.jsx(tl,{className:"icon-read"})}),e.jsxs("div",{className:"app-item-main",children:[e.jsxs("div",{className:"app-item-header",children:[e.jsx("span",{className:"app-item-name",children:x.name}),e.jsx("span",{className:"app-item-date",children:new Date(x.created_at).toLocaleDateString()})]}),e.jsx("div",{className:"app-item-type",children:x.type})]}),e.jsx(al,{size:16,className:"chevron"})]},x.id))}),e.jsx("div",{className:"application-details",children:d?e.jsxs("div",{className:"details-card fade-in",children:[e.jsxs("div",{className:"details-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Müraciət Təfərrüatları"}),e.jsx("span",{className:`status-badge ${d.status}`,children:d.status==="unread"?"Yeni":"Oxunub"})]}),e.jsx("div",{className:"header-actions",children:e.jsx("button",{className:"btn-delete",onClick:()=>U(d.id),children:e.jsx(re,{size:18})})})]}),e.jsxs("div",{className:"details-info",children:[e.jsxs("div",{className:"info-group",children:[e.jsxs("label",{children:[e.jsx(yt,{size:16})," Göndərən"]}),e.jsx("p",{children:d.name})]}),e.jsxs("div",{className:"info-group",children:[e.jsxs("label",{children:[e.jsx(Ts,{size:16})," Əlaqə"]}),e.jsx("p",{children:d.contact})]}),e.jsxs("div",{className:"info-group",children:[e.jsxs("label",{children:[e.jsx(bt,{size:16})," Kateqoriya"]}),e.jsx("p",{children:d.type})]})]}),e.jsxs("div",{className:"details-content",children:[e.jsx("label",{children:"Məzmun"}),e.jsx("div",{className:"content-box",children:j(d.content)})]})]}):e.jsxs("div",{className:"details-placeholder",children:[e.jsx(Ns,{size:48}),e.jsx("p",{children:"Baxmaq üçün siyahıdan müraciət seçin"})]})})]})]})},vs="forsaj_general_hidden_cards",mn={general:"SİSTEM AYARLARI",marquee:"MARQUEE"},hn=["SOCIAL_INSTAGRAM","SOCIAL_YOUTUBE","SOCIAL_FACEBOOK"],ys=s=>{const l=(s||"").trim();return l?/^[a-z][a-z0-9+.-]*:/i.test(l)?l:l.startsWith("//")?`https:${l}`:/^[\w.-]+\.[a-z]{2,}(?:[/?#]|$)/i.test(l)?`https://${l}`:l:""},fn=()=>{const[s,l]=f.useState([]),[d,m]=f.useState(!1),[v,S]=f.useState(!0),[b,A]=f.useState(()=>{try{const c=localStorage.getItem(vs),N=c?JSON.parse(c):[];return Array.isArray(N)?N:[]}catch{return[]}}),C=ya(),U=new URLSearchParams(C.search).get("tab")==="hidden",P=c=>b.includes(c),j=c=>U?P(c):!P(c),x=c=>`settings-card shadow-sm${j(c)?"":" settings-card-hidden"}`,_=c=>{A(N=>N.includes(c)?N:[...N,c])},D=c=>{A(N=>N.filter(M=>M!==c))},k=c=>{const N=P(c),M=U&&N;return e.jsx("button",{type:"button",className:"card-visibility-btn",onClick:()=>N?D(c):_(c),title:M?"Kartı geri gətir":"Kartı gizlət","aria-label":M?"Kartı geri gətir":"Kartı gizlət",children:M?e.jsx(As,{size:16}):e.jsx(il,{size:16})})},W=async()=>{try{const N=await(await fetch("/api/site-content")).json();l(N),S(!1)}catch{E.error("Ayarlar yüklənərkən xəta baş verdi")}};f.useEffect(()=>{W()},[]),f.useEffect(()=>{localStorage.setItem(vs,JSON.stringify(b))},[b]),f.useEffect(()=>{if(v)return;const N=new URLSearchParams(C.search).get("tab"),q=N?{seo:"seo-basic",general:"branding",contact:"contact-details",social:"social-links",stats:"stats",marquee:"marquee-settings"}[N]:"";q&&setTimeout(()=>{const H=document.querySelector(`[data-settings-section="${q}"]`);H&&H.scrollIntoView({behavior:"smooth",block:"start"})},50)},[C.search,v]);const le=(c,N)=>{let M=c.findIndex(q=>q.id===N);return M===-1&&(c.push({id:N,title:mn[N]||N.toUpperCase(),sections:[],images:[],active:!0}),M=c.length-1),Array.isArray(c[M].sections)||(c[M].sections=[]),Array.isArray(c[M].images)||(c[M].images=[]),M},O=(c,N,M=!1,q="general")=>{const H=[...s],Y=le(H,q);if(M){const oe=H[Y].images.findIndex(xe=>xe.id===c);oe===-1?H[Y].images.push({id:c,path:N,alt:c,type:"local"}):H[Y].images[oe].path=N}else{const oe=H[Y].sections.findIndex(xe=>xe.id===c);oe===-1?H[Y].sections.push({id:c,type:"text",label:c,value:N}):H[Y].sections[oe].value=N}l(H)},L=(c,N=!1,M="general")=>{const q=s.find(H=>H.id===M);return q?N?q.images.find(H=>H.id===c)?.path||"":q.sections.find(H=>H.id===c)?.value||"":""},Ge=(c,N=!0)=>{const M=s.find(q=>q.id===c);return!M||M.active===void 0?N:!!M.active},Le=(c,N)=>{const M=[...s],q=le(M,c);M[q].active=N,l(M)},Ce=()=>{const c=s.find(N=>N.id==="marquee");return c&&(c.sections?.find(N=>N.id==="MARQUEE_TEXT")?.value||c.sections?.[0]?.value)||""},Q=c=>{const N=[...s],M=le(N,"marquee"),q=N[M].sections,H=q.findIndex(Y=>Y.id==="MARQUEE_TEXT");H>=0?q[H].value=c:q.length>0?q[0].value=c:q.push({id:"MARQUEE_TEXT",type:"text",label:"MARQUEE_TEXT",value:c}),l(N)},Ie=c=>{const N=s.find(M=>M.id==="marquee");return N&&N.sections?.find(M=>M.id===c)?.value||""},pe=(c,N)=>{const M=[...s],q=le(M,"marquee"),H=M[q].sections,Y=H.findIndex(oe=>oe.id===c);Y>=0?H[Y].value=N:H.push({id:c,type:"text",label:c,value:N}),l(M)},Qt=()=>Ie("MARQUEE_LINK"),rt=c=>pe("MARQUEE_LINK",c),Vt=()=>{const c=(Ie("MARQUEE_LINK_ACTIVE")||"").toString().trim().toLowerCase();return c==="1"||c==="true"||c==="yes"||c==="on"},ke=c=>{pe("MARQUEE_LINK_ACTIVE",c?"1":"0")},ue=c=>ys(L(c)),Ue=c=>c.map(N=>N?.id!=="general"||!Array.isArray(N.sections)?N:{...N,sections:N.sections.map(M=>hn.includes(M?.id)?{...M,value:ys(M?.value||"")}:M)}),Oe=async(c,N,M="general")=>{const q=c.target.files?.[0];if(!q)return;const H=new FormData;H.append("image",q);const Y=E.loading("Şəkil yüklənir...");try{const oe=await fetch("/api/upload-image",{method:"POST",body:H});if(oe.ok){const xe=await oe.json();O(N,xe.url,!0,M),E.success("Şəkil yükləndi",{id:Y})}}catch{E.error("Yükləmə xətası",{id:Y})}},Z=async()=>{m(!0);const c=E.loading("Yadda saxlanılır..."),N=Ue(s);l(N);try{await fetch("/api/save-content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)}),E.success("Ayarlar qeyd edildi!",{id:c})}catch{E.error("Xəta baş verdi",{id:c})}finally{m(!1)}};return v?e.jsx("div",{className:"loading-state",children:"Yüklənir..."}):e.jsxs("div",{className:"general-settings fade-in",children:[e.jsxs("div",{className:"settings-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Sistem Ayarları"}),e.jsx("p",{children:U?"Gizlədilmiş ayar kartları":"SEO, Brendinq və ümumi sayt tənzimləmələri"})]}),e.jsxs("button",{className:"save-btn",onClick:Z,disabled:d,children:[e.jsx(Sa,{size:18}),e.jsx("span",{children:"Yadda Saxla"})]})]}),U&&b.length===0&&e.jsx("div",{className:"hidden-settings-empty",children:"Gizlənmiş kart yoxdur. Kartları gizlətmək üçün normal görünüşdə kartın üzərinə gəlib göz ikonuna klikləyin."}),e.jsxs("div",{className:"settings-grid",children:[e.jsxs("div",{className:x("seo-basic"),"data-settings-section":"seo-basic",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(ye,{size:20,className:"text-blue-500"}),e.jsx("h2",{children:"SEO və axtarış motoru"}),k("seo-basic")]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Meta başlıq (sayt adı)"}),e.jsx("input",{type:"text",value:L("SEO_TITLE"),onChange:c=>O("SEO_TITLE",c.target.value),placeholder:"Məs: Forsaj Club - Offroad & Motorsport"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Meta təsvir"}),e.jsx("textarea",{value:L("SEO_DESCRIPTION"),onChange:c=>O("SEO_DESCRIPTION",c.target.value),placeholder:"Sayt haqqında qısa məlumat..."})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Açar sözlər"}),e.jsx("input",{type:"text",value:L("SEO_KEYWORDS"),onChange:c=>O("SEO_KEYWORDS",c.target.value),placeholder:"offroad, baki, yarış, mitsubishi, pajero"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Kanonik URL"}),e.jsx("input",{type:"text",value:L("SEO_CANONICAL_URL"),onChange:c=>O("SEO_CANONICAL_URL",c.target.value),placeholder:"https://forsaj.az"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Robots direktivi"}),e.jsx("input",{type:"text",value:L("SEO_ROBOTS"),onChange:c=>O("SEO_ROBOTS",c.target.value),placeholder:"index,follow"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Müəllif"}),e.jsx("input",{type:"text",value:L("SEO_AUTHOR"),onChange:c=>O("SEO_AUTHOR",c.target.value),placeholder:"Forsaj Club"})]})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Dil (html lang)"}),e.jsx("input",{type:"text",value:L("SEO_LANGUAGE"),onChange:c=>O("SEO_LANGUAGE",c.target.value),placeholder:"az"})]})]})]}),e.jsxs("div",{className:x("seo-social"),"data-settings-section":"seo-social",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(ye,{size:20,className:"text-cyan-500"}),e.jsx("h2",{children:"Sosial paylaşım SEO (OG / Twitter)"}),k("seo-social")]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"OG başlıq"}),e.jsx("input",{type:"text",value:L("SEO_OG_TITLE"),onChange:c=>O("SEO_OG_TITLE",c.target.value),placeholder:"Sosial şəbəkə başlığı"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"OG təsvir"}),e.jsx("textarea",{value:L("SEO_OG_DESCRIPTION"),onChange:c=>O("SEO_OG_DESCRIPTION",c.target.value),placeholder:"Sosial şəbəkə paylaşım təsviri"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"OG URL"}),e.jsx("input",{type:"text",value:L("SEO_OG_URL"),onChange:c=>O("SEO_OG_URL",c.target.value),placeholder:"https://forsaj.az"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Twitter kart növü"}),e.jsx("input",{type:"text",value:L("SEO_TWITTER_CARD"),onChange:c=>O("SEO_TWITTER_CARD",c.target.value),placeholder:"summary_large_image"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Twitter hesabı (site)"}),e.jsx("input",{type:"text",value:L("SEO_TWITTER_SITE"),onChange:c=>O("SEO_TWITTER_SITE",c.target.value),placeholder:"@forsajclub"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Twitter müəllif"}),e.jsx("input",{type:"text",value:L("SEO_TWITTER_CREATOR"),onChange:c=>O("SEO_TWITTER_CREATOR",c.target.value),placeholder:"@forsajclub"})]})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"OG şəkli"}),e.jsx("div",{className:"logo-preview",style:{minHeight:"140px"},children:L("SEO_OG_IMAGE",!0)?e.jsx("img",{src:L("SEO_OG_IMAGE",!0),alt:"OG Şəkli"}):e.jsx("div",{className:"no-logo",children:"OG şəkli yoxdur"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",style:{marginTop:"10px"},children:[e.jsxs("label",{className:"upload-btn",children:[e.jsx(Bt,{size:14})," Şəkil yüklə",e.jsx("input",{type:"file",hidden:!0,onChange:c=>Oe(c,"SEO_OG_IMAGE")})]}),e.jsx("input",{type:"text",value:L("SEO_OG_IMAGE",!0),onChange:c=>O("SEO_OG_IMAGE",c.target.value,!0),placeholder:"https://forsaj.az/og-cover.jpg"})]})]})]})]}),e.jsxs("div",{className:x("seo-verify"),"data-settings-section":"seo-verify",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(ps,{size:20,className:"text-violet-500"}),e.jsx("h2",{children:"Axtarış motoru təsdiqləri"}),k("seo-verify")]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Google təsdiq kodu"}),e.jsx("input",{type:"text",value:L("SEO_GOOGLE_VERIFICATION"),onChange:c=>O("SEO_GOOGLE_VERIFICATION",c.target.value),placeholder:"google-site-verification kodu"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Bing təsdiq kodu"}),e.jsx("input",{type:"text",value:L("SEO_BING_VERIFICATION"),onChange:c=>O("SEO_BING_VERIFICATION",c.target.value),placeholder:"msvalidate.01 kodu"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Yandex təsdiq kodu"}),e.jsx("input",{type:"text",value:L("SEO_YANDEX_VERIFICATION"),onChange:c=>O("SEO_YANDEX_VERIFICATION",c.target.value),placeholder:"yandex-verification kodu"})]})]})]}),e.jsxs("div",{className:x("branding"),"data-settings-section":"branding",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(Te,{size:20,className:"text-orange-500"}),e.jsx("h2",{children:"Brendinq & Loqo"}),k("branding")]}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"logo-upload-grid",children:[e.jsxs("div",{className:"logo-box",children:[e.jsx("label",{children:"Əsas Loqo (Light)"}),e.jsx("div",{className:"logo-preview",children:L("SITE_LOGO_LIGHT",!0)?e.jsx("img",{src:L("SITE_LOGO_LIGHT",!0),alt:"Logo Light"}):e.jsx("div",{className:"no-logo",children:"Loqo yoxdur"})}),e.jsxs("label",{className:"upload-btn",children:[e.jsx(Bt,{size:14})," Yüklə",e.jsx("input",{type:"file",hidden:!0,onChange:c=>Oe(c,"SITE_LOGO_LIGHT")})]})]}),e.jsxs("div",{className:"logo-box",children:[e.jsx("label",{children:"Alternativ Loqo (Dark)"}),e.jsx("div",{className:"logo-preview dark-bg",children:L("SITE_LOGO_DARK",!0)?e.jsx("img",{src:L("SITE_LOGO_DARK",!0),alt:"Logo Dark"}):e.jsx("div",{className:"no-logo",children:"Loqo yoxdur"})}),e.jsxs("label",{className:"upload-btn",children:[e.jsx(Bt,{size:14})," Yüklə",e.jsx("input",{type:"file",hidden:!0,onChange:c=>Oe(c,"SITE_LOGO_DARK")})]})]})]})})]}),e.jsxs("div",{className:x("contact-details"),"data-settings-section":"contact-details",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(Te,{size:20,className:"text-red-500"}),e.jsx("h2",{children:"Əlaqə & Ünvan Məlumatları"}),k("contact-details")]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Baş Ofis Ünvan (Sətir 1)"}),e.jsx("input",{type:"text",value:L("CONTACT_ADDRESS_1"),onChange:c=>O("CONTACT_ADDRESS_1",c.target.value),placeholder:"Məs: AZADLIQ 102, BAKI"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Baş Ofis Ünvan (Sətir 2)"}),e.jsx("input",{type:"text",value:L("CONTACT_ADDRESS_2"),onChange:c=>O("CONTACT_ADDRESS_2",c.target.value),placeholder:"Məs: AZƏRBAYCAN // SECTOR_01"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"İş Saatları"}),e.jsx("input",{type:"text",value:L("CONTACT_HOURS"),onChange:c=>O("CONTACT_HOURS",c.target.value),placeholder:"Məs: 09:00 - 18:00"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Əlaqə Nömrəsi"}),e.jsx("input",{type:"text",value:L("CONTACT_PHONE"),onChange:c=>O("CONTACT_PHONE",c.target.value),placeholder:"+994 50 000 00 00"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Əlaqə E-poçtu"}),e.jsx("input",{type:"text",value:L("CONTACT_EMAIL"),onChange:c=>O("CONTACT_EMAIL",c.target.value),placeholder:"info@forsaj.az"})]})]})]})]}),e.jsxs("div",{className:x("departments"),"data-settings-section":"departments",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(sl,{size:20,className:"text-purple-500"}),e.jsx("h2",{children:"Şöbə E-poçtları"}),k("departments")]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Baş Ofis (HQ)"}),e.jsx("input",{type:"text",value:L("DEPT_HQ_EMAIL"),onChange:c=>O("DEPT_HQ_EMAIL",c.target.value),placeholder:"hq@forsaj.az"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Media və PR"}),e.jsx("input",{type:"text",value:L("DEPT_PR_EMAIL"),onChange:c=>O("DEPT_PR_EMAIL",c.target.value),placeholder:"pr@forsaj.az"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Texniki Dəstək"}),e.jsx("input",{type:"text",value:L("DEPT_TECH_EMAIL"),onChange:c=>O("DEPT_TECH_EMAIL",c.target.value),placeholder:"tech@forsaj.az"})]})]})]}),e.jsxs("div",{className:x("social-links"),"data-settings-section":"social-links",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(ye,{size:20,className:"text-pink-500"}),e.jsx("h2",{children:"Sosial Media Linkləri"}),k("social-links")]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Instagram"}),e.jsxs("div",{className:"social-input-row",children:[e.jsx("input",{type:"text",value:L("SOCIAL_INSTAGRAM"),onChange:c=>O("SOCIAL_INSTAGRAM",c.target.value),placeholder:"https://instagram.com/forsajclub"}),e.jsx("a",{href:ue("SOCIAL_INSTAGRAM")||"#",target:"_blank",rel:"noopener noreferrer",className:`social-test-link${ue("SOCIAL_INSTAGRAM")?"":" disabled"}`,onClick:c=>{ue("SOCIAL_INSTAGRAM")||c.preventDefault()},children:"Test et"})]})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Youtube"}),e.jsxs("div",{className:"social-input-row",children:[e.jsx("input",{type:"text",value:L("SOCIAL_YOUTUBE"),onChange:c=>O("SOCIAL_YOUTUBE",c.target.value),placeholder:"https://youtube.com/@forsajclub"}),e.jsx("a",{href:ue("SOCIAL_YOUTUBE")||"#",target:"_blank",rel:"noopener noreferrer",className:`social-test-link${ue("SOCIAL_YOUTUBE")?"":" disabled"}`,onClick:c=>{ue("SOCIAL_YOUTUBE")||c.preventDefault()},children:"Test et"})]})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Facebook"}),e.jsxs("div",{className:"social-input-row",children:[e.jsx("input",{type:"text",value:L("SOCIAL_FACEBOOK"),onChange:c=>O("SOCIAL_FACEBOOK",c.target.value),placeholder:"https://facebook.com/forsajclub"}),e.jsx("a",{href:ue("SOCIAL_FACEBOOK")||"#",target:"_blank",rel:"noopener noreferrer",className:`social-test-link${ue("SOCIAL_FACEBOOK")?"":" disabled"}`,onClick:c=>{ue("SOCIAL_FACEBOOK")||c.preventDefault()},children:"Test et"})]}),e.jsx("small",{className:"field-help",children:"Domen ilə başlayan linklərdə (`instagram.com/...`) `https://` avtomatik əlavə ediləcək."})]})]})]}),e.jsxs("div",{className:x("marquee-settings"),"data-settings-section":"marquee-settings",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(js,{size:20,className:"text-amber-500"}),e.jsx("h2",{children:"Marquee Ayarları"}),k("marquee-settings")]}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"field-group",children:e.jsxs("label",{className:"toggle-row",children:[e.jsx("input",{type:"checkbox",checked:Ge("marquee",!0),onChange:c=>Le("marquee",c.target.checked)}),e.jsx("span",{children:"Marquee aktivdir (səhifədə göstər)"})]})}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Marquee mətni"}),e.jsx("textarea",{value:Ce(),onChange:c=>Q(c.target.value),placeholder:"Məs: FORSAJ CLUB // OFFROAD MOTORSPORT HUB"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Link əlavə et"}),e.jsx("input",{type:"text",value:Qt(),onChange:c=>rt(c.target.value),placeholder:"Məs: /events və ya https://forsaj.az/events"})]}),e.jsx("div",{className:"field-group",children:e.jsxs("label",{className:"toggle-row",children:[e.jsx("input",{type:"checkbox",checked:Vt(),onChange:c=>ke(c.target.checked)}),e.jsx("span",{children:"Link aktivdir (aktiv/deaktiv)"})]})}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Marquee arxa plan şəkli"}),e.jsx("div",{className:"logo-preview",style:{minHeight:"90px"},children:L("marquee-image",!0,"marquee")?e.jsx("img",{src:L("marquee-image",!0,"marquee"),alt:"Marquee Background"}):e.jsx("div",{className:"no-logo",children:"Arxa plan şəkli yoxdur"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",style:{marginTop:"10px"},children:[e.jsxs("label",{className:"upload-btn",children:[e.jsx(Bt,{size:14})," Şəkil yüklə",e.jsx("input",{type:"file",hidden:!0,onChange:c=>Oe(c,"marquee-image","marquee")})]}),e.jsx("input",{type:"text",value:L("marquee-image",!0,"marquee"),onChange:c=>O("marquee-image",c.target.value,!0,"marquee"),placeholder:"https://forsaj.az/marquee-bg.jpg"})]})]})]})]}),e.jsxs("div",{className:x("stats"),"data-settings-section":"stats",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(ps,{size:20,className:"text-green-500"}),e.jsx("h2",{children:"Sayt Statistikaları"}),k("stats")]}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"stats-edit-grid",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Pilot Sayı"}),e.jsx("input",{type:"text",value:L("STATS_PILOTS"),onChange:c=>O("STATS_PILOTS",c.target.value),placeholder:"Susmaya görə: 140+"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Yarış Sayı"}),e.jsx("input",{type:"text",value:L("STATS_RACES"),onChange:c=>O("STATS_RACES",c.target.value),placeholder:"Susmaya görə: 50+"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Gənc İştirakçı"}),e.jsx("input",{type:"text",value:L("STATS_YOUTH"),onChange:c=>O("STATS_YOUTH",c.target.value),placeholder:"Susmaya görə: 20+"})]})]})})]})]})]})},nt=s=>s.toLocaleLowerCase("az").normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim(),gn={DASHBOARD:"Panel Ana Səhifə","ANA SƏHİFƏ":"Sayt Məzmunu",HAQQIMIZDA:"Haqqımızda",XƏBƏRLƏR:"Xəbərlər",TƏDBİRLƏR:"Tədbirlər",SÜRÜCÜLƏR:"Sürücülər",QALEREYA:"Qalereya",QAYDALAR:"Qaydalar",ƏLAQƏ:"Əlaqə","ADMİN HESABLARI":"İstifadəçi İdarəsi","SİSTEM AYARLARI":"Sistem Ayarları"},bn={"Ümumi Görünüş":"Ana Səhifə Blokları",Naviqasiya:"Menyu və Naviqasiya","Giriş Hissəsi":"Hero Bölməsi","Sürüşən Yazı":"Marquee Yazısı","Sayt Sonu":"Footer","Xəbər Siyahısı":"Xəbər Məzmunu","Xəbər Səhifəsi":"Xəbər Səhifəsi Mətni","Tədbir Təqvimi":"Tədbir Siyahısı","Tədbir Səhifəsi":"Tədbir Səhifəsi Mətni","Sürücü Reytinqi":"Sürücü Cədvəli","Sürücülər Səhifəsi":"Sürücülər Səhifəsi Mətni"},vn=s=>{const l=gn[s.title]||s.title;return{...s,title:l,children:s.children?.map(d=>({...d,title:bn[d.title]||d.title}))}},Ys=s=>s&&(s==="/frontend-settings"||s==="/admin/frontend-settings"||s==="/general-settings"||s==="/admin/general-settings"?"/general-settings?tab=general":s),Ks=s=>({...s,path:Ys(s.path),children:s.children?.map(Ks)}),xa=(s=[])=>{const l=new Map;return s.forEach(d=>{const m=`${nt(d.title||"")}|${nt(d.path||"")}`;m&&l.set(m,d)}),Array.from(l.values())},Ss=s=>{const l=nt(s?.title||""),d=nt(Ys(s?.path)||"");return l==="sistem ayarlari"||d==="/frontend-settings"||d==="/admin/frontend-settings"||d==="/general-settings"||d==="/admin/general-settings"||d.startsWith("/general-settings?")},yn=()=>{const[s,l]=f.useState(null),[d,m]=f.useState([]),[v,S]=f.useState(0),[b,A]=f.useState(!0);if(f.useEffect(()=>{const I=localStorage.getItem(Us),U=vt();if(I&&U)try{l(JSON.parse(I))}catch{Ae(),l(null)}else Ae(),l(null);A(!1)},[]),f.useEffect(()=>{const I=()=>l(null);return window.addEventListener(va,I),()=>window.removeEventListener(va,I)},[]),f.useEffect(()=>{const I=async()=>{const P=vt();if(!P){Ae();return}try{let j=v;const x=await fetch("/api/applications/unread-count",{headers:{Authorization:`Bearer ${P}`}});if(x.status===401||x.status===403){Ae();return}if(x.ok){const{count:D}=await x.json();j=Number(D)||0,S(j)}const _=await fetch(`/api/sitemap?v=${Date.now()}`);if(_.ok){const D=await _.json();let k=Array.isArray(D)?D:[];k=k.map(Q=>vn(Q)).map(Q=>Ks(Q));const W=k.find(Q=>Q.path==="/applications");W?j>0?W.badge={text:j.toString(),color:"bg-red-500"}:delete W.badge:k=[...k,{title:"Müraciətlər",path:"/applications",icon:"Inbox",badge:j>0?{text:j.toString(),color:"bg-red-500"}:void 0}];const le=[{title:"SEO Ayarları",path:"/general-settings?tab=seo",icon:"Globe"},{title:"Ümumi Parametrlər",path:"/general-settings?tab=general",icon:"Sliders"},{title:"Əlaqə və Sosial",path:"/general-settings?tab=contact",icon:"Phone"},{title:"Marquee Ayarları",path:"/general-settings?tab=marquee",icon:"Activity"},{title:"Tətbiq Ayarları",path:"/general-settings?tab=stats",icon:"Activity"},{title:"Gizlənən Ayarlar",path:"/general-settings?tab=hidden",icon:"Eye"}],O=k.filter(Q=>Ss(Q));k=k.filter(Q=>!Ss(Q));const Ge={title:"Sistem Ayarları",icon:"Settings",path:"/general-settings?tab=general",children:xa([...le,...O.flatMap(Q=>Q.children||[])])},Le=k.findIndex(Q=>nt(Q.path||"")==="/users-management");Le>=0?k.splice(Le+1,0,Ge):k.push(Ge);const Ce=new Map;for(const Q of k){const Ie=nt(Q.title||"");if(!Ie)continue;const pe=Ce.get(Ie);if(!pe){Ce.set(Ie,{...Q,children:xa(Q.children||[])});continue}Ce.set(Ie,{...pe,path:pe.path||Q.path,icon:pe.icon||Q.icon,badge:pe.badge||Q.badge,children:xa([...pe.children||[],...Q.children||[]])})}m(Array.from(Ce.values()))}}catch(j){console.error("Fetch data failed",j)}finally{A(!1)}};I();const U=setInterval(I,3e4);return()=>clearInterval(U)},[s]),b)return e.jsx("div",{style:{display:"flex",height:"100vh",width:"100vw",alignItems:"center",justifyContent:"center",background:"#f4f6f9",color:"#3b82f6",fontSize:"1.2rem",fontWeight:"600"},children:"Yüklənir..."});const C=!d||d.length===0;return e.jsx(Ii,{basename:"/admin",children:e.jsxs("div",{className:"app-container",children:[e.jsx(Vl,{containerStyle:{zIndex:10001},position:"top-right",reverseOrder:!1}),s?e.jsxs(e.Fragment,{children:[e.jsx(nl,{menuItems:d,user:s,onLogout:()=>{Ae(),l(null)}}),e.jsxs("main",{className:"main-content",children:[e.jsx(rl,{user:s}),e.jsx("div",{className:"content-body",children:e.jsx(ki,{children:C?e.jsx(st,{path:"*",element:e.jsx(un,{})}):e.jsxs(e.Fragment,{children:[e.jsx(st,{path:"/",element:e.jsx(dn,{})}),e.jsx(st,{path:"/applications",element:e.jsx(xn,{})}),e.jsx(st,{path:"/general-settings",element:e.jsx(fn,{})}),e.jsx(st,{path:"/users-management",element:e.jsx(cn,{currentUser:s})}),e.jsx(st,{path:"*",element:e.jsx("div",{className:"fade-in",children:e.jsx("h1",{children:"Səhifə tapılmadı"})})})]})})})]})]}):e.jsx(pn,{onLogin:l})]})})};Oi.createRoot(document.getElementById("root")).render(e.jsx(f.StrictMode,{children:e.jsx(yn,{})}));
