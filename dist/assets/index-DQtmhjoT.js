import{u as ps,j as e,N as ci,r as g,B as ui,a as pi,b as Qe,d as xi}from"./vendor-react-B0Xi4u7S.js";import{H as mi,L as hi,P as Bt,G as ne,S as xa,I as ma,M as fi,U as gi,a as ha,B as bi,V as ns,b as he,A as vi,T as ot,C as fa,c as wt,d as yi,F as ct,e as ji,f as Si,g as Ai,h as ga,i as Ni,j as ba,k as Ri,l as xs,E as Ei,m as ms,n as H,o as W,p as Ti,q as rt,r as dt,X as rs,s as Li,t as aa,u as Ci,v as pt,w as ds,x as ki,y as Ii,z as Oi,D as _i,J as va,K as Di,N as Mi,O as wi,Q as es,R as ia,W as zi}from"./vendor-ui-CJ6XshMZ.js";import{i as Bi}from"./vendor-editor-BvsJV83P.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const b of document.querySelectorAll('link[rel="modulepreload"]'))m(b);new MutationObserver(b=>{for(const v of b)if(v.type==="childList")for(const f of v.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&m(f)}).observe(document,{childList:!0,subtree:!0});function r(b){const v={};return b.integrity&&(v.integrity=b.integrity),b.referrerPolicy&&(v.referrerPolicy=b.referrerPolicy),b.crossOrigin==="use-credentials"?v.credentials="include":b.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function m(b){if(b.ep)return;b.ep=!0;const v=r(b);fetch(b.href,v)}})();const Ui=({menuItems:s,user:l,onLogout:r})=>{const m=l?.role||"secondary",b=ps(),v=o=>o&&(o==="/frontend-settings"||o==="/admin/frontend-settings"||o==="/general-settings"||o==="/admin/general-settings"?"/general-settings?tab=general":o),f={Layout:Bt,Home:Ri,Menu:ba,Maximize:Ni,Type:ga,Star:Ai,Anchor:Si,Info:ji,FileText:ct,List:yi,Calendar:wt,Clock:fa,Trophy:ot,Award:vi,Image:he,Video:ns,BookOpen:bi,Phone:ha,Users:gi,Monitor:fi,Inbox:ma,Settings:xa,Globe:ne},A=({name:o,className:x})=>{const k=f[o];return k?e.jsx(k,{className:x,size:18}):e.jsx(Bt,{className:x,size:18})},S=o=>{const x=v(o);return x?x.includes("?")?b.pathname+b.search===x:b.pathname===x:!1},y=(o,x,k)=>e.jsx("li",{className:"sidebar-item",children:e.jsxs(ci,{to:v(k||o.path)||"#",className:()=>`sidebar-link ${S(v(k||o.path))?"active":""}`,children:[(o.icon||x)&&e.jsx(A,{name:o.icon||x||"",className:"sidebar-icon"}),e.jsx("span",{className:"sidebar-text",children:o.title}),o.badge&&e.jsx("span",{className:`badge ${o.badge.color} sidebar-badge`,children:o.badge.text})]})},o.title),_=o=>{const x=["/frontend-settings","/general-settings","/users-management"];return o.map(R=>{const I=R.children?_(R.children):void 0,B=v(R.path);return m==="secondary"&&x.some(X=>B?.toLowerCase().startsWith(X))||!B&&(!I||I.length===0)?null:{...R,path:B,children:I}}).filter(Boolean)},D=o=>{const x=new Set,k=R=>(R||"").toLocaleLowerCase("az").normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim();return o.filter(R=>{const I=k(R.title||"");return!I||x.has(I)?!1:(x.add(I),!0)})};return e.jsxs("aside",{className:"sidebar",children:[e.jsx("div",{className:"sidebar-header",children:e.jsxs("div",{className:"brand-logo",children:[e.jsx(mi,{className:"logo-icon",size:24,fill:"currentColor"}),e.jsxs("span",{className:"brand-name",children:["FORSAJ",e.jsx("span",{children:"PANEL"})]})]})}),e.jsxs("div",{className:"sidebar-content",children:[e.jsx("div",{className:"sidebar-section-label",children:"ƏSAS NAVİQASİYA"}),e.jsxs("ul",{className:"sidebar-menu",children:[D(_(s)).map(o=>{const x=o.children?.find(k=>!!k.path)?.path;return y(o,o.icon,o.path||x)}),s.length===0&&e.jsx("div",{className:"empty-sidebar-msg",children:e.jsx("p",{children:"Menyu boşdur"})})]})]}),e.jsx("div",{className:"sidebar-footer",children:e.jsxs("button",{className:"logout-btn",onClick:r,children:[e.jsx(hi,{size:18}),e.jsx("span",{children:"Çıxış"})]})})]})},Pi=({user:s})=>e.jsxs("header",{className:"header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"icon-btn toggle-sidebar",children:e.jsx(ba,{size:20})}),e.jsxs("div",{className:"header-search",children:[e.jsx(xs,{size:18,className:"search-icon"}),e.jsx("input",{type:"text",placeholder:"Hər şeyi axtar..."})]})]}),e.jsxs("div",{className:"header-right",children:[e.jsxs("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"view-site-btn",children:[e.jsx(Ei,{size:16})," Sayta Bax"]}),e.jsxs("div",{className:"header-profile",children:[e.jsxs("div",{className:"profile-info",children:[e.jsx("span",{className:"profile-name",children:s?.name||"Forsaj İdarəçisi"}),e.jsx("span",{className:"profile-status",children:s?.role==="master"?"Baş Admin":"Sayt Redaktoru"})]}),e.jsx("img",{src:`https://ui-avatars.com/api/?name=${s?.name||"Admin"}&background=random`,alt:"Profil"})]})]})]});let Fi={data:""},Yi=s=>{if(typeof window=="object"){let l=(s?s.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return l.nonce=window.__nonce__,l.parentNode||(s||document.head).appendChild(l),l.firstChild}return s||Fi},Ki=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,$i=/\/\*[^]*?\*\/|  +/g,la=/\n+/g,Ne=(s,l)=>{let r="",m="",b="";for(let v in s){let f=s[v];v[0]=="@"?v[1]=="i"?r=v+" "+f+";":m+=v[1]=="f"?Ne(f,v):v+"{"+Ne(f,v[1]=="k"?"":l)+"}":typeof f=="object"?m+=Ne(f,l?l.replace(/([^,])+/g,A=>v.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,S=>/&/.test(S)?S.replace(/&/g,A):A?A+" "+S:S)):v):f!=null&&(v=/^--/.test(v)?v:v.replace(/[A-Z]/g,"-$&").toLowerCase(),b+=Ne.p?Ne.p(v,f):v+":"+f+";")}return r+(l&&b?l+"{"+b+"}":b)+m},ve={},ya=s=>{if(typeof s=="object"){let l="";for(let r in s)l+=r+ya(s[r]);return l}return s},Hi=(s,l,r,m,b)=>{let v=ya(s),f=ve[v]||(ve[v]=(S=>{let y=0,_=11;for(;y<S.length;)_=101*_+S.charCodeAt(y++)>>>0;return"go"+_})(v));if(!ve[f]){let S=v!==s?s:(y=>{let _,D,o=[{}];for(;_=Ki.exec(y.replace($i,""));)_[4]?o.shift():_[3]?(D=_[3].replace(la," ").trim(),o.unshift(o[0][D]=o[0][D]||{})):o[0][_[1]]=_[2].replace(la," ").trim();return o[0]})(s);ve[f]=Ne(b?{["@keyframes "+f]:S}:S,r?"":"."+f)}let A=r&&ve.g?ve.g:null;return r&&(ve.g=ve[f]),((S,y,_,D)=>{D?y.data=y.data.replace(D,S):y.data.indexOf(S)===-1&&(y.data=_?S+y.data:y.data+S)})(ve[f],l,m,A),f},Gi=(s,l,r)=>s.reduce((m,b,v)=>{let f=l[v];if(f&&f.call){let A=f(r),S=A&&A.props&&A.props.className||/^go/.test(A)&&A;f=S?"."+S:A&&typeof A=="object"?A.props?"":Ne(A,""):A===!1?"":A}return m+b+(f??"")},"");function Ft(s){let l=this||{},r=s.call?s(l.p):s;return Hi(r.unshift?r.raw?Gi(r,[].slice.call(arguments,1),l.p):r.reduce((m,b)=>Object.assign(m,b&&b.call?b(l.p):b),{}):r,Yi(l.target),l.g,l.o,l.k)}let ja,os,cs;Ft.bind({g:1});let Se=Ft.bind({k:1});function qi(s,l,r,m){Ne.p=l,ja=s,os=r,cs=m}function Re(s,l){let r=this||{};return function(){let m=arguments;function b(v,f){let A=Object.assign({},v),S=A.className||b.className;r.p=Object.assign({theme:os&&os()},A),r.o=/ *go\d+/.test(S),A.className=Ft.apply(r,m)+(S?" "+S:"");let y=s;return s[0]&&(y=A.as||s,delete A.as),cs&&y[0]&&cs(A),ja(y,A)}return b}}var Qi=s=>typeof s=="function",Ut=(s,l)=>Qi(s)?s(l):s,Vi=(()=>{let s=0;return()=>(++s).toString()})(),Sa=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let l=matchMedia("(prefers-reduced-motion: reduce)");s=!l||l.matches}return s}})(),Zi=20,hs="default",Aa=(s,l)=>{let{toastLimit:r}=s.settings;switch(l.type){case 0:return{...s,toasts:[l.toast,...s.toasts].slice(0,r)};case 1:return{...s,toasts:s.toasts.map(f=>f.id===l.toast.id?{...f,...l.toast}:f)};case 2:let{toast:m}=l;return Aa(s,{type:s.toasts.find(f=>f.id===m.id)?1:0,toast:m});case 3:let{toastId:b}=l;return{...s,toasts:s.toasts.map(f=>f.id===b||b===void 0?{...f,dismissed:!0,visible:!1}:f)};case 4:return l.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(f=>f.id!==l.toastId)};case 5:return{...s,pausedAt:l.time};case 6:let v=l.time-(s.pausedAt||0);return{...s,pausedAt:void 0,toasts:s.toasts.map(f=>({...f,pauseDuration:f.pauseDuration+v}))}}},zt=[],Na={toasts:[],pausedAt:void 0,settings:{toastLimit:Zi}},fe={},Ra=(s,l=hs)=>{fe[l]=Aa(fe[l]||Na,s),zt.forEach(([r,m])=>{r===l&&m(fe[l])})},Ea=s=>Object.keys(fe).forEach(l=>Ra(s,l)),Wi=s=>Object.keys(fe).find(l=>fe[l].toasts.some(r=>r.id===s)),Yt=(s=hs)=>l=>{Ra(l,s)},Xi={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Ji=(s={},l=hs)=>{let[r,m]=g.useState(fe[l]||Na),b=g.useRef(fe[l]);g.useEffect(()=>(b.current!==fe[l]&&m(fe[l]),zt.push([l,m]),()=>{let f=zt.findIndex(([A])=>A===l);f>-1&&zt.splice(f,1)}),[l]);let v=r.toasts.map(f=>{var A,S,y;return{...s,...s[f.type],...f,removeDelay:f.removeDelay||((A=s[f.type])==null?void 0:A.removeDelay)||s?.removeDelay,duration:f.duration||((S=s[f.type])==null?void 0:S.duration)||s?.duration||Xi[f.type],style:{...s.style,...(y=s[f.type])==null?void 0:y.style,...f.style}}});return{...r,toasts:v}},el=(s,l="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:l,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0,...r,id:r?.id||Vi()}),xt=s=>(l,r)=>{let m=el(l,s,r);return Yt(m.toasterId||Wi(m.id))({type:2,toast:m}),m.id},q=(s,l)=>xt("blank")(s,l);q.error=xt("error");q.success=xt("success");q.loading=xt("loading");q.custom=xt("custom");q.dismiss=(s,l)=>{let r={type:3,toastId:s};l?Yt(l)(r):Ea(r)};q.dismissAll=s=>q.dismiss(void 0,s);q.remove=(s,l)=>{let r={type:4,toastId:s};l?Yt(l)(r):Ea(r)};q.removeAll=s=>q.remove(void 0,s);q.promise=(s,l,r)=>{let m=q.loading(l.loading,{...r,...r?.loading});return typeof s=="function"&&(s=s()),s.then(b=>{let v=l.success?Ut(l.success,b):void 0;return v?q.success(v,{id:m,...r,...r?.success}):q.dismiss(m),b}).catch(b=>{let v=l.error?Ut(l.error,b):void 0;v?q.error(v,{id:m,...r,...r?.error}):q.dismiss(m)}),s};var tl=1e3,sl=(s,l="default")=>{let{toasts:r,pausedAt:m}=Ji(s,l),b=g.useRef(new Map).current,v=g.useCallback((D,o=tl)=>{if(b.has(D))return;let x=setTimeout(()=>{b.delete(D),f({type:4,toastId:D})},o);b.set(D,x)},[]);g.useEffect(()=>{if(m)return;let D=Date.now(),o=r.map(x=>{if(x.duration===1/0)return;let k=(x.duration||0)+x.pauseDuration-(D-x.createdAt);if(k<0){x.visible&&q.dismiss(x.id);return}return setTimeout(()=>q.dismiss(x.id,l),k)});return()=>{o.forEach(x=>x&&clearTimeout(x))}},[r,m,l]);let f=g.useCallback(Yt(l),[l]),A=g.useCallback(()=>{f({type:5,time:Date.now()})},[f]),S=g.useCallback((D,o)=>{f({type:1,toast:{id:D,height:o}})},[f]),y=g.useCallback(()=>{m&&f({type:6,time:Date.now()})},[m,f]),_=g.useCallback((D,o)=>{let{reverseOrder:x=!1,gutter:k=8,defaultPosition:R}=o||{},I=r.filter(X=>(X.position||R)===(D.position||R)&&X.height),B=I.findIndex(X=>X.id===D.id),G=I.filter((X,re)=>re<B&&X.visible).length;return I.filter(X=>X.visible).slice(...x?[G+1]:[0,G]).reduce((X,re)=>X+(re.height||0)+k,0)},[r]);return g.useEffect(()=>{r.forEach(D=>{if(D.dismissed)v(D.id,D.removeDelay);else{let o=b.get(D.id);o&&(clearTimeout(o),b.delete(D.id))}})},[r,v]),{toasts:r,handlers:{updateHeight:S,startPause:A,endPause:y,calculateOffset:_}}},al=Se`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,il=Se`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ll=Se`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,nl=Re("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${al} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${il} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${ll} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,rl=Se`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,dl=Re("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${rl} 1s linear infinite;
`,ol=Se`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,cl=Se`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ul=Re("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ol} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${cl} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,pl=Re("div")`
  position: absolute;
`,xl=Re("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,ml=Se`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,hl=Re("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${ml} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,fl=({toast:s})=>{let{icon:l,type:r,iconTheme:m}=s;return l!==void 0?typeof l=="string"?g.createElement(hl,null,l):l:r==="blank"?null:g.createElement(xl,null,g.createElement(dl,{...m}),r!=="loading"&&g.createElement(pl,null,r==="error"?g.createElement(nl,{...m}):g.createElement(ul,{...m})))},gl=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,bl=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,vl="0%{opacity:0;} 100%{opacity:1;}",yl="0%{opacity:1;} 100%{opacity:0;}",jl=Re("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Sl=Re("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Al=(s,l)=>{let r=s.includes("top")?1:-1,[m,b]=Sa()?[vl,yl]:[gl(r),bl(r)];return{animation:l?`${Se(m)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Se(b)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Nl=g.memo(({toast:s,position:l,style:r,children:m})=>{let b=s.height?Al(s.position||l||"top-center",s.visible):{opacity:0},v=g.createElement(fl,{toast:s}),f=g.createElement(Sl,{...s.ariaProps},Ut(s.message,s));return g.createElement(jl,{className:s.className,style:{...b,...r,...s.style}},typeof m=="function"?m({icon:v,message:f}):g.createElement(g.Fragment,null,v,f))});qi(g.createElement);var Rl=({id:s,className:l,style:r,onHeightUpdate:m,children:b})=>{let v=g.useCallback(f=>{if(f){let A=()=>{let S=f.getBoundingClientRect().height;m(s,S)};A(),new MutationObserver(A).observe(f,{subtree:!0,childList:!0,characterData:!0})}},[s,m]);return g.createElement("div",{ref:v,className:l,style:r},b)},El=(s,l)=>{let r=s.includes("top"),m=r?{top:0}:{bottom:0},b=s.includes("center")?{justifyContent:"center"}:s.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Sa()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${l*(r?1:-1)}px)`,...m,...b}},Tl=Ft`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,_t=16,Ll=({reverseOrder:s,position:l="top-center",toastOptions:r,gutter:m,children:b,toasterId:v,containerStyle:f,containerClassName:A})=>{let{toasts:S,handlers:y}=sl(r,v);return g.createElement("div",{"data-rht-toaster":v||"",style:{position:"fixed",zIndex:9999,top:_t,left:_t,right:_t,bottom:_t,pointerEvents:"none",...f},className:A,onMouseEnter:y.startPause,onMouseLeave:y.endPause},S.map(_=>{let D=_.position||l,o=y.calculateOffset(_,{reverseOrder:s,gutter:m,defaultPosition:l}),x=El(D,o);return g.createElement(Rl,{id:_.id,key:_.id,onHeightUpdate:y.updateHeight,className:_.visible?Tl:"",style:x},_.type==="custom"?Ut(_.message,_):b?b(_):g.createElement(Nl,{toast:_,position:D}))}))},E=q;const Cl={toolbar:[[{header:[2,3,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]},na=["Shield","Users","Leaf","Zap","Target","Globe","Star","Flag"],ts=["Info","Settings","ShieldAlert","Leaf","FileText"],Dt=s=>{if(!s)return"";const l=s.replace(/\\+\[/g,"[").replace(/\\+\]/g,"]");if(!/\[(\/?)(B|I|U|S|CENTER|FONT|URL|IMG|COLOR|SIZE|QUOTE|CODE|LIST|\*)[\]=\s\w"':#.,+-]*\]/i.test(l))return l;let m=l;return m=m.replace(/\[CENTER\]([\s\S]*?)\[\/CENTER\]/gi,'<div style="text-align:center;">$1</div>'),m=m.replace(/\[FONT=([^\]]+)\]([\s\S]*?)\[\/FONT\]/gi,'<span style="font-family:$1;">$2</span>'),m=m.replace(/\[B\]([\s\S]*?)\[\/B\]/gi,"<strong>$1</strong>"),m=m.replace(/\[I\]([\s\S]*?)\[\/I\]/gi,"<em>$1</em>"),m=m.replace(/\[U\]([\s\S]*?)\[\/U\]/gi,'<span style="text-decoration:underline;">$1</span>'),m=m.replace(/\[S\]([\s\S]*?)\[\/S\]/gi,"<strike>$1</strike>"),m=m.replace(/\[URL=([^\]]+)\]([\s\S]*?)\[\/URL\]/gi,'<a href="$1" target="_blank" rel="noopener noreferrer">$2</a>'),m=m.replace(/\[IMG\]([\s\S]*?)\[\/IMG\]/gi,'<img src="$1" style="max-width:100%;" />'),m=m.replace(/\[COLOR=([^\]]+)\]([\s\S]*?)\[\/COLOR\]/gi,'<span style="color:$1;">$2</span>'),m=m.replace(/\[SIZE=([^\]]+)\]([\s\S]*?)\[\/SIZE\]/gi,'<span style="font-size:$1px;">$2</span>'),m=m.replace(/\[QUOTE\]([\s\S]*?)\[\/QUOTE\]/gi,"<blockquote>$1</blockquote>"),m=m.replace(/\[CODE\]([\s\S]*?)\[\/CODE\]/gi,"<pre><code>$1</code></pre>"),m=m.replace(/\r?\n/g,"<br />"),m},Mt=({value:s,onChange:l,id:r,readOnly:m=!1})=>e.jsx("div",{className:"quill-editor-wrapper",id:r,children:e.jsx(Bi,{theme:"snow",value:s||"",onChange:l,modules:m?{toolbar:!1}:Cl,readOnly:m,placeholder:"Məzmunu daxil edin..."})}),Pe=s=>{if(/^[A-Z0-9_]+$/.test(s.id))return s.id.trim();const l=(s.label||"").trim();return l.startsWith("KEY:")?l.replace(/^KEY:\s*/i,"").trim():""},kl=/\b[A-Z0-9]+(?:_[A-Z0-9]+)+\b/,Pt=s=>kl.test((s||"").trim()),ra=s=>s.replace(/_/g," ").replace(/\s+/g," ").trim(),oe=s=>{if(!s)return"";let l=s;for(let m=0;m<4;m++){const v=(new DOMParser().parseFromString(l,"text/html").body.textContent||"").trim();if(!v||v===l)break;l=v}return(new DOMParser().parseFromString(l,"text/html").body.textContent||"").replace(/\u00a0/g," ").replace(/\s+/g," ").trim()},Be=s=>{const l=(s||"").trim();if(!l)return"";if(/^(https?:)?\/\//i.test(l))return l;const r=l.startsWith("/")?l:`/${l}`;return`${window.location.origin}${r}`},Ta=s=>/&(?:lt|gt|nbsp|quot|amp);|<\/?[a-z][^>]*>/i.test(s||""),Il=s=>/<(ul|ol|li|a|img|iframe|video|table|h[1-6])\b|\[(b|i|u|url|img|center)\]/i.test(s||""),Ol=s=>!!(Pe(s)||Ue(s.id)||s.id.startsWith("txt-")||s.id.startsWith("val-")||s.id.startsWith("RULES_")||s.id.startsWith("PAGE_")||s.id.startsWith("BTN_")||s.id.startsWith("DOC_")||Ta(s.value||"")&&!Il(s.value||"")),ye="label-stat-",je="value-stat-",Ue=s=>s.startsWith(ye)||s.startsWith(je),da=s=>s.startsWith(ye)?s.slice(ye.length):s.startsWith(je)?s.slice(je.length):"",Ve=(s,l)=>Pe(s)?l==="value":!0,_l=s=>!Pe(s),oa=s=>{const l=Pe(s);return!!(l&&l.includes("_")&&Pt(oe(s.value||""))||!l&&Pt(s.value))},ss=/^PARTNER_(\d+)_(NAME|TAG|ICON|USE_IMAGE|IMAGE_ID)$/,Dl=/^RULE_TAB_(\d+)_(ID|TITLE|ICON|DOC_NAME|DOC_BUTTON|DOC_URL)$/,Ml=/^RULE_TAB_(\d+)_ITEM_(\d+)_(TITLE|DESC)$/,as=/^RULE_TAB_\d+_(?:ID|TITLE|ICON|DOC_NAME|DOC_BUTTON|DOC_URL|ITEM_\d+_(?:TITLE|DESC))$/,wl=s=>s==="NAME"?"name":s==="TAG"?"tag":s==="ICON"?"icon":s==="USE_IMAGE"?"useImage":s==="IMAGE_ID"?"imageId":null,is={hero:"Hero Bölməsi",marquee:"Marquee Yazısı",navbar:"Menyu və Naviqasiya",about:"HAQQIMIZDA",mission_vision:"Missiya və Vizyon",values:"Dəyərlərimiz",eventspage:"Tədbirlər Səhifəsi",newspage:"Xəbər Səhifəsi",gallerypage:"Qalereya Səhifəsi",contactpage:"Əlaqə Səhifəsi",rulespage:"Qaydalar Səhifəsi",news:"Xəbərlər",drivers:"Sürücülər",categoryleaders:"Kateqoriya Liderləri",gallery:"Qalereya",videos:"Videolar",videoarchive:"Video Arxiv",footer:"Footer",partners:"Tərəfdaşlar",offroadinfo:"Offroad Nədir?",whatisoffroad:"Offroad Nədir?",nextrace:"Növbəti Yarış",site:"Sayt Ayarları",settings:"Ümumi Parametrlər",general:"SİSTEM AYARLARI",app:"Tətbiq Ayarları"},Ze={home:["navbar","hero","marquee","categoryleaders","footer"],abouttab:["about"],newstab:["newspage"],eventstab:["eventspage"],driverstab:["drivers"],gallerytab:["gallerypage","gallery","videos","videoarchive"],rulestab:["rulespage"],contacttab:["contactpage"]},La=Object.entries(Ze).reduce((s,[l,r])=>(r.forEach(m=>{s[m]=l}),s),{}),ca=s=>{if(!s)return[];if(Ze[s])return Ze[s];const l=La[s];return l&&Ze[l]?Ze[l]:[s]},ua="forsaj_site_content_version",te=(s,l)=>Number.isFinite(s)?s:l,zl=()=>{const[s,l]=g.useState([]),[r,m]=g.useState(0),[b,v]=g.useState(!1),[f,A]=g.useState(!1),[S,y]=g.useState(0),[_,D]=g.useState(""),[o,x]=g.useState(!1),[k,R]=g.useState(!1),[I,B]=g.useState(!1),[G,X]=g.useState([]),[re,Xe]=g.useState(null),[Ee,Te]=g.useState(""),[w,Fe]=g.useState(""),[se,mt]=g.useState([]),[Ye,ht]=g.useState(null),[K,ft]=g.useState({}),[Le,gt]=g.useState([]),[Ke,bt]=g.useState(null),[Q,vt]=g.useState({}),[Ce,yt]=g.useState([]),[Je,Kt]=g.useState(null),[de,$t]=g.useState({}),Ht=ps(),fs=new URLSearchParams(Ht.search),Gt=fs.get("mode"),Ae=fs.get("page"),[V,ce]=g.useState("extract"),[qt,jt]=g.useState([]),gs=g.useRef(!1),[et,bs]=g.useState(null),[ke,Qt]=g.useState({});g.useEffect(()=>{ce(Gt||"extract")},[Gt,Ae]);const[ue,Ie]=g.useState([]),[J,tt]=g.useState(null),[$e,st]=g.useState(null),[le,He]=g.useState({}),vs=async()=>{try{const a=await(await fetch("/api/site-content")).json();if(Array.isArray(a)){const p=["hero","marquee","navbar","about","mission_vision","values","rulespage","eventspage","newspage","gallerypage","contactpage","news","drivers","categoryleaders","gallery","videos","videoarchive","footer","partners","offroadinfo","whatisoffroad","nextrace","site","settings","general","app"],j=[...a],T=N=>{const L=N.sections||[],C=N.images||[],O=(U,F,$)=>{L.some(qe=>qe.id===U)||L.push({id:U,type:"text",label:F,value:$})},ee=(U,F,$)=>{C.some(qe=>qe.id===U)||C.push({id:U,path:F,alt:$,type:"remote",order:C.length})};if(O("txt-est-2018-motorsp-949","About Üst Başlıq","EST. 2018 // MOTORSPORT MƏRKƏZİ"),O("txt-forsaj-club-az-rba-66","About Ana Başlıq",'"FORSAJ CLUB" AZƏRBAYCANIN OFFROAD MƏDƏNİYYƏTİNİ PEŞƏKAR SƏVİYYƏYƏ ÇATDIRMAQ ÜÇÜN YARADILMIŞDIR.'),O("txt-bi-zi-m-mi-ssi-yamiz-424","Missiya Başlığı","BİZİM MİSSİYAMIZ"),O("txt-az-rbaycan-n-h-r-bir-45","Missiya Təsviri","Azərbaycanın hər bir guşəsində offroad idmanını təbliğ etmək, yerli pilotları beynəlxalq standartlara uyğun yetişdirmək və təbiəti qoruyaraq ekstremal adrenalin təcrübəsi bəxş etmək."),O("txt-h-d-fi-mi-z-dakar-ral-50","Missiya Hədəf Mətni","HƏDƏFİMİZ: DAKAR RALLİ 2026"),O("txt-bi-zi-m-baxi-imiz-944","Vizyon Başlığı","BİZİM BAXIŞIMIZ"),O("txt-regionun-n-b-y-k-mo-901","Vizyon Təsviri","Regionun ən böyük motorsport hubuna çevrilmək, rəqəmsal və fiziki infrastrukturlarla pilotlarımızı dəstəkləmək və motorsportu hər kəs üçün əlçatan bir ehtirasa çevirmək."),O("txt-qafqazin-li-der-klubu-758","Vizyon Şüarı","QAFQAZIN LİDER KLUBUNA ÇEVRİLMƏK"),O("txt-fundamental-pri-nsi-pl-219","Dəyərlər Alt Başlıq","FUNDAMENTAL PRİNSİPLƏR"),O("txt-sas-d-y-rl-ri-mi-z-482","Dəyərlər Başlığı","ƏSAS DƏYƏRLƏRİMİZ"),O("val-icon-1","Dəyər 1 İkonu","Shield"),O("val-title-1","Dəyər 1 Başlıq","TƏHLÜKƏSİZLİK"),O("val-desc-1","Dəyər 1 Təsvir","EKSTREMAL İDMANDA CAN SAĞLIĞI BİZİM BİR NÖMRƏLİ QAYDAMIZDIR. BÜTÜN TEXNİKALARIMIZ FIA STANDARTLARINA UYĞUN YOXLANILIR."),O("val-icon-2","Dəyər 2 İkonu","Users"),O("val-title-2","Dəyər 2 Başlıq","İCMA RUHU"),O("val-desc-2","Dəyər 2 Təsvir","FORSAJ BİR KLUBDAN DAHA ÇOX, SADİQ VƏ BÖYÜK BİR AİLƏDİR. BİRİMİZ HAMIMIZ, HAMIMIZ BİRİMİZ ÜÇÜN!"),O("val-icon-3","Dəyər 3 İkonu","Leaf"),O("val-title-3","Dəyər 3 Başlıq","TƏBİƏTİ QORU"),O("val-desc-3","Dəyər 3 Təsvir","BİZ OFFROAD EDƏRKƏN TƏBİƏTƏ ZƏRƏR VERMƏMƏYİ ÖZÜMÜZƏ BORC BİLİRİK. EKOLOJİ BALANS BİZİM ÜÇÜN MÜQƏDDƏSDİR."),O("val-icon-4","Dəyər 4 İkonu","Zap"),O("val-title-4","Dəyər 4 Başlıq","MÜKƏMMƏLLİK"),O("val-desc-4","Dəyər 4 Təsvir","HƏR YARIŞDA, HƏR DÖNGƏDƏ DAHA YAXŞI OLMAĞA ÇALIŞIRIQ. TƏLİMLƏRİMİZ PEŞƏKAR İNSTRUKTORLAR TƏRƏFİNDƏN İDARƏ OLUNUR."),L.some(U=>U.id.includes("label-stat"))&&L.some(U=>U.id.includes("value-stat"))){N.sections=L,ee("img-992","https://images.unsplash.com/photo-1541447271487-09612b3f49f7?q=80&w=1974&auto=format&fit=crop","Forsaj Club Detail"),N.images=C;return}[{label:"PİLOTLAR",value:"140+"},{label:"YARIŞLAR",value:"50+"},{label:"GƏNCLƏR",value:"20+"}].forEach((U,F)=>{const $=`${F+1}`;L.push({id:`label-stat-${$}`,type:"text",label:`Statistika Etiketi ${F+1}`,value:U.label}),L.push({id:`value-stat-${$}`,type:"text",label:`Statistika Dəyəri ${F+1}`,value:U.value})}),N.sections=L,ee("img-992","https://images.unsplash.com/photo-1541447271487-09612b3f49f7?q=80&w=1974&auto=format&fit=crop","Forsaj Club Detail"),N.images=C},z=N=>{const L=N.sections||[],C=N.images||[],O=(Z,U,F)=>{L.some($=>$.id===Z)||L.push({id:Z,type:"text",label:U,value:F})},ee=Z=>{C.some(U=>U.id===Z)||C.push({id:Z,path:"",alt:Z,type:"local",order:C.length})};O("SECTION_TITLE","Bölmə Başlığı","RƏSMİ TƏRƏFDAŞLARIMIZ"),[{name:"AZMF",tag:"OFFICIAL PARTNER",icon:"ShieldCheck"},{name:"OFFROAD AZ",tag:"OFFICIAL PARTNER",icon:"Truck"},{name:"GLOBAL 4X4",tag:"OFFICIAL PARTNER",icon:"Globe"},{name:"RACE TECH",tag:"OFFICIAL PARTNER",icon:"Zap"}].forEach((Z,U)=>{const F=U+1;O(`PARTNER_${F}_NAME`,`Tərəfdaş ${F} Ad`,Z.name),O(`PARTNER_${F}_TAG`,`Tərəfdaş ${F} Etiket`,Z.tag),O(`PARTNER_${F}_ICON`,`Tərəfdaş ${F} İkon`,Z.icon),O(`PARTNER_${F}_USE_IMAGE`,`Tərəfdaş ${F} Görsel İstifadə`,"false"),O(`PARTNER_${F}_IMAGE_ID`,`Tərəfdaş ${F} Görsel ID`,`partner-image-${F}`),ee(`partner-image-${F}`)}),N.sections=L,N.images=C},M=N=>{const L=N.sections||[],C=(O,ee,be,Z)=>{const U=L.findIndex(F=>F.id===O);if(U===-1){L.push({id:O,type:"text",label:ee,value:be,...Z?{url:Z}:{}});return}Z&&!L[U].url&&(L[U].url=Z)};C("text-3","Hero Düymə 1","YARIŞLARA BAX","events"),C("text-4","Hero Düymə 2","HAQQIMIZDA","about"),N.sections=L},P=(N,L)=>{const C=N.sections||[];L.forEach(O=>{const ee=C.findIndex(be=>be.id===O.id);if(ee===-1){C.push({id:O.id,type:"text",label:O.label,value:O.value,...O.url?{url:O.url}:{}});return}O.url&&!C[ee].url&&(C[ee].url=O.url)}),N.sections=C},me=N=>{P(N,[{id:"PAGE_TITLE",label:"Səhifə Başlığı",value:"ƏLAQƏ"},{id:"PAGE_SUBTITLE",label:"Səhifə Alt Başlığı",value:"GET IN TOUCH // CONTACT CENTER"},{id:"OFFICE_LABEL",label:"Ofis Bölmə Başlığı",value:"BAŞ OFİS"},{id:"ADDRESS_LINE_1",label:"Ünvan Sətir 1",value:"AZADLIQ 102, BAKI"},{id:"ADDRESS_LINE_2",label:"Ünvan Sətir 2",value:"AZƏRBAYCAN // SECTOR_01"},{id:"WORK_HOURS",label:"İş Saatı",value:"09:00 - 18:00"},{id:"ONLINE_STATUS_LABEL",label:"Onlayn Status Mətni",value:"ONLINE"},{id:"PHONE_LABEL",label:"Telefon Başlığı",value:"ƏLAQƏ NÖMRƏSİ"},{id:"PHONE_NUMBER",label:"Telefon Nömrəsi",value:"+994 50 123 45 67"},{id:"EMAIL_LABEL",label:"E-poçt Başlığı",value:"E-POÇT ÜNVANI"},{id:"EMAIL_Address",label:"Əsas E-poçt Ünvanı",value:"PROTOCOL@FORSAJ.AZ"},{id:"DEPT_HQ_TITLE",label:"Departament 1 Başlıq",value:"BAŞ OFİS"},{id:"DEPT_HQ_DESC",label:"Departament 1 Təsvir",value:"ÜMUMİ SORĞULAR VƏ İDARƏETMƏ"},{id:"DEPT_HQ_EMAIL",label:"Departament 1 E-poçt",value:"HQ@FORSAJ.AZ"},{id:"DEPT_PR_TITLE",label:"Departament 2 Başlıq",value:"MEDİA VƏ PR"},{id:"DEPT_PR_DESC",label:"Departament 2 Təsvir",value:"MƏTBUAT VƏ ƏMƏKDAŞLIQ"},{id:"DEPT_PR_EMAIL",label:"Departament 2 E-poçt",value:"PR@FORSAJ.AZ"},{id:"DEPT_TECH_TITLE",label:"Departament 3 Başlıq",value:"TEXNİKİ DƏSTƏK"},{id:"DEPT_TECH_DESC",label:"Departament 3 Təsvir",value:"PİLOTLAR ÜÇÜN TEXNİKİ YARDIM"},{id:"DEPT_TECH_EMAIL",label:"Departament 3 E-poçt",value:"TECH@FORSAJ.AZ"},{id:"FORM_TITLE",label:"Form Başlığı",value:"MÜRACİƏT FORMU"},{id:"FORM_STATUS_LABEL",label:"Form Status Mətni",value:"STATUS: ONLINE"},{id:"FIELD_NAME_LABEL",label:"Ad Soyad Label",value:"AD VƏ SOYAD"},{id:"FIELD_NAME_PLACEHOLDER",label:"Ad Soyad Placeholder",value:"AD SOYAD DAXİL EDİN"},{id:"FIELD_CONTACT_LABEL",label:"Əlaqə Label",value:"ƏLAQƏ VASİTƏSİ"},{id:"FIELD_CONTACT_PLACEHOLDER",label:"Əlaqə Placeholder",value:"TELEFON VƏ YA EMAIL"},{id:"FIELD_TOPIC_LABEL",label:"Müraciət İstiqaməti Label",value:"MÜRACİƏT İSTİQAMƏTİ"},{id:"TOPIC_GENERAL",label:"Mövzu Seçimi 1",value:"ÜMUMİ SORĞU"},{id:"TOPIC_PILOT",label:"Mövzu Seçimi 2",value:"PİLOT QEYDİYYATI"},{id:"TOPIC_TECH",label:"Mövzu Seçimi 3",value:"TEXNİKİ YARDIM"},{id:"FIELD_MESSAGE_LABEL",label:"Mesaj Label",value:"MESAJINIZ"},{id:"FIELD_MESSAGE_PLACEHOLDER",label:"Mesaj Placeholder",value:"BURADA YAZIN..."},{id:"BTN_SEND",label:"Form Göndər Düyməsi",value:"MESAJI GÖNDƏR"},{id:"FORM_TOAST_REQUIRED",label:"Form Boş Sahə Xəbərdarlığı",value:"Zəhmət olmasa bütün sahələri doldurun."},{id:"FORM_TOAST_SUCCESS",label:"Form Uğurlu Göndəriş Mesajı",value:"Müraciətiniz uğurla göndərildi!"},{id:"FORM_TOAST_ERROR",label:"Form Xəta Mesajı",value:"Gondərilmə zamanı xəta baş verdi."},{id:"FOOTER_NEWSLETTER_TITLE",label:"Abunə Başlığı",value:"XƏBƏRDAR OL"},{id:"FOOTER_NEWSLETTER_DESC",label:"Abunə Təsviri",value:"Yarış təqvimi və xəbərlərdən anında xəbərdar olmaq üçün abunə olun."}])},nt=N=>{P(N,[{id:"PILOT_FORM_TOAST_REQUIRED",label:"Pilot Form Boş Sahə Xəbərdarlığı",value:"Zəhmət olmasa bütün sahələri doldurun."},{id:"PILOT_FORM_TOAST_SUCCESS",label:"Pilot Form Uğurlu Göndəriş Mesajı",value:"Qeydiyyat müraciətiniz uğurla göndərildi!"},{id:"PILOT_FORM_TOAST_ERROR",label:"Pilot Form Xəta Mesajı",value:"Gondərilmə zamanı xəta baş verdi."},{id:"PLACEHOLDER_PHONE",label:"Telefon Placeholder",value:"+994 -- --- -- --"},{id:"SPECTATOR_TICKET_URL",label:"İzləyici Bilet Linki",value:"https://iticket.az",url:"https://iticket.az"},{id:"CLUB_OPTION_1",label:"Klub Seçimi 1",value:"Fərdi İştirakçı"},{id:"CLUB_OPTION_2",label:"Klub Seçimi 2",value:"Club 4X4"},{id:"CLUB_OPTION_3",label:"Klub Seçimi 3",value:"Extreme 4X4"},{id:"CLUB_OPTION_4",label:"Klub Seçimi 4",value:"Forsaj Club"},{id:"CLUB_OPTION_5",label:"Klub Seçimi 5",value:"Offroad.az"},{id:"CLUB_OPTION_6",label:"Klub Seçimi 6",value:"Overland 4X4"},{id:"CLUB_OPTION_7",label:"Klub Seçimi 7",value:"PatrolClub.az"},{id:"CLUB_OPTION_8",label:"Klub Seçimi 8",value:"Victory Club"},{id:"CLUB_OPTION_9",label:"Klub Seçimi 9",value:"Zəfər 4X4 Club"}])},kt=N=>{P(N,[{id:"FOOTER_LOGO_ALT",label:"Footer Logo Alt",value:"Forsaj Logo"},{id:"FOOTER_ABOUT_TEXT",label:"Footer Haqqında Mətn",value:"Azərbaycanın ən prestijli motorsport mərkəzi. Sərhədsiz offroad həyəcanını bizimlə yaşayın."},{id:"FOOTER_ADDRESS_LABEL",label:"Footer Ünvan Başlığı",value:"ÜNVAN"},{id:"FOOTER_CONTACT_LABEL",label:"Footer Əlaqə Başlığı",value:"ƏLAQƏ"},{id:"FOOTER_NAV_TITLE",label:"Footer Naviqasiya Başlığı",value:"NAVİQASİYA"},{id:"FOOTER_MOTORSPORT_TITLE",label:"Footer Motorsport Başlığı",value:"MOTORSPORT"},{id:"FOOTER_NEWSLETTER_TITLE",label:"Footer Abunə Başlığı",value:"XƏBƏRDAR OL"},{id:"FOOTER_NEWSLETTER_DESC",label:"Footer Abunə Təsviri",value:"Yarış təqvimi və xəbərlərdən anında xəbərdar olmaq üçün abunə olun."},{id:"FOOTER_NEWSLETTER_PLACEHOLDER",label:"Footer Abunə Placeholder",value:"EMAIL DAXİL EDİN"},{id:"FOOTER_COPYRIGHT",label:"Footer Copyright",value:"© 2024 FORSAJ CLUB. ALL RIGHTS RESERVED."},{id:"FOOTER_PRIVACY_LABEL",label:"Footer Privacy Link Mətni",value:"Privacy Policy",url:"#"},{id:"FOOTER_TERMS_LABEL",label:"Footer Terms Link Mətni",value:"Terms of Service",url:"#"}])},ze=N=>{P(N,[{id:"LEADER_TITLE_SUFFIX",label:"Lider Başlıq Suffix",value:"LİDERİ"},{id:"EMPTY_DRIVER_NAME",label:"Boş Sürücü Adı",value:"---"},{id:"EMPTY_DRIVER_TEAM",label:"Boş Komanda Adı",value:"---"}])},Gs=N=>{P(N,[{id:"RACE_IMAGE_ALT",label:"Növbəti Yarış Görsel Alt",value:"Next Race"}])},qs=N=>{const L=N.sections||[],C=(U,F)=>(L.find($=>$.id===U)?.value||F).trim()||F,O=[{index:1,id:"pilot",title:C("RULES_PILOT_TITLE","PİLOT PROTOKOLU"),icon:"Info",items:[{index:1,title:C("RULES_PILOT_SUB1","İSTİFADƏÇİ ÖHDƏLİKLƏRİ"),desc:C("RULES_PILOT_DESC1","HƏR BİR İŞTİRAKÇI FEDERASİYANIN MÜƏYYƏN ETDİYİ BÜTÜN TEXNİKİ VƏ ETİK NORMALARI QEYD-ŞƏRTSİZ QƏBUL EDİR.")},{index:2,title:C("RULES_PILOT_SUB2","DİSKVALİFİKASİYA"),desc:C("RULES_PILOT_DESC2","PROTOKOLDAN KƏNARA ÇIXMAQ VƏ YA HAKİM QƏRARLARINA ETİRAZ ETMƏK DƏRHAL DİSKVALİFİKASİYA İLƏ NƏTİCƏLƏNƏ BİLƏR.")},{index:3,title:C("RULES_PILOT_SUB3","TEXNİKİ TƏLƏBLƏR"),desc:C("RULES_PILOT_DESC3","BÜTÜN AVADANLIQLAR YARIŞDAN 24 SAAT ƏVVƏL TEXNİKİ KOMİSSİYA TƏRƏFİNDƏN YOXLANILMALI VƏ TƏHLÜKƏSİZLİK SERTİFİKATI İLƏ TƏMİN EDİLMƏLİDİR.")}]},{index:2,id:"technical",title:C("RULES_TECH_TITLE","TEXNİKİ NORMARTİVLƏR"),icon:"Settings",items:[{index:1,title:C("RULES_TECH_SUB1","TƏKƏR ÖLÇÜLƏRİ"),desc:C("RULES_TECH_DESC1","PRO CLASS ÜÇÜN MAKSİMUM TƏKƏR ÖLÇÜSÜ 37 DÜYM, AMATEUR CLASS ÜÇÜN İSƏ 33 DÜYM OLARAQ MÜƏYYƏN EDİLMİŞDİR.")},{index:2,title:C("RULES_TECH_SUB2","MÜHƏRRİK GÜCÜ"),desc:C("RULES_TECH_DESC2","MÜHƏRRİK ÜZƏRİNDƏ APARILAN MODİFİKASİYALAR KATEQORİYA ÜZRƏ LİMİTLƏRİ AŞMAMALIDIR. TURBO SİSTEMLƏRİ YALNIZ XÜSUSİ KLASLARDA İCAZƏLİDİR.")},{index:3,title:C("RULES_TECH_SUB3","ASQI SİSTEMİ"),desc:C("RULES_TECH_DESC3","AVTOMOBİLİN KLİRENSİ (YERDƏN HÜNDÜRLÜYÜ) VƏ ASQI ARTIKULYASİYASI TƏHLÜKƏSİZLİK STANDARTLARINA UYĞUN OLMALIDIR.")}]},{index:3,id:"safety",title:C("RULES_SAFETY_TITLE","TƏHLÜKƏSİZLİK QAYDALARI"),icon:"ShieldAlert",items:[{index:1,title:C("RULES_SAFETY_SUB1","KARKAS TƏLƏBİ"),desc:C("RULES_SAFETY_DESC1","BÜTÜN AÇIQ VƏ YA MODİFİKASİYA OLUNMUŞ AVTOMOBİLLƏRDƏ FIA STANDARTLARINA UYĞUN TƏHLÜKƏSİZLİK KARKASI (ROLL CAGE) MƏCBURİDİR.")},{index:2,title:C("RULES_SAFETY_SUB2","YANĞIN SÖNDÜRMƏ"),desc:C("RULES_SAFETY_DESC2","HƏR BİR AVTOMOBİLDƏ ƏN AZI 2 KİLOQRAMLIQ, ASAN ƏLÇATAN YERDƏ YERLƏŞƏN YANĞINSÖNDÜRƏN BALON OLMALIDIR.")},{index:3,title:C("RULES_SAFETY_SUB3","KƏMƏR VƏ DƏBİLQƏ"),desc:C("RULES_SAFETY_DESC3","5 NÖQTƏLİ TƏHLÜKƏSİZLİK KƏMƏRLƏRİ VƏ SERTİFİKATLI KASKALARIN (DƏBİLQƏLƏRİN) İSTİFADƏSİ BÜTÜN MƏRHƏLƏLƏRDƏ MƏCBURİDİR.")}]},{index:4,id:"eco",title:C("RULES_ECO_TITLE","EKOLOJİ MƏSULİYYƏT"),icon:"Leaf",items:[{index:1,title:C("RULES_ECO_SUB1","TULLANTILARIN İDARƏ EDİLMƏSİ"),desc:C("RULES_ECO_DESC1",'YARIŞ ƏRAZİSİNDƏ VƏ TRASDA HƏR HANSI BİR TULLANTININ ATILMASI QƏTİ QADAĞANDIR. İŞTİRAKÇILAR "LEAVE NO TRACE" PRİNSİPİNƏ ƏMƏL ETMƏLİDİR.')},{index:2,title:C("RULES_ECO_SUB2","MAYE SIZMALARI"),desc:C("RULES_ECO_DESC2","AVTOMOBİLDƏN YAĞ VƏ YA SOYUDUCU MAYE SIZMASI OLDUĞU TƏQDİRDƏ PİLOT DƏRHAL DAYANMALI VƏ ƏRAZİNİN ÇİRKLƏNMƏSİNİN QARŞISINI ALMALIDIR.")},{index:3,title:C("RULES_ECO_SUB3","MARŞRUTDAN KƏNARA ÇIXMAMAQ"),desc:C("RULES_ECO_DESC3","TƏBİİ ÖRTÜYÜ QORUMAQ MƏQSƏDİ İLƏ MÜƏYYƏN OLUNMUŞ TRASDANKƏNAR SÜRÜŞLƏR VƏ YA YAŞIL SAHƏLƏRƏ ZƏRƏR VERMƏK QADAĞANDIR.")}]}],ee=[];O.forEach((U,F)=>{const $=F+1;ee.push({id:`RULE_TAB_${$}_ID`,type:"text",label:`Qayda Sekməsi ${$} ID`,value:U.id},{id:`RULE_TAB_${$}_TITLE`,type:"text",label:`Qayda Sekməsi ${$} Başlıq`,value:U.title},{id:`RULE_TAB_${$}_ICON`,type:"text",label:`Qayda Sekməsi ${$} İkon`,value:U.icon}),U.items.forEach((qe,oi)=>{const Ot=oi+1;ee.push({id:`RULE_TAB_${$}_ITEM_${Ot}_TITLE`,type:"text",label:`Sekmə ${$} Maddə ${Ot} Başlıq`,value:qe.title},{id:`RULE_TAB_${$}_ITEM_${Ot}_DESC`,type:"text",label:`Sekmə ${$} Maddə ${Ot} Təsvir`,value:qe.desc})})});const be=new Set(L.map(U=>U.id)),Z=ee.filter(U=>!be.has(U.id));N.sections=[...L,...Z]};p.forEach(N=>{const L=j.find(C=>C.id===N);L?N==="about"?T(L):N==="partners"?z(L):N==="hero"?M(L):N==="contactpage"?me(L):N==="eventspage"?nt(L):N==="footer"?kt(L):N==="categoryleaders"?ze(L):N==="nextrace"?Gs(L):N==="rulespage"&&qs(L):j.push({id:N,title:is[N]||N,sections:[{id:`${N}-default`,type:"text",label:"Bölmə",value:""}],images:[]})});const Qs=j.find(N=>N.id==="about");Qs&&T(Qs);const Vs=j.find(N=>N.id==="partners");Vs&&z(Vs);const Zs=j.find(N=>N.id==="hero");Zs&&M(Zs);const Ws=j.find(N=>N.id==="contactpage");Ws&&me(Ws);const Xs=j.find(N=>N.id==="eventspage");Xs&&nt(Xs);const Js=j.find(N=>N.id==="footer");Js&&kt(Js);const ea=j.find(N=>N.id==="categoryleaders");ea&&ze(ea);const ta=j.find(N=>N.id==="nextrace");ta&&Gs(ta);const sa=j.find(N=>N.id==="rulespage");sa&&qs(sa);const It=new Map(p.map((N,L)=>[N,L]));j.sort((N,L)=>{const C=It.has(N.id)?It.get(N.id):Number.MAX_SAFE_INTEGER,O=It.has(L.id)?It.get(L.id):Number.MAX_SAFE_INTEGER;return C!==O?C-O:(N.title||N.id).localeCompare(L.title||L.id)});const di=j.map(N=>({...N,sections:(N.sections||[]).map((L,C)=>{if(L.type!=="text")return L;const ee=Ol(L)?oe(L.value||""):(L.value||"").replace(/\u00a0/g," "),be=Ta(L.label||"")?oe(L.label||""):L.label;return{...L,label:be,value:ee,...L.url?{url:Be(L.url)}:{},order:te(L.order,C)}}).sort((L,C)=>te(L.order,0)-te(C.order,0)),images:(N.images||[]).map((L,C)=>({...L,order:te(L.order,C)})).sort((L,C)=>te(L.order,0)-te(C.order,0))}));l(di)}const[i,n,d,h,u,c]=await Promise.all([fetch(`/api/all-images?v=${Date.now()}`).then(p=>p.json()).catch(()=>({})),fetch("/api/events").then(p=>p.json()).catch(()=>[]),fetch("/api/news").then(p=>p.json()).catch(()=>[]),fetch("/api/drivers").then(p=>p.json()).catch(()=>[]),fetch("/api/gallery-photos").then(p=>p.json()).catch(()=>[]),fetch("/api/videos").then(p=>p.json()).catch(()=>[])]);i?.local&&X(i.local),Array.isArray(n)&&(mt(n),n.length>0&&Ye===null&&(ht(n[0].id),ft(n[0]))),Array.isArray(d)&&(gt(d),d.length>0&&Ke===null&&(bt(d[0].id),vt({...d[0]}))),Array.isArray(h)&&(Ie(h),h.length>0&&J===null&&tt(h[0].id)),Array.isArray(u)&&jt(u),Array.isArray(c)&&(yt(c),c.length>0&&Je===null&&_s(c[0].id))}catch(t){console.error("Content load error:",t)}};g.useEffect(()=>{vs()},[]),g.useEffect(()=>{if(!s.length)return;const t=s.findIndex(c=>c.id==="about");if(t===-1||(s[t].sections||[]).some(c=>Ue(c.id)))return;const n=[{label:"PİLOTLAR",value:"140+"},{label:"YARIŞLAR",value:"50+"},{label:"GƏNCLƏR",value:"20+"}],d=[...s],h={...d[t]},u=[...h.sections||[]];n.forEach((c,p)=>{const j=`${p+1}`;u.push({id:`${ye}${j}`,type:"text",label:`Statistika Etiketi ${p+1}`,value:c.label},{id:`${je}${j}`,type:"text",label:`Statistika Dəyəri ${p+1}`,value:c.value})}),h.sections=u,d[t]=h,l(d)},[s]),g.useEffect(()=>{gs.current||(gs.current=!0,ys())},[]),g.useEffect(()=>{const t=new URLSearchParams(Ht.search),a=t.get("mode"),i=t.get("page");if(a&&["extract","events","news","drivers","videos","photos"].includes(a))ce(a);else if(i){ce("extract");const n=ca(i),d=s.findIndex(h=>n.includes(h.id));d!==-1&&m(d)}},[Ht.search,s]);const ys=async()=>{A(!0),D("Front-end komponentləri skan edilir..."),y(30);const t=Date.now(),a=E.loading("Sinxronizasiya başladı...");try{const i=await fetch("/api/extract-content",{method:"POST"});if(!i.ok){const c=await i.text();throw new Error(c||"Extraction failed")}y(60),D("Bulud bazası ilə sinxronizasiya edilir...");const n=await i.json(),d=n.pages||n,h=await fetch("/api/save-content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(!h.ok){const c=await h.text();throw new Error(c||"Save failed")}y(90),l(d);const u=Date.now()-t;u<800&&await new Promise(c=>setTimeout(c,800-u)),y(100),D("Tamamlandı!"),setTimeout(()=>{A(!1),localStorage.setItem("forsaj_extracted","true"),localStorage.setItem(ua,Date.now().toString()),E.success("Sinxronizasiya tamamlandı! Baza yeniləndi.",{id:a})},500)}catch(i){console.error("Extraction error:",i),A(!1),E.error(`Sinxronizasiya xətası: ${i.message}`,{id:a})}},ae=(t,a,i,n)=>{const d=[...s],h=d[t].sections.findIndex(u=>u.id===a);if(h!==-1){const u=d[t].sections[h];if(!Ve(u,i))return;let c=n;const j=!!Pe(u)||Ue(u.id)||u.id.startsWith("val-")||u.id.startsWith("txt-");(i==="value"||i==="label")&&j&&(c=oe(n)),d[t].sections[h][i]=c,l(d)}},js=(t,a)=>{const i=s[t];if(!i)return;const n=i.sections.find(h=>h.id===a);if(!n||!n.url)return;const d=Be(n.url);d&&d!==n.url&&ae(t,a,"url",d)},Ss=(t,a,i)=>{const n=[...s],d=n[t].images.findIndex(h=>h.id===a);d!==-1&&(n[t].images[d].alt=i,l(n))},_a=()=>{if(!Ee.trim()){E.error("Başlıq daxil edin!");return}const a={id:Ee.toLowerCase().replace(/\s+/g,"-"),title:Ee,sections:[{id:"text-0",type:"text",label:"Bölmə",value:"Yeni bölmə məzmunu..."}],images:[]};l([...s,a]),m(s.length),x(!1),Te(""),E.success("Yeni bölmə əlavə edildi!")},at=(t,a,i)=>{if(r<0||r>=s.length)return;const n=[...s],d=n[r];if(d){if(t==="text"){const h=i||`text-${d.sections.length}-${Date.now()}`,u=d.sections.reduce((c,p,j)=>Math.max(c,te(p.order,j)),-1)+1;d.sections.push({id:h,type:"text",label:a||"Bölmə",value:"Yeni mətn sahəsi...",order:u}),E.success(`${a||"Yeni mətn"} sahəsi əlavə edildi`)}else{const h=i||`img-${d.images.length}-${Date.now()}`,u=d.images.reduce((c,p,j)=>Math.max(c,te(p.order,j)),-1)+1;d.images.push({id:h,path:"",alt:"",type:"local",order:u}),E.success("Yeni şəkil sahəsi əlavə edildi")}l(n)}},As=(t,a)=>{if(r<0||r>=s.length)return;const i=[...s],n=i[r];n&&(t==="text"?(n.sections=n.sections.filter(d=>d.id!==a),n.sections=n.sections.map((d,h)=>({...d,order:h}))):(n.images=n.images.filter(d=>d.id!==a),n.images=n.images.map((d,h)=>({...d,order:h}))),l(i),E.success("Sahə silindi"))},St=(t,a,i)=>{if(r<0||r>=s.length)return;const n=[...s],d=n[r];if(!d)return;const h=t==="text"?d.sections:d.images,u=h.findIndex(j=>j.id===a);if(u===-1)return;const c=i==="up"?u-1:u+1;if(c<0||c>=h.length)return;const p=h[u];h[u]=h[c],h[c]=p,t==="text"?d.sections=(d.sections||[]).map((j,T)=>({...j,order:T})):d.images=(d.images||[]).map((j,T)=>({...j,order:T})),l(n)},Vt=(t=r)=>{if(t<0||t>=s.length)return;const a=[...s],i=a[t];if(!i||i.id!=="about")return;const n=`${Date.now()}`;i.sections.push({id:`${ye}${n}`,type:"text",label:"Statistika Etiketi",value:"YENİ STATİSTİKA"},{id:`${je}${n}`,type:"text",label:"Statistika Dəyəri",value:"0+"}),l(a),E.success("Yeni statistika əlavə edildi")},At=(t,a,i,n=r)=>{if(n<0||n>=s.length)return;const d=[...s],h=d[n];if(!h||h.id!=="about")return;const u=a==="label"?`${ye}${t}`:`${je}${t}`,c=h.sections.findIndex(j=>j.id===u),p=oe(i);c!==-1?h.sections[c].value=p:h.sections.push({id:u,type:"text",label:a==="label"?"Statistika Etiketi":"Statistika Dəyəri",value:p}),l(d)},Ns=(t,a=r)=>{if(a<0||a>=s.length)return;const i=[...s],n=i[a];!n||n.id!=="about"||(n.sections=n.sections.filter(d=>d.id!==`${ye}${t}`&&d.id!==`${je}${t}`),l(i),E.success("Statistika silindi"))},it=t=>{if(!t)return[];const a=new Map;return(t.sections||[]).forEach(i=>{const n=i.id.match(ss);if(!n)return;const d=Number(n[1]),h=wl(n[2]);if(!h)return;const u=a.get(d)||{index:d,name:"",tag:"OFFICIAL PARTNER",icon:"ShieldCheck",useImage:"false",imageId:`partner-image-${d}`};u[h]=i.value||"",a.set(d,u)}),Array.from(a.values()).sort((i,n)=>i.index-n.index)},Nt=t=>{if(r<0||r>=s.length)return;const a=[...s],i=a[r];if(!i||i.id!=="partners")return;const n=(i.sections||[]).filter(p=>!ss.test(p.id)),d=[];t.forEach(p=>{d.push({id:`PARTNER_${p.index}_NAME`,type:"text",label:`Tərəfdaş ${p.index} Ad`,value:p.name},{id:`PARTNER_${p.index}_TAG`,type:"text",label:`Tərəfdaş ${p.index} Etiket`,value:p.tag},{id:`PARTNER_${p.index}_ICON`,type:"text",label:`Tərəfdaş ${p.index} İkon`,value:p.icon},{id:`PARTNER_${p.index}_USE_IMAGE`,type:"text",label:`Tərəfdaş ${p.index} Görsel İstifadə`,value:p.useImage},{id:`PARTNER_${p.index}_IMAGE_ID`,type:"text",label:`Tərəfdaş ${p.index} Görsel ID`,value:p.imageId||`partner-image-${p.index}`})});const h=i.images||[],u=new Set(t.map(p=>p.imageId||`partner-image-${p.index}`)),c=[...h];u.forEach(p=>{c.some(j=>j.id===p)||c.push({id:p,path:"",alt:p,type:"local",order:c.length})}),i.sections=[...n,...d],i.images=c.map((p,j)=>({...p,order:j})),l(a)},lt=(t,a,i)=>{const n=it(s[r]).map(d=>d.index===t?{...d,[a]:i}:d);Nt(n)},Da=()=>{const t=it(s[r]),a=(t[t.length-1]?.index||0)+1;t.push({index:a,name:`PARTNER ${a}`,tag:"OFFICIAL PARTNER",icon:"ShieldCheck",useImage:"false",imageId:`partner-image-${a}`}),Nt(t)},Ma=t=>{const a=it(s[r]).filter(i=>i.index!==t);Nt(a)},Rs=(t,a)=>{const i=it(s[r]),n=i.findIndex(c=>c.index===t);if(n===-1)return;const d=a==="up"?n-1:n+1;if(d<0||d>=i.length)return;const h=i[n];i[n]=i[d],i[d]=h;const u=i.map((c,p)=>({...c,index:p+1,imageId:c.imageId||`partner-image-${p+1}`}));Nt(u)},Es=(t,a)=>oe(t||"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")||a,wa=[{id:"pilot",icon:"Info",titleKey:"RULES_PILOT_TITLE",titleFallback:"PİLOT PROTOKOLU",docNameFallback:"PILOT_PROTOKOLU.PDF",items:[{titleKey:"RULES_PILOT_SUB1",titleFallback:"İSTİFADƏÇİ ÖHDƏLİKLƏRİ",descKey:"RULES_PILOT_DESC1",descFallback:"HƏR BİR İŞTİRAKÇI FEDERASİYANIN MÜƏYYƏN ETDİYİ BÜTÜN TEXNİKİ VƏ ETİK NORMALARI QEYD-ŞƏRTSİZ QƏBUL EDİR."},{titleKey:"RULES_PILOT_SUB2",titleFallback:"DİSKVALİFİKASİYA",descKey:"RULES_PILOT_DESC2",descFallback:"PROTOKOLDAN KƏNARA ÇIXMAQ VƏ YA HAKİM QƏRARLARINA ETİRAZ ETMƏK DƏRHAL DİSKVALİFİKASİYA İLƏ NƏTİCƏLƏNƏ BİLƏR."},{titleKey:"RULES_PILOT_SUB3",titleFallback:"TEXNİKİ TƏLƏBLƏR",descKey:"RULES_PILOT_DESC3",descFallback:"BÜTÜN AVADANLIQLAR YARIŞDAN 24 SAAT ƏVVƏL TEXNİKİ KOMİSSİYA TƏRƏFİNDƏN YOXLANILMALI VƏ TƏHLÜKƏSİZLİK SERTİFİKATI İLƏ TƏMİN EDİLMƏLİDİR."}]},{id:"technical",icon:"Settings",titleKey:"RULES_TECH_TITLE",titleFallback:"TEXNİKİ NORMARTİVLƏR",docNameFallback:"TEXNIKI_NORMATIVLER.PDF",items:[{titleKey:"RULES_TECH_SUB1",titleFallback:"TƏKƏR ÖLÇÜLƏRİ",descKey:"RULES_TECH_DESC1",descFallback:"PRO CLASS ÜÇÜN MAKSİMUM TƏKƏR ÖLÇÜSÜ 37 DÜYM, AMATEUR CLASS ÜÇÜN İSƏ 33 DÜYM OLARAQ MÜƏYYƏN EDİLMİŞDİR."},{titleKey:"RULES_TECH_SUB2",titleFallback:"MÜHƏRRİK GÜCÜ",descKey:"RULES_TECH_DESC2",descFallback:"MÜHƏRRİK ÜZƏRİNDƏ APARILAN MODİFİKASİYALAR KATEQORİYA ÜZRƏ LİMİTLƏRİ AŞMAMALIDIR. TURBO SİSTEMLƏRİ YALNIZ XÜSUSİ KLASLARDA İCAZƏLİDİR."},{titleKey:"RULES_TECH_SUB3",titleFallback:"ASQI SİSTEMİ",descKey:"RULES_TECH_DESC3",descFallback:"AVTOMOBİLİN KLİRENSİ (YERDƏN HÜNDÜRLÜYÜ) VƏ ASQI ARTIKULYASİYASI TƏHLÜKƏSİZLİK STANDARTLARINA UYĞUN OLMALIDIR."}]},{id:"safety",icon:"ShieldAlert",titleKey:"RULES_SAFETY_TITLE",titleFallback:"TƏHLÜKƏSİZLİK QAYDALARI",docNameFallback:"TEHLUKESIZLIK_QAYDALARI.PDF",items:[{titleKey:"RULES_SAFETY_SUB1",titleFallback:"KARKAS TƏLƏBİ",descKey:"RULES_SAFETY_DESC1",descFallback:"BÜTÜN AÇIQ VƏ YA MODİFİKASİYA OLUNMUŞ AVTOMOBİLLƏRDƏ FIA STANDARTLARINA UYĞUN TƏHLÜKƏSİZLİK KARKASI (ROLL CAGE) MƏCBURİDİR."},{titleKey:"RULES_SAFETY_SUB2",titleFallback:"YANĞIN SÖNDÜRMƏ",descKey:"RULES_SAFETY_DESC2",descFallback:"HƏR BİR AVTOMOBİLDƏ ƏN AZI 2 KİLOQRAMLIQ, ASAN ƏLÇATAN YERDƏ YERLƏŞƏN YANĞINSÖNDÜRƏN BALON OLMALIDIR."},{titleKey:"RULES_SAFETY_SUB3",titleFallback:"KƏMƏR VƏ DƏBİLQƏ",descKey:"RULES_SAFETY_DESC3",descFallback:"5 NÖQTƏLİ TƏHLÜKƏSİZLİK KƏMƏRLƏRİ VƏ SERTİFİKATLI KASKALARIN (DƏBİLQƏLƏRİN) İSTİFADƏSİ BÜTÜN MƏRHƏLƏLƏRDƏ MƏCBURİDİR."}]},{id:"eco",icon:"Leaf",titleKey:"RULES_ECO_TITLE",titleFallback:"EKOLOJİ MƏSULİYYƏT",docNameFallback:"EKOLOJI_MESULIYYET.PDF",items:[{titleKey:"RULES_ECO_SUB1",titleFallback:"TULLANTILARIN İDARƏ EDİLMƏSİ",descKey:"RULES_ECO_DESC1",descFallback:'YARIŞ ƏRAZİSİNDƏ VƏ TRASDA HƏR HANSI BİR TULLANTININ ATILMASI QƏTİ QADAĞANDIR. İŞTİRAKÇILAR "LEAVE NO TRACE" PRİNSİPİNƏ ƏMƏL ETMƏLİDİR.'},{titleKey:"RULES_ECO_SUB2",titleFallback:"MAYE SIZMALARI",descKey:"RULES_ECO_DESC2",descFallback:"AVTOMOBİLDƏN YAĞ VƏ YA SOYUDUCU MAYE SIZMASI OLDUĞU TƏQDİRDƏ PİLOT DƏRHAL DAYANMALI VƏ ƏRAZİNİN ÇİRKLƏNMƏSİNİN QARŞISINI ALMALIDIR."},{titleKey:"RULES_ECO_SUB3",titleFallback:"MARŞRUTDAN KƏNARA ÇIXMAMAQ",descKey:"RULES_ECO_DESC3",descFallback:"TƏBİİ ÖRTÜYÜ QORUMAQ MƏQSƏDİ İLƏ MÜƏYYƏN OLUNMUŞ TRASDANKƏNAR SÜRÜŞLƏR VƏ YA YAŞIL SAHƏLƏRƏ ZƏRƏR VERMƏK QADAĞANDIR."}]}],Rt=(t,a,i)=>{const n=oe((t.find(d=>d.id===a)?.value||"").toString());return!n||Pt(n)?i:n},za=t=>{const a=Rt(t,"BTN_DOWNLOAD_PDF","PDF YÜKLƏ"),i=Be((t.find(n=>n.id==="BTN_DOWNLOAD_PDF")?.url||"").toString());return wa.map((n,d)=>({index:d+1,id:n.id,title:Rt(t,n.titleKey,n.titleFallback),icon:n.icon,docName:n.docNameFallback,docButton:a,docUrl:i,items:n.items.map((h,u)=>({index:u+1,title:Rt(t,h.titleKey,h.titleFallback),desc:Rt(t,h.descKey,h.descFallback)}))}))},Zt=t=>Es(t||"",""),ge=t=>{if(!t||t.id!=="rulespage")return[];const a=new Map;(t.sections||[]).forEach(c=>{const p=c.id.match(Dl);if(p){const T=Number(p[1]),z=p[2],M=a.get(T)||{id:`tab-${T}`,title:"",icon:"Info",docName:"",docButton:"",docUrl:"",items:new Map};z==="ID"&&(M.id=c.value||`tab-${T}`),z==="TITLE"&&(M.title=c.value||""),z==="ICON"&&(M.icon=c.value||"Info"),z==="DOC_NAME"&&(M.docName=c.value||""),z==="DOC_BUTTON"&&(M.docButton=c.value||""),z==="DOC_URL"&&(M.docUrl=Be(c.url||c.value||"")),a.set(T,M);return}const j=c.id.match(Ml);if(j){const T=Number(j[1]),z=Number(j[2]),M=j[3],P=a.get(T)||{id:`tab-${T}`,title:"",icon:"Info",docName:"",docButton:"",docUrl:"",items:new Map},me=P.items.get(z)||{title:"",desc:""};M==="TITLE"&&(me.title=c.value||""),M==="DESC"&&(me.desc=c.value||""),P.items.set(z,me),a.set(T,P)}});const i=Array.from(a.entries()).sort((c,p)=>c[0]-p[0]).map(([c,p])=>({index:c,id:p.id||`tab-${c}`,title:p.title||"",icon:p.icon||"Info",docName:p.docName||"",docButton:p.docButton||"",docUrl:p.docUrl||"",items:Array.from(p.items.entries()).sort((j,T)=>j[0]-T[0]).map(([j,T])=>({index:j,title:T.title||"",desc:T.desc||""}))})).filter(c=>c.title||c.items.length>0),n=za(t.sections||[]);if(!i.length)return n;const d=new Map;i.forEach(c=>{d.set(Zt(c.id||c.title||""),c)});const h=new Set,u=n.map(c=>{const p=Zt(c.id||c.title||""),j=d.get(p);return j?(h.add(p),{...c,...j,id:j.id||c.id,title:j.title||c.title,icon:j.icon||c.icon,docName:j.docName||c.docName,docButton:j.docButton||c.docButton,docUrl:j.docUrl||c.docUrl,items:j.items&&j.items.length>0?j.items:c.items}):c});return i.forEach(c=>{const p=Zt(c.id||c.title||"");h.has(p)||u.push(c)}),u.map((c,p)=>({...c,index:p+1}))},Oe=(t,a=r)=>{if(a<0||a>=s.length)return;const i=[...s],n=i[a];if(!n||n.id!=="rulespage")return;const d=(n.sections||[]).filter(u=>!as.test(u.id)),h=[];t.forEach((u,c)=>{const p=c+1,j=Es(u.id||u.title||"",`tab-${p}`),T=oe(u.title||`SEKME ${p}`),z=ts.includes(u.icon)?u.icon:"Info",M=oe(u.docName||`${j.toUpperCase()}_PROTOKOLU.PDF`),P=oe(u.docButton||"PDF YÜKLƏ"),me=Be(u.docUrl||"");h.push({id:`RULE_TAB_${p}_ID`,type:"text",label:`Qayda Sekməsi ${p} ID`,value:j},{id:`RULE_TAB_${p}_TITLE`,type:"text",label:`Qayda Sekməsi ${p} Başlıq`,value:T},{id:`RULE_TAB_${p}_ICON`,type:"text",label:`Qayda Sekməsi ${p} İkon`,value:z},{id:`RULE_TAB_${p}_DOC_NAME`,type:"text",label:`Sekmə ${p} Sənəd Adı`,value:M},{id:`RULE_TAB_${p}_DOC_BUTTON`,type:"text",label:`Sekmə ${p} Sənəd Düyməsi`,value:P},{id:`RULE_TAB_${p}_DOC_URL`,type:"text",label:`Sekmə ${p} Sənəd Linki`,value:me,...me?{url:me}:{}}),(u.items||[]).forEach((nt,kt)=>{const ze=kt+1;h.push({id:`RULE_TAB_${p}_ITEM_${ze}_TITLE`,type:"text",label:`Sekmə ${p} Maddə ${ze} Başlıq`,value:oe(nt.title||"")},{id:`RULE_TAB_${p}_ITEM_${ze}_DESC`,type:"text",label:`Sekmə ${p} Maddə ${ze} Təsvir`,value:oe(nt.desc||"")})})}),n.sections=[...d,...h].map((u,c)=>({...u,order:c})),l(i)},Ts=(t=r)=>{const a=ge(s[t]),i=a.length+1;a.push({index:i,id:`tab-${i}`,title:`SEKME ${i}`,icon:"Info",docName:`TAB_${i}_PROTOKOLU.PDF`,docButton:"PDF YÜKLƏ",docUrl:"",items:[{index:1,title:"YENİ MADDƏ",desc:"Maddə təsviri..."}]}),Oe(a,t),E.success("Yeni sekmə əlavə edildi")},Ls=(t,a=r)=>{const i=ge(s[a]).filter((n,d)=>d!==t);Oe(i,a),E.success("Sekmə silindi")},Et=(t,a,i=r)=>{const n=ge(s[i]),d=a==="up"?t-1:t+1;if(d<0||d>=n.length)return;const h=n[t];n[t]=n[d],n[d]=h,Oe(n,i)},ie=(t,a,i,n=r)=>{const d=ge(s[n]);d[t]&&(d[t]={...d[t],[a]:i},Oe(d,n))},Cs=(t,a=r)=>{const i=ge(s[a]);if(!i[t])return;const n=(i[t].items?.length||0)+1;i[t].items=[...i[t].items||[],{index:n,title:`MADDƏ ${n}`,desc:"Maddə təsviri..."}],Oe(i,a)},ks=(t,a,i=r)=>{const n=ge(s[i]);n[t]&&(n[t].items=(n[t].items||[]).filter((d,h)=>h!==a),Oe(n,i))},Tt=(t,a,i,n,d=r)=>{const h=ge(s[d]);!h[t]||!h[t].items[a]||(h[t].items[a]={...h[t].items[a],[i]:n},Oe(h,d))},Is=(t,a)=>{Xe({pageIdx:t,imgId:a}),R(!0)},Wt=async(t,a)=>{const i=new FormData;i.append("image",t);const n=E.loading(a?.loadingText||"Şəkil yüklənir...");try{const d=await fetch("/api/upload-image",{method:"POST",body:i});if(d.ok){const h=await d.json();return E.success(a?.successText||"Şəkil uğurla yükləndi",{id:n}),h.url}else throw new Error("Upload fail")}catch(d){return console.error("Upload error:",d),E.error(a?.errorText||"Görsəl yüklənərkən xəta baş verdi",{id:n}),null}},_e=async t=>Wt(t),Ba=async t=>t.type!=="application/pdf"&&!t.name.toLowerCase().endsWith(".pdf")?(E.error("Yalnız PDF faylı yüklənə bilər"),null):Wt(t,{loadingText:"PDF yüklənir...",successText:"PDF uğurla yükləndi",errorText:"PDF yüklənərkən xəta baş verdi"}),Os=async(t,a,i=r)=>{const n=await Ba(t);n&&(ie(a,"docName",t.name,i),ie(a,"docUrl",n,i))},Ua=async(t,a,i)=>{const n=t.target.files?.[0];if(!n)return;const d=await _e(n);if(d){const h=[...s],u=h[a].images.findIndex(c=>c.id===i);u!==-1&&(h[a].images[u].path=d,h[a].images[u].type="local",l(h))}},Pa=t=>{if(!re)return;const a=[...s];if(I){const i=`img-${a[re.pageIdx].images.length}-${Date.now()}`;a[re.pageIdx].images.push({id:i,path:t,alt:"Daxil edildi",type:"local"}),B(!1)}else{const i=a[re.pageIdx].images.findIndex(n=>n.id===re.imgId);i!==-1&&(a[re.pageIdx].images[i].path=t,a[re.pageIdx].images[i].type="local")}l(a),R(!1),E.success("Şəkil seçildi")},Xt=async()=>{v(!0);const t=E.loading("Yadda saxlanılır...");try{if(V==="extract"){const a=await fetch("/api/save-content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error(await a.text());localStorage.setItem(ua,Date.now().toString())}else if(V==="events"){const a=await fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)});if(!a.ok)throw new Error(await a.text())}else if(V==="news"){const a=await fetch("/api/news",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Le)});if(!a.ok)throw new Error(await a.text())}else if(V==="drivers"){const a=await fetch("/api/drivers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ue)});if(!a.ok)throw new Error(await a.text())}else if(V==="videos"){const a=await fetch("/api/videos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ce)});if(!a.ok)throw new Error(await a.text())}else if(V==="photos"){const a=await fetch("/api/gallery-photos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(qt)});if(!a.ok)throw new Error(await a.text())}E.success("Dəyişikliklər bulud bazasına qeyd edildi!",{id:t}),await vs()}catch(a){console.error("Save error:",a),E.error(`Yadda saxlama xətası: ${a.message} `,{id:t})}finally{v(!1)}},Fa=t=>{const a=se.find(i=>i.id===t);a&&(ht(t),ft({...a}))},pe=(t,a,i)=>{const n=i||Ye;ft(d=>{const u=!i||i===Ye?{...d,[t]:a}:d;return n&&mt(c=>c.map(p=>p.id===n?{...p,[t]:a}:p)),u})},Ya=()=>{const t=se.length>0?Math.max(...se.map(i=>i.id))+1:1,a={id:t,title:"Yeni Tədbir",date:new Date().toISOString().split("T")[0],location:"Bakı",category:"OFFROAD",img:"https://images.unsplash.com/photo-1533473359331-0135ef1b58bf?q=80&w=2070&auto=format&fit=crop",description:"",rules:"",status:"planned"};mt([...se,a]),ht(t),ft(a),E.success("Yeni tədbir yaradıldı")},Ka=async(t,a)=>{a.stopPropagation(),window.confirm("Bu tədbiri silmək istədiyinizə əminsiniz?")&&(mt(se.filter(i=>i.id!==t)),Ye===t&&ht(null),E.success("Tədbir silindi"))},$a=t=>{const a=Le.find(i=>i.id===t);a&&(bt(t),vt({...a}))},De=(t,a,i)=>{const n=i||Ke;vt(d=>{const u=!i||i===Ke?{...d,[t]:a}:d;return n&&gt(c=>c.map(p=>p.id===n?{...p,[t]:a}:p)),u})},Ha=()=>{const t=Le.length>0?Math.max(...Le.map(i=>i.id))+1:1,a={id:t,title:"Yeni Xəbər",date:new Date().toISOString().split("T")[0],img:"https://images.unsplash.com/photo-1503376780353-7e6692767b70?q=80&w=2070&auto=format&fit=crop",description:"",category:"BLOQ",status:"draft"};gt([...Le,a]),bt(t),vt(a),E.success("Yeni xəbər yaradıldı")},_s=t=>{Kt(t);const a=Ce.find(i=>i.id===t);a&&$t({...a})},Lt=(t,a,i)=>{const n=Je;$t(d=>{let u={...d,[t]:a};if(t==="youtubeUrl"){const c=Ds(a);c&&(u={...u,videoId:c,thumbnail:`https://img.youtube.com/vi/${c}/maxresdefault.jpg`})}return n&&yt(c=>c.map(p=>{if(p.id===n){let j={...p,[t]:a};if(t==="youtubeUrl"){const T=Ds(a);T&&(j.videoId=T,j.thumbnail=`https://img.youtube.com/vi/${T}/maxresdefault.jpg`)}return j}return p})),u})},Ds=t=>{const a=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,i=t.match(a);return i&&i[2].length===11?i[2]:null},Ms=t=>{bs(t);const a=qt.find(i=>i.id===t);a&&Qt({...a})},Ga=()=>{const t=Date.now(),a={id:t,title:"Yeni Şəkil",url:""};jt(i=>[...i,a]),Ms(t)},qa=async(t,a)=>{a.stopPropagation(),window.confirm("Bu şəkli silmək istədiyinizə əminsiniz?")&&(jt(i=>i.filter(n=>n.id!==t)),et===t&&(bs(null),Qt({})),E.success("Şəkil silindi"))},Jt=(t,a)=>{Qt(i=>{const n={...i,[t]:a};return et&&jt(d=>d.map(h=>h.id===et?n:h)),n})},Qa=async t=>{const a=t.target.files?.[0];if(!a)return;const i=await _e(a);i&&Jt("url",i)},Va=()=>{const t=Ce.length>0?Math.max(...Ce.map(i=>i.id))+1:1,a={id:t,title:"Yeni Video",youtubeUrl:"",videoId:"",duration:"00:00",thumbnail:"",created_at:new Date().toISOString()};yt([...Ce,a]),Kt(t),$t(a),E.success("Yeni video əlavə edildi")},Za=async(t,a)=>{a.stopPropagation(),window.confirm("Bu videonu silmək istədiyinizə əminsiniz?")&&(yt(Ce.filter(i=>i.id!==t)),Je===t&&Kt(null),E.success("Video silindi"))},Wa=async(t,a)=>{a.stopPropagation(),window.confirm("Bu xəbəri silmək istədiyinizə əminsiniz?")&&(gt(Le.filter(i=>i.id!==t)),Ke===t&&bt(null),E.success("Xəbər silindi"))},Xa=t=>{tt(t),st(null),He({})},Ja=t=>{st(t);const i=ue.find(n=>n.id===J)?.drivers.find(n=>n.id===t);i&&He({...i})},Me=(t,a)=>{!J||!$e||He(i=>{const n={...i,[t]:a};return Ie(d=>d.map(h=>h.id===J?{...h,drivers:h.drivers.map(u=>u.id===$e?n:u)}:h)),n})},ei=()=>{if(!J){E.error("Öncə kateqoriya seçin və ya yaradın");return}const t=Date.now(),a={id:t,rank:99,name:"Yeni Sürücü",license:"PILOT LICENSE",team:"TEAM NAME",wins:0,points:0,img:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?q=80&w=400&fit=crop"};Ie(i=>i.map(n=>n.id===J?{...n,drivers:[...n.drivers,a]}:n)),st(t),He(a),E.success("Yeni sürücü siyahıya əlavə edildi")},ti=t=>{window.confirm("Bu sürücünü silmək istədiyinizə əminsiniz?")&&(Ie(a=>a.map(i=>i.id===J?{...i,drivers:i.drivers.filter(n=>n.id!==t)}:i)),$e===t&&(st(null),He({})),E.success("Sürücü silindi"))},si=async()=>{const t=le,a=ue.map(n=>n.id===J?{...n,drivers:n.drivers.map(d=>d.id===$e?{...d,...t}:d)}:n);v(!0);const i=E.loading("Yadda saxlanılır...");try{if(!(await fetch("/api/drivers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw new Error("Yadda saxlama uğursuz oldu");Ie(a),E.success("Bütün sürücü məlumatları qeyd edildi",{id:i})}catch{E.error("Xəta baş verdi",{id:i})}finally{v(!1)}},ai=()=>{const t=window.prompt("Kateqoriya adı (Məs: UNLIMITED CLASS):");if(!t)return;const a=t.toLowerCase().replace(/[^a-z0-9]+/g,"-");if(ue.find(n=>n.id===a)){E.error("Bu adda kateqoriya artıq mövcuddur");return}const i={id:a,name:t,drivers:[]};Ie([...ue,i]),tt(a),E.success("Kateqoriya əlavə edildi")},ii=()=>{if(!J)return;const t=ue.find(a=>a.id===J);if(t&&window.confirm(`"${t.name}" kateqoriyasını və içindəki bütün sürücüləri silmək istədiyinizə əminsiniz?`)){const a=ue.filter(i=>i.id!==J);Ie(a),a.length>0?tt(a[0].id):tt(null),st(null),He({}),E.success("Kateqoriya silindi")}};if(s.length===0&&!f&&!localStorage.getItem("forsaj_extracted"))return e.jsx("div",{className:"extractor-overlay",children:e.jsxs("div",{className:"extractor-card fade-in",children:[e.jsx(ne,{size:64,className:"text-primary",style:{marginBottom:"1.5rem"}}),e.jsx("h2",{children:"Sayt Məzmununu və Görselləri Çıxarın"}),e.jsx("p",{children:"Front-end layihənizdəki bütün səhifələri, mətnləri və şəkilləri avtomatik olaraq bu panelə yükləyin."}),e.jsx("button",{className:"extract-btn",onClick:ys,children:"Sinxronizasiyanı Başlat"})]})});if(f)return e.jsx("div",{className:"extractor-overlay",children:e.jsxs("div",{className:"extractor-card",children:[e.jsx("div",{className:"loader-ring",style:{marginBottom:"1.5rem"}}),e.jsx("h2",{children:"Avtomatik Sinxronizasiya"}),e.jsx("p",{children:"Zəhmət olmasa gözləyin, front-end məlumatları oxunur..."}),e.jsx("div",{className:"progress-container",children:e.jsx("div",{className:"progress-bar",style:{width:`${S}%`}})}),e.jsx("div",{className:"step-label",children:_})]})});const Y=s[r],ws=ca(Ae).map(t=>{const a=s.findIndex(i=>i.id===t);return a===-1?null:{page:s[a],pageIdx:a}}).filter(Boolean),li=!!Ae&&(!!Ze[Ae]||!!La[Ae]),ni=V==="extract"&&li&&ws.length>0,zs=(Y?.sections||[]).filter(t=>oa(t)||Y?.id==="about"&&Ue(t.id)||Y?.id==="partners"&&(ss.test(t.id)||t.id==="SECTION_TITLE")||Y?.id==="rulespage"&&as.test(t.id)||Y?.id==="rulespage"&&t.id.startsWith("RULES_")?!1:!w||t.label.toLowerCase().includes(w.toLowerCase())||t.value.toLowerCase().includes(w.toLowerCase())).sort((t,a)=>te(t.order,0)-te(a.order,0)),Bs=Y?.id==="about"?(()=>{const t=new Map;(Y.sections||[]).forEach(n=>{if(!Ue(n.id))return;const d=da(n.id)||n.id,h=t.get(d)||{label:"",value:""};n.id.startsWith(ye)&&(h.label=n.value||""),n.id.startsWith(je)&&(h.value=n.value||""),t.set(d,h)});const a=Array.from(t.entries()).sort(([n],[d])=>n.localeCompare(d,void 0,{numeric:!0})).map(([n,d])=>({suffix:n,...d}));if(!w)return a;const i=w.toLowerCase();return a.filter(n=>n.label.toLowerCase().includes(i)||n.value.toLowerCase().includes(i))})():[],Us=Y?.id==="partners"?it(Y):[],Ps=Y?.id==="rulespage"?ge(Y):[],Ct=(Y?.images||[]).filter(t=>!w||t.alt.toLowerCase().includes(w.toLowerCase())||t.path.toLowerCase().includes(w.toLowerCase())).sort((t,a)=>te(t.order,0)-te(a.order,0)),ri=t=>{const a=(t.value||"").toLowerCase();return a.includes("<p")||a.includes("<br")||a.includes("[b]")||a.includes("[i]")||a.includes("[u]")||a.includes("[url")||a.includes("[img")||a.includes("[center]")},Fs=t=>t.id.startsWith("val-icon-")||/ikon|icon/i.test(t.label||""),we=w.trim().toLowerCase(),Ge=(...t)=>we?t.some(a=>(a||"").toString().toLowerCase().includes(we)):!0,Ys=Le.filter(t=>Ge(t.title,t.date,t.category,t.status,t.description)),Ks=se.filter(t=>Ge(t.title,t.date,t.location,t.category,t.status,t.description)),$s=Ce.filter(t=>Ge(t.title,t.duration,t.youtubeUrl,t.videoId,t.created_at)),Hs=qt.filter(t=>Ge(t.title,t.url));return e.jsxs("div",{className:"visual-editor fade-in",children:[e.jsxs("div",{className:"editor-header",children:[e.jsxs("div",{className:"header-top-row",children:[e.jsx("div",{className:"header-info",children:e.jsxs("h1",{children:[e.jsx(ne,{size:20})," Admin Panel"]})}),e.jsxs("div",{className:"header-search-container",children:[e.jsx(xs,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#94a3b8"}}),e.jsx("input",{placeholder:"Komponentləri və məzmunu axtar...",type:"text",value:w,onChange:t=>Fe(t.target.value),className:"header-search-input"})]}),e.jsx("div",{className:"header-actions",children:e.jsx("button",{className:`save-btn ${b?"saving":""}`,onClick:Xt,disabled:b,children:b?"Gözləyin...":e.jsxs(e.Fragment,{children:[e.jsx(ms,{size:16})," Saxla"]})})})]}),e.jsxs("div",{className:"mode-switcher",children:[e.jsx("button",{className:`mode-btn ${V==="extract"?"active":""}`,onClick:()=>ce("extract"),children:"Ana Səhifə"}),e.jsx("button",{className:`mode-btn ${V==="events"?"active":""}`,onClick:()=>ce("events"),children:"Tədbirlər"}),e.jsx("button",{className:`mode-btn ${V==="news"?"active":""}`,onClick:()=>ce("news"),children:"Xəbərlər"}),e.jsx("button",{className:`mode-btn ${V==="drivers"?"active":""}`,onClick:()=>ce("drivers"),children:"Sürücülər"}),e.jsx("button",{className:`mode-btn ${V==="videos"?"active":""}`,onClick:()=>ce("videos"),children:"Videolar"}),e.jsx("button",{className:`mode-btn ${V==="photos"?"active":""}`,onClick:()=>ce("photos"),children:"Fotolar"})]})]}),V==="news"?e.jsxs("div",{className:"editor-layout with-sidebar",children:[e.jsxs("aside",{className:"page-list",children:[e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Xəbərlər"}),e.jsx("button",{className:"add-section-btn",onClick:Ha,children:e.jsx(H,{size:16})})]}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 300px)"},children:Ys.length===0?e.jsx("div",{style:{padding:"2rem 1rem",textAlign:"center",color:"#94a3b8",fontSize:"0.875rem",border:"1px dashed #e2e8f0",borderRadius:"8px"},children:we?"Axtarışa uyğun xəbər tapılmadı.":'Hələ heç bir xəbər yoxdur. Yeni xəbər yaratmaq üçün yuxarıdakı "+" düyməsini basın.'}):Ys.map(t=>e.jsxs("div",{className:"page-nav-wrapper",style:{position:"relative",marginBottom:"4px"},children:[e.jsxs("button",{className:`page-nav-item ${Ke===t.id?"active":""}`,onClick:()=>$a(t.id),style:{width:"100%",paddingRight:"40px",textAlign:"left"},children:[e.jsx(ct,{size:14})," ",t.title,e.jsx("div",{style:{fontSize:"10px",color:"#999",marginLeft:"24px"},children:t.date})]}),e.jsx("button",{className:"delete-section-btn",onClick:a=>Wa(t.id,a),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ff4d4f",opacity:.5,cursor:"pointer"},children:e.jsx(W,{size:14})})]},t.id))})]}),e.jsx("main",{className:"editor-canvas editor-canvas-flat",children:Ke!==null&&Q.id!==void 0?e.jsxs("div",{className:"editor-workspace",children:[e.jsxs("div",{className:"canvas-header canvas-header-block",children:[e.jsxs("h2",{style:{fontSize:"2rem",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(ct,{size:22})," Xəbəri Redaktə Et"]}),e.jsxs("p",{style:{color:"#64748b"},children:[Q.title," // ID: ",Q.id]})]}),e.jsxs("div",{className:"edit-grid grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"BAŞLIQ (AZ)"}),e.jsx("input",{type:"text",value:Q.title,onChange:t=>De("title",t.target.value,Q.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"TARİX"}),e.jsx("input",{type:"date",value:Q.date,onChange:t=>De("date",t.target.value,Q.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"KATEQORİYA"}),e.jsx("input",{type:"text",value:Q.category,onChange:t=>De("category",t.target.value,Q.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"VƏZİYYƏT"}),e.jsxs("select",{value:Q.status,onChange:t=>De("status",t.target.value,Q.id),children:[e.jsx("option",{value:"draft",children:"Qaralama"}),e.jsx("option",{value:"published",children:"Dərc edilib"})]})]}),e.jsxs("div",{className:"form-group full-span",children:[e.jsx("label",{children:"ŞƏKİL"}),e.jsx("div",{style:{width:"100%",height:"180px",borderRadius:"10px",overflow:"hidden",border:"1px solid #e2e8f0",background:"#f8fafc",marginBottom:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:Q.img?e.jsx("img",{src:Q.img,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("span",{style:{color:"#94a3b8",fontSize:"12px"},children:"Şəkil seçilməyib"})}),e.jsxs("div",{className:"input-row",children:[e.jsx("input",{type:"text",value:Q.img,onChange:t=>De("img",t.target.value,Q.id)}),e.jsx("input",{type:"file",id:"news-full-img",style:{display:"none"},onChange:async t=>{const a=t.target.files?.[0];if(a){const i=await _e(a);i&&De("img",i,Q.id)}}}),e.jsx("button",{onClick:()=>document.getElementById("news-full-img")?.click(),className:"btn-secondary",children:"Yüklə"})]})]}),e.jsxs("div",{className:"form-group full-span",children:[e.jsx("label",{children:"MƏZMUN"}),e.jsx(Mt,{id:"news-full-desc",value:Dt(Q.description||""),onChange:t=>De("description",t,Q.id)})]})]}),e.jsx("div",{className:"editor-savebar",children:e.jsx("button",{className:"btn-primary",onClick:Xt,children:"Yadda Saxla"})})]}):e.jsxs("div",{className:"editor-empty",children:[e.jsx(ct,{size:48,style:{opacity:.2}}),e.jsx("p",{children:"Redaktə etmək üçün sol tərəfdən xəbər seçin və ya yeni yaradın."})]})})]}):V==="events"?e.jsxs("div",{className:"editor-layout with-sidebar",children:[e.jsxs("aside",{className:"page-list",children:[e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Tədbirlər"}),e.jsx("button",{className:"add-section-btn",onClick:Ya,children:e.jsx(H,{size:16})})]}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 300px)"},children:Ks.length===0?e.jsx("div",{style:{padding:"2rem 1rem",textAlign:"center",color:"#94a3b8",fontSize:"0.875rem",border:"1px dashed #e2e8f0",borderRadius:"8px"},children:we?"Axtarışa uyğun tədbir tapılmadı.":'Hələ heç bir tədbir yoxdur. Yeni tədbir yaratmaq üçün yuxarıdakı "+" düyməsini basın.'}):Ks.map(t=>e.jsxs("div",{className:"page-nav-wrapper",style:{position:"relative",marginBottom:"4px"},children:[e.jsxs("button",{className:`page-nav-item ${Ye===t.id?"active":""}`,onClick:()=>Fa(t.id),style:{width:"100%",paddingRight:"40px",textAlign:"left"},children:[e.jsx(wt,{size:14})," ",t.title,e.jsx("div",{style:{fontSize:"10px",color:"#999",marginLeft:"24px"},children:t.date})]}),e.jsx("button",{className:"delete-section-btn",onClick:a=>Ka(t.id,a),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ff4d4f",opacity:.5,cursor:"pointer"},children:e.jsx(W,{size:14})})]},t.id))})]}),e.jsx("main",{className:"editor-canvas editor-canvas-flat",children:Ye!==null&&K.id!==void 0?e.jsxs("div",{className:"editor-workspace",children:[e.jsxs("div",{className:"canvas-header canvas-header-block",children:[e.jsxs("h2",{style:{fontSize:"2rem",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(wt,{size:22})," Tədbiri Redaktə Et"]}),e.jsxs("p",{style:{color:"#64748b"},children:[K.title," // ID: ",K.id]})]}),e.jsxs("div",{className:"edit-grid grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"TƏDBİR ADI"}),e.jsx("input",{type:"text",value:K.title,onChange:t=>pe("title",t.target.value,K.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"TARİX"}),e.jsx("input",{type:"date",value:K.date,onChange:t=>pe("date",t.target.value,K.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"MƏKAN"}),e.jsx("input",{type:"text",value:K.location,onChange:t=>pe("location",t.target.value,K.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"KATEQORİYA"}),e.jsx("input",{type:"text",value:K.category,onChange:t=>pe("category",t.target.value,K.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"VƏZİYYƏT"}),e.jsxs("select",{value:K.status,onChange:t=>pe("status",t.target.value,K.id),children:[e.jsx("option",{value:"planned",children:"Gələcək"}),e.jsx("option",{value:"past",children:"Keçmiş"})]})]}),e.jsxs("div",{className:"form-group full-span",children:[e.jsx("label",{children:"ŞƏKİL"}),e.jsx("div",{style:{width:"100%",height:"180px",borderRadius:"10px",overflow:"hidden",border:"1px solid #e2e8f0",background:"#f8fafc",marginBottom:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:K.img?e.jsx("img",{src:K.img,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("span",{style:{color:"#94a3b8",fontSize:"12px"},children:"Şəkil seçilməyib"})}),e.jsxs("div",{className:"input-row",children:[e.jsx("input",{type:"text",value:K.img,onChange:t=>pe("img",t.target.value,K.id)}),e.jsx("input",{type:"file",id:"event-full-img",style:{display:"none"},onChange:async t=>{const a=t.target.files?.[0];if(a){const i=await _e(a);i&&pe("img",i,K.id)}}}),e.jsx("button",{onClick:()=>document.getElementById("event-full-img")?.click(),className:"btn-secondary",children:"Yüklə"})]})]}),e.jsxs("div",{className:"form-group full-span",children:[e.jsx("label",{children:"TƏSVİR"}),e.jsx(Mt,{id:"event-full-desc",value:Dt(K.description||""),onChange:t=>pe("description",t,K.id)})]}),e.jsxs("div",{className:"form-group full-span",children:[e.jsx("label",{children:"PDF URL"}),e.jsxs("div",{className:"input-row",children:[e.jsx("input",{type:"text",value:K.pdfUrl||"",onChange:t=>pe("pdfUrl",t.target.value,K.id),placeholder:"https://.../rules.pdf"}),e.jsx("input",{type:"file",id:"event-full-pdf",accept:".pdf,application/pdf",style:{display:"none"},onChange:async t=>{const a=t.target.files?.[0];if(!a)return;if(a.type!=="application/pdf"&&!a.name.toLowerCase().endsWith(".pdf")){E.error("Yalnız PDF faylı yüklənə bilər");return}const i=await Wt(a,{loadingText:"PDF yüklənir...",successText:"PDF uğurla yükləndi",errorText:"PDF yüklənərkən xəta baş verdi"});i&&pe("pdfUrl",i,K.id),t.target.value=""}}),e.jsx("button",{type:"button",onClick:()=>document.getElementById("event-full-pdf")?.click(),className:"btn-secondary",children:"PDF Yüklə"})]})]}),e.jsxs("div",{className:"form-group full-span",children:[e.jsx("label",{children:"QAYDALAR"}),e.jsx(Mt,{id:"event-full-rules",value:Dt(K.rules||""),onChange:t=>pe("rules",t,K.id)})]})]}),e.jsx("div",{className:"editor-savebar",children:e.jsx("button",{className:"btn-primary",onClick:Xt,children:"Yadda Saxla"})})]}):e.jsxs("div",{className:"editor-empty",children:[e.jsx(wt,{size:48,style:{opacity:.2}}),e.jsx("p",{children:"Redaktə etmək üçün sol tərəfdən tədbir seçin və ya yeni yaradın."})]})})]}):V==="drivers"?e.jsxs("div",{className:"editor-layout with-sidebar",children:[e.jsxs("aside",{className:"page-list",children:[e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Kateqoriyalar"}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("button",{className:"add-section-btn",onClick:ai,title:"Kateqoriya əlavə et",children:e.jsx(H,{size:16})}),e.jsx("button",{className:"delete-section-btn",onClick:ii,title:"Seçilmiş kateqoriyanı sil",style:{background:"none",border:"none",color:"#ff4d4f",cursor:"pointer",padding:"4px"},children:e.jsx(W,{size:16})})]})]}),e.jsx("select",{value:J||"",onChange:t=>Xa(t.target.value),style:{width:"100%",padding:"10px",marginBottom:"1.5rem",borderRadius:"8px",border:"1px solid #e2e8f0",background:"white",fontWeight:"bold"},children:ue.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))}),e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Sürücülər"}),e.jsx("button",{className:"add-section-btn",onClick:ei,children:e.jsx(H,{size:16})})]}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 400px)"},children:J&&(ue.find(t=>t.id===J)?.drivers||[]).filter(t=>Ge(t.name,t.license,t.team,t.rank,t.points,t.wins)).length===0?e.jsx("div",{style:{padding:"2rem 1rem",textAlign:"center",color:"#94a3b8",fontSize:"0.875rem"},children:we?"Axtarışa uyğun sürücü tapılmadı.":"Bu kateqoriyada sürücü yoxdur."}):(ue.find(t=>t.id===J)?.drivers||[]).filter(t=>Ge(t.name,t.license,t.team,t.rank,t.points,t.wins)).map(t=>e.jsxs("div",{className:"page-nav-wrapper",style:{position:"relative",marginBottom:"4px"},children:[e.jsxs("button",{className:`page-nav-item ${$e===t.id?"active":""}`,onClick:()=>Ja(t.id),style:{width:"100%",paddingRight:"40px",textAlign:"left"},children:[e.jsxs("span",{style:{fontWeight:"900",color:"var(--primary)",marginRight:"8px"},children:["#",t.rank]})," ",t.name]}),e.jsx("button",{className:"delete-section-btn",onClick:a=>{a.stopPropagation(),ti(t.id)},style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ff4d4f",opacity:.5,cursor:"pointer"},children:e.jsx(W,{size:14})})]},t.id))})]}),e.jsx("main",{className:"editor-canvas editor-canvas-flat",children:$e!==null&&le.id!==void 0?e.jsxs("div",{className:"editor-workspace",children:[e.jsxs("div",{className:"canvas-header canvas-header-block",children:[e.jsx("h2",{style:{fontSize:"2rem"},children:le.name}),e.jsxs("p",{style:{color:"#64748b"},children:[ue.find(t=>t.id===J)?.name," // RANK #",le.rank]})]}),e.jsxs("div",{className:"edit-grid grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"SÜRÜCÜNÜN ADI VƏ SOYADI"}),e.jsx("input",{type:"text",value:le.name,onChange:t=>Me("name",t.target.value),placeholder:"Məs: Əli Məmmədov",style:{width:"100%",padding:"14px",border:"2px solid #e2e8f0",borderRadius:"12px",fontSize:"16px",fontWeight:"bold"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"YARIŞ SIRALAMASI (RANK)"}),e.jsx("input",{type:"number",value:le.rank,readOnly:!0,style:{width:"100%",padding:"14px",border:"2px solid #e2e8f0",borderRadius:"12px",fontSize:"16px",background:"#f8fafc",color:"#94a3b8",cursor:"not-allowed"}}),e.jsx("p",{style:{fontSize:"11px",color:"#3b82f6",marginTop:"6px",fontWeight:"bold"},children:"ℹ️ Bu sıra ballara görə avtomatik hesablanır"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"PİLOT LİSENZİYASI"}),e.jsx("input",{type:"text",value:le.license,onChange:t=>Me("license",t.target.value),placeholder:"Məs: A-SİNFİ",style:{width:"100%",padding:"14px",border:"2px solid #e2e8f0",borderRadius:"12px",fontSize:"15px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"TƏMSİL ETDİYİ KOMANDA"}),e.jsx("input",{type:"text",value:le.team,onChange:t=>Me("team",t.target.value),placeholder:"Məs: FORSAJ RACING",style:{width:"100%",padding:"14px",border:"2px solid #e2e8f0",borderRadius:"12px",fontSize:"15px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"QALİBİYYƏT (WINS)"}),e.jsx("input",{type:"number",value:le.wins,onChange:t=>Me("wins",parseInt(t.target.value)),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"XAL (POINTS)"}),e.jsx("input",{type:"number",value:le.points,onChange:t=>Me("points",parseInt(t.target.value)),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),e.jsxs("div",{className:"form-group full-span",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"PİLOT ŞƏKLİ"}),e.jsxs("div",{className:"input-row",children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",overflow:"hidden",background:"#f1f5f9",border:"2px solid var(--primary)"},children:le.img?e.jsx("img",{src:le.img,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(he,{size:24,style:{opacity:.2}})})}),e.jsxs("div",{className:"input-row",style:{flex:1},children:[e.jsx("input",{type:"text",value:le.img||"",onChange:t=>Me("img",t.target.value),placeholder:"Şəkil URL və ya yol...",style:{flex:1,padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),e.jsx("input",{type:"file",id:"driver-img-upload",style:{display:"none"},accept:"image/*",onChange:async t=>{const a=t.target.files?.[0];if(a){const i=await _e(a);i&&Me("img",i)}}}),e.jsx("button",{onClick:()=>document.getElementById("driver-img-upload")?.click(),style:{background:"#f1f5f9",border:"1px solid #e2e8f0",padding:"12px",borderRadius:"8px",cursor:"pointer"},children:"Yüklə"})]})]})]})]}),e.jsx("div",{className:"editor-savebar",children:e.jsx("button",{className:"btn-primary",onClick:si,disabled:b,children:b?"Gözləyin...":"Sürücünü Yadda Saxla"})})]}):e.jsxs("div",{className:"editor-empty",children:[e.jsx(ot,{size:48,style:{opacity:.2}}),e.jsx("p",{children:"Redaktə etmək üçün sol tərəfdən sürücü seçin."})]})})]}):V==="videos"?e.jsxs("div",{className:"editor-layout with-sidebar",children:[e.jsxs("aside",{className:"page-list",children:[e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Videolar"}),e.jsx("button",{className:"add-section-btn",onClick:Va,children:e.jsx(H,{size:16})})]}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 300px)"},children:$s.length===0?e.jsx("div",{style:{padding:"2rem 1rem",textAlign:"center",color:"#94a3b8",fontSize:"0.875rem"},children:we?"Axtarışa uyğun video tapılmadı.":"Heç bir video əlavə edilməyib."}):$s.map(t=>e.jsxs("div",{className:"page-nav-wrapper",style:{position:"relative",marginBottom:"4px"},children:[e.jsxs("button",{className:`page-nav-item ${Je===t.id?"active":""}`,onClick:()=>_s(t.id),style:{width:"100%",paddingRight:"40px",textAlign:"left",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"24px",height:"16px",background:"#333",borderRadius:"2px",overflow:"hidden"},children:t.thumbnail&&e.jsx("img",{src:t.thumbnail,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})}),e.jsx("span",{style:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.title})]}),e.jsx("button",{className:"delete-section-btn",onClick:a=>{a.stopPropagation(),Za(t.id,a)},style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ff4d4f",opacity:.5,cursor:"pointer"},children:e.jsx(W,{size:14})})]},t.id))})]}),e.jsx("main",{className:"editor-canvas editor-canvas-flat",children:Je!==null&&de.id!==void 0?e.jsxs("div",{className:"editor-workspace",children:[e.jsxs("div",{className:"canvas-header canvas-header-block",children:[e.jsx("h2",{style:{fontSize:"2rem"},children:"Video Redaktəsi"}),e.jsxs("p",{style:{color:"#64748b"},children:[de.title," // ID: ",de.id]})]}),e.jsxs("div",{className:"edit-grid grid-1",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"VİDEO BAŞLIĞI"}),e.jsx("input",{type:"text",value:de.title,onChange:t=>Lt("title",t.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"16px",fontWeight:"bold"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"YOUTUBE URL"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(ne,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#94a3b8"}}),e.jsx("input",{type:"text",value:de.youtubeUrl,onChange:t=>Lt("youtubeUrl",t.target.value),placeholder:"https://www.youtube.com/watch?v=...",style:{width:"100%",padding:"12px 12px 12px 40px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),e.jsx("p",{style:{fontSize:"11px",color:"#64748b",marginTop:"6px"},children:"YouTube linkini daxil etdikdə şəkil və ID avtomatik təyin olunacaq."})]}),e.jsxs("div",{className:"edit-grid grid-2-compact",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"MÜDDƏT (MƏS: 05:20)"}),e.jsx("input",{type:"text",value:de.duration,onChange:t=>Lt("duration",t.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"VİDEO ID (AVTOMATİK)"}),e.jsx("input",{type:"text",value:de.videoId,readOnly:!0,style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#94a3b8"}})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"YARADILMA TARİXİ"}),e.jsx("input",{type:"text",value:de.created_at||"",onChange:t=>Lt("created_at",t.target.value),placeholder:"2026-02-16T10:30:00.000Z",style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"ÖNİZLƏMƏ (THUMBNAIL)"}),e.jsxs("div",{style:{width:"100%",aspectRatio:"16/9",borderRadius:"12px",overflow:"hidden",background:"#000",border:"1px solid #e2e8f0",position:"relative"},children:[de.thumbnail?e.jsx("img",{src:de.thumbnail,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"1rem"},children:[e.jsx(ns,{size:48,style:{opacity:.1,color:"white"}}),e.jsx("p",{style:{color:"#64748b",fontSize:"12px"},children:"YouTube linki daxil edin"})]}),de.videoId&&e.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.3)",cursor:"pointer"},onClick:()=>window.open(de.youtubeUrl,"_blank"),children:e.jsx("div",{style:{background:"#FF4D00",color:"white",padding:"12px",borderRadius:"50%",boxShadow:"0 0 20px rgba(255,77,0,0.4)"},children:e.jsx(Ti,{size:24,fill:"currentColor"})})})]})]})]})]}):e.jsxs("div",{className:"editor-empty",children:[e.jsx(ns,{size:48,style:{opacity:.2}}),e.jsx("p",{children:"Redaktə etmək üçün sol tərəfdən video seçin və ya yeni əlavə edin."})]})})]}):V==="photos"?e.jsxs("div",{className:"editor-layout with-sidebar",children:[e.jsxs("aside",{className:"page-list",children:[e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Foto Arxiv"}),e.jsx("button",{className:"add-section-btn",onClick:Ga,title:"Yeni şəkil əlavə et",children:e.jsx(H,{size:16})})]}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 200px)"},children:Hs.length===0?e.jsx("p",{style:{padding:"20px",color:"#94a3b8",textAlign:"center",fontSize:"13px"},children:we?"Axtarışa uyğun şəkil tapılmadı.":"Şəkil yoxdur"}):Hs.map(t=>e.jsxs("div",{className:"page-nav-wrapper",style:{position:"relative",marginBottom:"4px"},children:[e.jsxs("button",{className:`page-nav-item ${et===t.id?"active":""}`,onClick:()=>Ms(t.id),style:{width:"100%",paddingRight:"40px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"4px",overflow:"hidden",flexShrink:0,background:"#eee"},children:t.url?e.jsx("img",{src:t.url,style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx(he,{size:12,style:{margin:"6px",opacity:.3}})}),e.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.title})]}),e.jsx("button",{className:"delete-section-btn",onClick:a=>qa(t.id,a),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ff4d4f",opacity:.5,cursor:"pointer"},children:e.jsx(W,{size:14})})]},t.id))})]}),e.jsx("main",{className:"editor-canvas editor-canvas-flat",children:et!==null&&ke.id!==void 0?e.jsxs("div",{className:"editor-workspace",children:[e.jsxs("div",{className:"canvas-header canvas-header-block",children:[e.jsx("h2",{style:{fontSize:"2rem"},children:"Şəkil Redaktəsi"}),e.jsxs("p",{style:{color:"#64748b"},children:[ke.title," // ID: ",ke.id]})]}),e.jsxs("div",{className:"edit-grid grid-1",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"ŞƏKİL BAŞLIĞI"}),e.jsx("input",{type:"text",value:ke.title,onChange:t=>Jt("title",t.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"16px",fontWeight:"bold"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"FOTO"}),e.jsxs("div",{style:{width:"100%",minHeight:"300px",borderRadius:"12px",overflow:"hidden",background:"#f8fafc",border:"1px dashed #cbd5e1",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"1rem"},children:[ke.url?e.jsx("img",{src:ke.url,alt:"",style:{maxWidth:"100%",maxHeight:"400px",objectFit:"contain"}}):e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"1rem"},children:[e.jsx(he,{size:48,style:{opacity:.1}}),e.jsx("p",{style:{color:"#64748b",fontSize:"12px"},children:"Şəkil seçilməyib"})]}),e.jsxs("div",{style:{marginTop:"1rem",display:"flex",gap:"1rem"},children:[e.jsx("input",{type:"file",id:"gallery-photo-upload",style:{display:"none"},accept:"image/*",onChange:Qa}),e.jsxs("button",{onClick:()=>document.getElementById("gallery-photo-upload")?.click(),className:"btn-primary",style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(H,{size:18})," Şəkil Yüklə"]}),e.jsx("input",{type:"text",value:ke.url||"",onChange:t=>Jt("url",t.target.value),placeholder:"URL və ya yol...",style:{padding:"10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px",width:"250px"}})]})]})]})]})]}):e.jsxs("div",{className:"editor-empty",children:[e.jsx(he,{size:48,style:{opacity:.2}}),e.jsx("p",{children:"Redaktə etmək üçün sol tərəfdən şəkil seçin və ya yeni əlavə edin."})]})})]}):e.jsx("div",{className:"editor-layout",children:e.jsx("main",{className:"editor-canvas",style:{width:"100%"},children:ni?e.jsxs("div",{className:"edit-fields",style:{width:"100%"},children:[Ae==="home"&&e.jsx("div",{className:"canvas-header",children:e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:800,color:"var(--text-main)"},children:"Ana Səhifə Blokları"})}),Ae==="abouttab"&&e.jsx("div",{className:"canvas-header",children:e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:800,color:"var(--text-main)"},children:"HAQQIMIZDA"})}),ws.map(({page:t,pageIdx:a})=>{const i=(t.sections||[]).filter(u=>!(oa(u)||t.id==="about"&&Ue(u.id)||t.id==="rulespage"&&as.test(u.id)||t.id==="rulespage"&&u.id.startsWith("RULES_"))).sort((u,c)=>te(u.order,0)-te(c.order,0)),n=(t.images||[]).sort((u,c)=>te(u.order,0)-te(c.order,0)),d=t.id==="about"?(()=>{const u=new Map;return(t.sections||[]).forEach(c=>{if(!Ue(c.id))return;const p=da(c.id)||c.id,j=u.get(p)||{label:"",value:""};c.id.startsWith(ye)&&(j.label=c.value||""),c.id.startsWith(je)&&(j.value=c.value||""),u.set(p,j)}),Array.from(u.entries()).sort(([c],[p])=>c.localeCompare(p,void 0,{numeric:!0})).map(([c,p])=>({suffix:c,...p}))})():[],h=t.id==="rulespage"?ge(t):[];return e.jsxs("div",{className:"field-group",children:[e.jsx("div",{className:"canvas-header",children:e.jsx("h2",{style:{fontSize:"1.05rem",fontWeight:800,color:"var(--text-main)"},children:is[t.id]||t.title})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.9rem"},children:[t.id==="about"&&e.jsxs("div",{className:"field-item-wrapper",style:{position:"relative",background:"#fcfcfd",padding:"1rem",borderRadius:"12px",border:"1px solid #f0f0f2"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b",fontWeight:800},children:"Statistikalar"}),e.jsxs("button",{type:"button",className:"add-field-minimal",onClick:()=>Vt(a),children:[e.jsx(H,{size:14})," Yeni Statistika"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:d.map(u=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 180px auto",gap:"8px",alignItems:"center"},children:[e.jsx("input",{type:"text",value:u.label,onChange:c=>At(u.suffix,"label",c.target.value,a),placeholder:"Statistika adı",style:{padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px",fontWeight:700}}),e.jsx("input",{type:"text",value:u.value,onChange:c=>At(u.suffix,"value",c.target.value,a),placeholder:"Dəyər",style:{padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px",fontWeight:700}}),e.jsx("button",{type:"button",onClick:()=>Ns(u.suffix,a),style:{background:"#fff",border:"1px solid #fee2e2",color:"#ef4444",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(W,{size:14})})]},u.suffix))})]}),t.id==="rulespage"&&e.jsxs("div",{className:"field-item-wrapper",style:{position:"relative",background:"#fcfcfd",padding:"1rem",borderRadius:"12px",border:"1px solid #f0f0f2"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b",fontWeight:800},children:"Qaydalar Sekmələri"}),e.jsxs("button",{type:"button",className:"add-field-minimal",onClick:()=>Ts(a),children:[e.jsx(H,{size:14})," Yeni Sekmə"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:h.map((u,c)=>{const p=c>0,j=c<h.length-1;return e.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"10px",padding:"10px",background:"#fff"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 180px 160px auto",gap:"8px",marginBottom:"8px",alignItems:"center"},children:[e.jsx("input",{type:"text",value:u.title,onChange:T=>ie(c,"title",T.target.value,a),placeholder:"Sekmə başlığı",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px",fontWeight:700}}),e.jsx("input",{type:"text",value:u.id,onChange:T=>ie(c,"id",T.target.value,a),placeholder:"Sekmə ID",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),e.jsx("select",{value:u.icon,onChange:T=>ie(c,"icon",T.target.value,a),style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"},children:ts.map(T=>e.jsx("option",{value:T,children:T},T))}),e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[e.jsx("button",{type:"button",title:"Yuxarı",onClick:()=>Et(c,"up",a),disabled:!p,style:{width:"30px",height:"30px",border:"1px solid #e2e8f0",background:"#fff",borderRadius:"8px",color:p?"#334155":"#cbd5e1"},children:e.jsx(rt,{size:14})}),e.jsx("button",{type:"button",title:"Aşağı",onClick:()=>Et(c,"down",a),disabled:!j,style:{width:"30px",height:"30px",border:"1px solid #e2e8f0",background:"#fff",borderRadius:"8px",color:j?"#334155":"#cbd5e1"},children:e.jsx(dt,{size:14})}),e.jsx("button",{type:"button",title:"Sekməni sil",onClick:()=>Ls(c,a),style:{width:"30px",height:"30px",border:"1px solid #fee2e2",background:"#fff",borderRadius:"8px",color:"#ef4444"},children:e.jsx(W,{size:14})})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 180px",gap:"8px",marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:u.docName||"",onChange:T=>ie(c,"docName",T.target.value,a),placeholder:"Sənəd adı (Məs: PILOT_PROTOKOLU.PDF)",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),e.jsx("input",{type:"text",value:u.docButton||"",onChange:T=>ie(c,"docButton",T.target.value,a),placeholder:"Düymə mətni (Məs: PDF YÜKLƏ)",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsx(ne,{size:14,style:{color:"#94a3b8"}}),e.jsx("input",{type:"text",value:u.docUrl||"",onChange:T=>ie(c,"docUrl",T.target.value,a),placeholder:"Sənəd linki (Məs: /uploads/pilot.pdf və ya https://...)",style:{width:"100%",padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),e.jsx("input",{id:`rules-doc-upload-${a}-${c}`,type:"file",accept:".pdf,application/pdf",style:{display:"none"},onChange:async T=>{const z=T.target.files?.[0];z&&(await Os(z,c,a),T.target.value="")}}),e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>document.getElementById(`rules-doc-upload-${a}-${c}`)?.click(),children:"PDF Yüklə"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[(u.items||[]).map((T,z)=>e.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"8px",padding:"8px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"8px",marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:T.title,onChange:M=>Tt(c,z,"title",M.target.value,a),placeholder:"Maddə başlığı",style:{padding:"8px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px",fontWeight:700}}),e.jsx("button",{type:"button",title:"Maddəni sil",onClick:()=>ks(c,z,a),style:{width:"30px",height:"30px",border:"1px solid #fee2e2",background:"#fff",borderRadius:"8px",color:"#ef4444"},children:e.jsx(W,{size:14})})]}),e.jsx("textarea",{rows:3,value:T.desc,onChange:M=>Tt(c,z,"desc",M.target.value,a),placeholder:"Maddə təsviri",style:{width:"100%",padding:"8px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px",lineHeight:1.4,resize:"vertical"}})]},`rules-tab-item-group-${u.index}-${T.index}`)),e.jsxs("button",{type:"button",className:"add-field-minimal",onClick:()=>Cs(c,a),children:[e.jsx(H,{size:14})," Maddə Əlavə Et"]})]})]},`rules-tab-group-${u.index}-${u.id}`)})})]}),i.map(u=>{const c=Pe(u),p=Ve(u,"value"),j=Ve(u,"url"),T=!!u.url?.trim(),z=Fs(u);return e.jsxs("div",{className:"field-item-wrapper",style:{position:"relative",background:"#fcfcfd",padding:"1rem",borderRadius:"12px",border:"1px solid #f0f0f2"},children:[e.jsx("div",{style:{fontSize:"11px",color:"#64748b",fontWeight:700,marginBottom:"6px"},children:c?ra(c):u.label}),z?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"180px 1fr",gap:"8px"},children:[e.jsx("select",{value:u.value||"",disabled:!p,onChange:M=>ae(a,u.id,"value",M.target.value),style:{padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px"},children:na.map(M=>e.jsx("option",{value:M,children:M},M))}),e.jsx("input",{type:"text",value:u.value||"",disabled:!p,onChange:M=>ae(a,u.id,"value",M.target.value),style:{padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px"}})]}):e.jsx("textarea",{rows:3,value:u.value,disabled:!p,onChange:M=>ae(a,u.id,"value",M.target.value),style:{width:"100%",padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px",lineHeight:1.4,resize:"vertical"}}),T&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"0.75rem"},children:[e.jsx(ne,{size:14,style:{color:"#94a3b8"}}),e.jsx("input",{type:"text",value:Be(u.url||""),disabled:!j,onChange:M=>ae(a,u.id,"url",M.target.value),onBlur:()=>js(a,u.id),placeholder:"https://example.com/path",style:{fontSize:"12px",padding:"6px 10px",border:"1px solid #e2e8f0",borderRadius:"6px",flex:1}})]}),!T&&j&&e.jsxs("button",{type:"button",className:"add-field-minimal",onClick:()=>ae(a,u.id,"url",`${window.location.origin}/`),style:{marginTop:"0.75rem"},children:[e.jsx(H,{size:14})," Link əlavə et"]})]},`${t.id}-${u.id}`)})]}),e.jsxs("div",{style:{marginTop:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b",fontWeight:700},children:"Şəkillər"}),e.jsxs("button",{type:"button",className:"add-field-minimal",onClick:()=>{const u=[...s],c=u[a];c&&(c.images.push({id:`img-${c.images.length}-${Date.now()}`,path:"",alt:"",type:"local",order:c.images.length}),l(u))},children:[e.jsx(H,{size:14})," Yeni Şəkil"]})]}),e.jsxs("div",{className:"images-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))",gap:"1rem"},children:[n.length===0&&e.jsx("div",{className:"empty-fields-tip",style:{gridColumn:"1/-1",textAlign:"center",padding:"1rem",border:"1px dashed #cbd5e1",borderRadius:"10px",color:"#64748b"},children:"Bu bölmədə şəkil yoxdur."}),n.map(u=>e.jsxs("div",{className:"image-edit-card",style:{border:"1px solid #eee",borderRadius:"12px",padding:"0.75rem",background:"#fff"},children:[e.jsx("div",{style:{height:"120px",background:"#f8fafc",borderRadius:"8px",marginBottom:"8px",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:u.path?e.jsx("img",{src:u.path,alt:u.alt||u.id,style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("span",{style:{fontSize:"11px",color:"#94a3b8"},children:"Önizləmə yoxdur"})}),e.jsx("input",{type:"text",value:u.path,placeholder:"Tam şəkil linki",onChange:c=>{const p=[...s],j=p[a];if(!j)return;const T=j.images.findIndex(z=>z.id===u.id);T!==-1&&(j.images[T].path=c.target.value,l(p))},style:{width:"100%",fontSize:"12px",padding:"8px 10px",border:"1px solid #e2e8f0",borderRadius:"6px",marginBottom:"8px"}}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"},children:[e.jsx("input",{id:`group-file-up-${t.id}-${u.id}`,type:"file",accept:"image/*",style:{display:"none"},onChange:async c=>{const p=c.target.files?.[0];if(!p)return;const j=await _e(p);if(!j)return;const T=[...s],z=T[a];if(!z)return;const M=z.images.findIndex(P=>P.id===u.id);M!==-1&&(z.images[M].path=j,z.images[M].type="local",l(T))}}),e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>document.getElementById(`group-file-up-${t.id}-${u.id}`)?.click(),style:{fontSize:"11px",padding:"6px 10px"},children:"Fayldan yüklə"}),e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>Is(a,u.id),style:{fontSize:"11px",padding:"6px 10px"},children:"Kitabxanadan seç"})]}),e.jsx("input",{type:"text",value:u.alt,placeholder:"Alt mətni",onChange:c=>Ss(a,u.id,c.target.value),style:{width:"100%",fontSize:"12px",padding:"8px 10px",border:"1px solid #e2e8f0",borderRadius:"6px"}})]},`${t.id}-${u.id}`))]})]})]},t.id)})]}):Y?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"canvas-header",children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:800,color:"var(--text-main)"},children:is[Y.id]||Y.title}),e.jsxs("div",{className:"canvas-actions",children:[Y.id==="about"&&e.jsxs("button",{className:"add-field-minimal",onClick:()=>Vt(),style:{background:"#f5f3ff",color:"#7c3aed",border:"1px solid #ddd6fe"},children:[e.jsx(ot,{size:14})," Statistika Əlavə Et"]}),Y.id==="values"&&e.jsxs("button",{className:"add-field-minimal",onClick:()=>{at("text","İkon Kodu (Shield/Users/Leaf/Zap)",`val-icon-${Date.now()}`),at("text","Dəyər Başlığı",`val-title-${Date.now()}`),at("text","Dəyər Təsviri",`val-desc-${Date.now()}`)},style:{background:"#f0fdf4",color:"#16a34a",border:"1px solid #bbf7d0"},children:[e.jsx(H,{size:14})," Yeni Dəyər Əlavə Et"]}),e.jsx("div",{style:{width:"1px",height:"24px",background:"#e2e8f0",margin:"0 4px"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"#f8fafc",padding:"4px 12px",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:800,color:"#64748b"},children:"VƏZİYYƏT:"}),e.jsx("button",{onClick:()=>{const t=[...s];t[r].active=Y?.active===!1,l(t),E.success(t[r].active?"Bölmə aktivləşdirildi":"Bölmə deaktiv edildi")},style:{width:"36px",height:"18px",borderRadius:"9px",background:Y?.active!==!1?"#10b981":"#cbd5e1",position:"relative",cursor:"pointer",border:"none",transition:"background 0.3s"},children:e.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:"white",position:"absolute",top:"2px",left:Y?.active!==!1?"20px":"2px",transition:"left 0.3s"}})})]})]})]}),e.jsxs("div",{className:"edit-fields",children:[Y.id==="about"&&e.jsxs("div",{className:"field-group",children:[e.jsxs("div",{className:"field-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("label",{children:[e.jsx(ot,{size:16})," Statistikalar"]}),e.jsxs("button",{className:"add-field-minimal",onClick:()=>Vt(),children:[e.jsx(H,{size:14})," Yeni Statistika"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:Bs.length>0?Bs.map(t=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 180px auto",gap:"8px",alignItems:"center",padding:"10px",border:"1px solid #e2e8f0",borderRadius:"10px",background:"#fff"},children:[e.jsx("input",{type:"text",value:t.label,onChange:a=>At(t.suffix,"label",a.target.value),placeholder:"Statistika adı (Məs: PİLOTLAR)",style:{padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px",fontWeight:700}}),e.jsx("input",{type:"text",value:t.value,onChange:a=>At(t.suffix,"value",a.target.value),placeholder:"Dəyər (Məs: 140+)",style:{padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px",fontWeight:700}}),e.jsx("button",{onClick:()=>Ns(t.suffix),title:"Statistikanı sil",style:{background:"#fff",border:"1px solid #fee2e2",color:"#ef4444",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(W,{size:14})})]},t.suffix)):e.jsx("div",{style:{padding:"1rem",border:"1px dashed #cbd5e1",borderRadius:"8px",color:"#64748b",fontSize:"13px"},children:w?"Axtarışa uyğun statistika tapılmadı.":'Hələ statistika yoxdur. "Yeni Statistika" ilə əlavə edin.'})})]}),Y.id==="partners"&&e.jsxs("div",{className:"field-group",children:[e.jsxs("div",{className:"field-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("label",{children:[e.jsx(ot,{size:16})," Tərəfdaş Kartları"]}),e.jsxs("button",{className:"add-field-minimal",onClick:Da,children:[e.jsx(H,{size:14})," Tərəfdaş Əlavə Et"]})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",color:"#64748b",marginBottom:"6px",fontWeight:700},children:"Bölmə Başlığı"}),e.jsx("input",{type:"text",value:Y.sections.find(t=>t.id==="SECTION_TITLE")?.value||"",onChange:t=>ae(r,"SECTION_TITLE","value",t.target.value),style:{width:"100%",padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px",fontWeight:700}})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:Us.map((t,a)=>{const i=a>0,n=a<Us.length-1;return e.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"10px",padding:"12px",background:"#fff"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 200px auto",gap:"8px",marginBottom:"8px",alignItems:"center"},children:[e.jsx("input",{type:"text",value:t.name,onChange:d=>lt(t.index,"name",d.target.value),placeholder:"Tərəfdaş adı",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),e.jsx("input",{type:"text",value:t.tag,onChange:d=>lt(t.index,"tag",d.target.value),placeholder:"Etiket",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),e.jsx("input",{type:"text",value:t.icon,onChange:d=>lt(t.index,"icon",d.target.value),placeholder:"ShieldCheck / Truck / Globe / Zap",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[e.jsx("button",{title:"Yuxarı",onClick:()=>Rs(t.index,"up"),disabled:!i,style:{width:"30px",height:"30px",border:"1px solid #e2e8f0",background:"#fff",borderRadius:"8px",color:i?"#334155":"#cbd5e1"},children:e.jsx(rt,{size:14})}),e.jsx("button",{title:"Aşağı",onClick:()=>Rs(t.index,"down"),disabled:!n,style:{width:"30px",height:"30px",border:"1px solid #e2e8f0",background:"#fff",borderRadius:"8px",color:n?"#334155":"#cbd5e1"},children:e.jsx(dt,{size:14})}),e.jsx("button",{title:"Sil",onClick:()=>Ma(t.index),style:{width:"30px",height:"30px",border:"1px solid #fee2e2",background:"#fff",borderRadius:"8px",color:"#ef4444"},children:e.jsx(W,{size:14})})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"170px 1fr",gap:"8px",alignItems:"center"},children:[e.jsxs("select",{value:t.useImage,onChange:d=>lt(t.index,"useImage",d.target.value),style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"},children:[e.jsx("option",{value:"false",children:"İkon istifadə et"}),e.jsx("option",{value:"true",children:"Görsel istifadə et"})]}),e.jsx("input",{type:"text",value:t.imageId,onChange:d=>lt(t.index,"imageId",d.target.value),placeholder:"Görsel ID (Məs: partner-image-1)",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}})]})]},t.index)})})]}),Y.id==="rulespage"&&e.jsxs("div",{className:"field-group",children:[e.jsxs("div",{className:"field-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("label",{children:[e.jsx(Bt,{size:16})," Qaydalar Sekmələri"]}),e.jsxs("button",{className:"add-field-minimal",onClick:()=>Ts(),children:[e.jsx(H,{size:14})," Yeni Sekmə"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:Ps.map((t,a)=>{const i=a>0,n=a<Ps.length-1;return e.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"10px",padding:"12px",background:"#fff"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 200px 170px auto",gap:"8px",marginBottom:"8px",alignItems:"center"},children:[e.jsx("input",{type:"text",value:t.title,onChange:d=>ie(a,"title",d.target.value),placeholder:"Sekmə başlığı",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px",fontWeight:700}}),e.jsx("input",{type:"text",value:t.id,onChange:d=>ie(a,"id",d.target.value),placeholder:"Sekmə ID",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),e.jsx("select",{value:t.icon,onChange:d=>ie(a,"icon",d.target.value),style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"},children:ts.map(d=>e.jsx("option",{value:d,children:d},d))}),e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[e.jsx("button",{title:"Yuxarı",onClick:()=>Et(a,"up"),disabled:!i,style:{width:"30px",height:"30px",border:"1px solid #e2e8f0",background:"#fff",borderRadius:"8px",color:i?"#334155":"#cbd5e1"},children:e.jsx(rt,{size:14})}),e.jsx("button",{title:"Aşağı",onClick:()=>Et(a,"down"),disabled:!n,style:{width:"30px",height:"30px",border:"1px solid #e2e8f0",background:"#fff",borderRadius:"8px",color:n?"#334155":"#cbd5e1"},children:e.jsx(dt,{size:14})}),e.jsx("button",{title:"Sekməni sil",onClick:()=>Ls(a),style:{width:"30px",height:"30px",border:"1px solid #fee2e2",background:"#fff",borderRadius:"8px",color:"#ef4444"},children:e.jsx(W,{size:14})})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 180px",gap:"8px",marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:t.docName||"",onChange:d=>ie(a,"docName",d.target.value),placeholder:"Sənəd adı (Məs: PILOT_PROTOKOLU.PDF)",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),e.jsx("input",{type:"text",value:t.docButton||"",onChange:d=>ie(a,"docButton",d.target.value),placeholder:"Düymə mətni (Məs: PDF YÜKLƏ)",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsx(ne,{size:14,style:{color:"#94a3b8"}}),e.jsx("input",{type:"text",value:t.docUrl||"",onChange:d=>ie(a,"docUrl",d.target.value),placeholder:"Sənəd linki (Məs: /uploads/pilot.pdf və ya https://...)",style:{width:"100%",padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),e.jsx("input",{id:`rules-doc-upload-current-${a}`,type:"file",accept:".pdf,application/pdf",style:{display:"none"},onChange:async d=>{const h=d.target.files?.[0];h&&(await Os(h,a),d.target.value="")}}),e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>document.getElementById(`rules-doc-upload-current-${a}`)?.click(),children:"PDF Yüklə"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[(t.items||[]).map((d,h)=>e.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"8px",padding:"8px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"8px",marginBottom:"8px"},children:[e.jsx("input",{type:"text",value:d.title,onChange:u=>Tt(a,h,"title",u.target.value),placeholder:"Maddə başlığı",style:{padding:"8px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px",fontWeight:700}}),e.jsx("button",{title:"Maddəni sil",onClick:()=>ks(a,h),style:{width:"30px",height:"30px",border:"1px solid #fee2e2",background:"#fff",borderRadius:"8px",color:"#ef4444"},children:e.jsx(W,{size:14})})]}),e.jsx("textarea",{rows:3,value:d.desc,onChange:u=>Tt(a,h,"desc",u.target.value),placeholder:"Maddə təsviri",style:{width:"100%",padding:"8px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px",lineHeight:1.4,resize:"vertical"}})]},`rules-item-${t.index}-${d.index}`)),e.jsxs("button",{className:"add-field-minimal",onClick:()=>Cs(a),children:[e.jsx(H,{size:14})," Maddə Əlavə Et"]})]})]},`rules-tab-${t.index}-${t.id}`)})})]}),e.jsxs("div",{className:"field-group",children:[e.jsxs("div",{className:"field-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("label",{children:[e.jsx(ga,{size:16})," Mətn Sahələri"]}),e.jsxs("button",{className:"add-field-minimal",onClick:()=>at("text"),children:[e.jsx(H,{size:14})," Mətn Əlavə Et"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:zs.length===0&&w?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#94a3b8",fontSize:"0.9rem",border:"1px dashed #e2e8f0",borderRadius:"8px"},children:"Bu səhifədə sorğuya uyğun mətn tapılmadı."}):zs.map((t,a)=>{const i=Pe(t),n=Ve(t,"label"),d=Ve(t,"value"),h=Ve(t,"url"),u=!!(t.url||"").trim(),c=_l(t),p=Y?.sections||[],j=p.findIndex(P=>P.id===t.id),T=j>0,z=j>=0&&j<p.length-1,M=Fs(t);return e.jsxs("div",{className:"field-item-wrapper",style:{background:"#fcfcfd",padding:"1.25rem",borderRadius:"14px",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"center",marginBottom:"0.75rem",flexWrap:"wrap"},children:[e.jsx("input",{type:"text",value:Pt(t.label)?ra(t.label):t.label,onChange:P=>ae(r,t.id,"label",P.target.value),disabled:!n,style:{fontSize:"0.85rem",fontWeight:800,textTransform:"uppercase",color:"var(--primary)",border:"none",background:"none",width:"auto",padding:0}}),i&&e.jsx("span",{style:{fontSize:"10px",color:"#475569",background:"#f1f5f9",borderRadius:"999px",padding:"3px 8px",fontWeight:700},children:"Açar mətn"}),e.jsxs("span",{style:{fontSize:"10px",color:"#94a3b8",fontWeight:700,marginLeft:"auto"},children:["Sıra: ",a+1]})]}),M?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"180px 1fr",gap:"8px"},children:[e.jsx("select",{value:t.value||"",onChange:P=>ae(r,t.id,"value",P.target.value),disabled:!d,style:{padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px"},children:na.map(P=>e.jsx("option",{value:P,children:P},P))}),e.jsx("input",{type:"text",value:t.value||"",onChange:P=>ae(r,t.id,"value",P.target.value),disabled:!d,style:{padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px"}})]}):i||!ri(t)?e.jsx("textarea",{value:t.value||"",onChange:P=>ae(r,t.id,"value",P.target.value),disabled:!d,rows:4,style:{width:"100%",padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px",lineHeight:"1.4",resize:"vertical"}}):e.jsx(Mt,{id:`editor-${t.id}`,value:Dt(t.value||""),onChange:P=>ae(r,t.id,"value",P),readOnly:!d}),u&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"0.75rem"},children:[e.jsx(ne,{size:14,style:{color:"#94a3b8"}}),e.jsx("input",{type:"text",value:Be(t.url||""),onChange:P=>ae(r,t.id,"url",P.target.value),onBlur:()=>js(r,t.id),disabled:!h,placeholder:"URL (Məs: /about veya https://...)",style:{fontSize:"12px",padding:"6px 10px",border:"1px solid #e2e8f0",borderRadius:"6px",flex:1}})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"0.9rem"},children:[!u&&h&&e.jsxs("button",{title:"Link əlavə et",onClick:()=>ae(r,t.id,"url",`${window.location.origin}/`),style:{background:"#fff",border:"1px solid #dbeafe",color:"#2563eb",borderRadius:"8px",padding:"6px 10px",display:"flex",alignItems:"center",gap:6,cursor:"pointer",fontSize:"12px"},children:[e.jsx(ne,{size:12})," Link əlavə et"]}),e.jsxs("button",{title:"Yuxarı daşı",onClick:()=>St("text",t.id,"up"),disabled:!T,style:{background:"#fff",border:"1px solid #e2e8f0",color:T?"#334155":"#cbd5e1",borderRadius:"8px",padding:"6px 10px",display:"flex",alignItems:"center",gap:6,cursor:T?"pointer":"not-allowed",fontSize:"12px"},children:[e.jsx(rt,{size:12})," Yuxarı"]}),e.jsxs("button",{title:"Aşağı daşı",onClick:()=>St("text",t.id,"down"),disabled:!z,style:{background:"#fff",border:"1px solid #e2e8f0",color:z?"#334155":"#cbd5e1",borderRadius:"8px",padding:"6px 10px",display:"flex",alignItems:"center",gap:6,cursor:z?"pointer":"not-allowed",fontSize:"12px"},children:[e.jsx(dt,{size:12})," Aşağı"]}),c&&e.jsxs("button",{className:"field-delete-btn",onClick:()=>As("text",t.id),style:{background:"#fff",border:"1px solid #fee2e2",color:"#ef4444",borderRadius:"8px",padding:"6px 10px",display:"flex",alignItems:"center",gap:6,cursor:"pointer",fontSize:"12px"},children:[e.jsx(W,{size:12})," Sil"]})]})]},t.id)})})]}),e.jsxs("div",{className:"field-group",children:[e.jsxs("div",{className:"field-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("label",{children:[e.jsx(he,{size:16})," Bölmədəki Şəkillər"]}),e.jsxs("button",{className:"add-field-minimal",onClick:()=>at("image"),children:[e.jsx(H,{size:14})," Yeni Şəkil Yeri"]})]}),Ct.length>0&&e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:800,color:"#64748b",marginBottom:"8px"},children:"Komponent Daxili Önizləmə (Sıra ilə)"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(160px, 1fr))",gap:"10px"},children:Ct.map((t,a)=>e.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"10px",overflow:"hidden",background:"#fff"},children:[e.jsx("div",{style:{height:"84px",background:"#f8fafc"},children:t.path?e.jsx("img",{src:t.path,alt:t.alt||`Preview ${a+1}`,style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"#94a3b8",fontSize:"11px"},children:"Şəkil yoxdur"})}),e.jsxs("div",{style:{padding:"6px 8px",fontSize:"10px",color:"#475569",fontWeight:700},children:["#",a+1," • ",t.id]})]},`preview-${t.id}`))})]}),e.jsx("div",{className:"images-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))",gap:"1.5rem"},children:Ct.length>0?Ct.map((t,a)=>{const i=Y?.images||[],n=i.findIndex(u=>u.id===t.id),d=n>0,h=n>=0&&n<i.length-1;return e.jsxs("div",{className:"image-edit-card",style:{border:"1px solid #eee",borderRadius:"12px",overflow:"hidden",background:"#fff",position:"relative"},children:[e.jsx("button",{className:"field-delete-btn",onClick:()=>As("image",t.id),style:{position:"absolute",right:"8px",top:"8px",zIndex:10,background:"rgba(255,255,255,0.9)",border:"1px solid #fee2e2",color:"#ef4444",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(W,{size:12})}),e.jsxs("div",{style:{position:"absolute",right:"40px",top:"8px",zIndex:10,display:"flex",gap:"6px"},children:[e.jsx("button",{title:"Yuxarı daşı",onClick:()=>St("image",t.id,"up"),disabled:!d,style:{background:"rgba(255,255,255,0.9)",border:"1px solid #e2e8f0",color:d?"#334155":"#cbd5e1",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:d?"pointer":"not-allowed"},children:e.jsx(rt,{size:12})}),e.jsx("button",{title:"Aşağı daşı",onClick:()=>St("image",t.id,"down"),disabled:!h,style:{background:"rgba(255,255,255,0.9)",border:"1px solid #e2e8f0",color:h?"#334155":"#cbd5e1",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:h?"pointer":"not-allowed"},children:e.jsx(dt,{size:12})})]}),e.jsx("div",{style:{height:"120px",background:"#f8fafc",position:"relative",overflow:"hidden"},children:t.path&&(t.path.startsWith("http")||t.path.startsWith("/"))?e.jsx("img",{src:t.path,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"#f1f5f9"},children:[e.jsx(he,{size:32,style:{opacity:.1}}),e.jsx("span",{style:{fontSize:"10px",color:"#999",position:"absolute",bottom:"10px"},children:"Yol yoxdur"})]})}),e.jsxs("div",{style:{padding:"0.75rem"},children:[e.jsxs("div",{style:{fontSize:"10px",color:"#94a3b8",fontWeight:700,marginBottom:"6px"},children:["Sıra: ",a+1]}),e.jsxs("div",{style:{display:"flex",gap:"0.25rem",marginBottom:"4px"},children:[e.jsx("input",{type:"text",placeholder:"Resur yolu...",value:t.path,onChange:u=>{if(r<0||r>=s.length)return;const c=[...s],p=c[r];if(!p)return;const j=p.images.findIndex(T=>T.id===t.id);j!==-1&&(p.images[j].path=u.target.value,l(c))},style:{fontSize:"0.75rem",flex:1,padding:"0.4rem",border:"1px solid #eee",borderRadius:"4px"}}),e.jsx("button",{onClick:()=>Is(r,t.id),title:"Sistemdən seç",style:{padding:"0 8px",background:"#f1f5f9",border:"1px solid #e2e8f0",borderRadius:"4px",cursor:"pointer"},children:e.jsx(ne,{size:14})}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:"file",id:`file-up-${t.id}`,style:{display:"none"},accept:"image/*",onChange:u=>Ua(u,r,t.id)}),e.jsx("button",{onClick:()=>document.getElementById(`file-up-${t.id}`)?.click(),title:"Kompüterdən yüklə",style:{padding:"0 8px",height:"100%",background:"#f1f5f9",border:"1px solid #e2e8f0",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(H,{size:14})})]})]}),e.jsx("input",{type:"text",placeholder:"Alt mətni...",value:t.alt,onChange:u=>Ss(r,t.id,u.target.value),style:{fontSize:"0.75rem",width:"100%",padding:"0.4rem",border:"1px solid #eee",borderRadius:"4px"}})]})]},t.id)}):e.jsx("div",{className:"empty-fields-tip",style:{gridColumn:"1/-1",textAlign:"center",padding:"2rem",background:"#f8fafc",borderRadius:"12px",border:"1px dashed #cbd5e1",color:"#64748b"},children:w?"Sorğuya uyğun şəkil tapılmadı.":"Bu bölmədə redaktə ediləcək şəkil yoxdur."})})]}),e.jsxs("div",{className:"field-group",children:[e.jsxs("label",{children:[e.jsx(he,{size:16})," Yeni Şəkil Yüklə"]}),e.jsxs("div",{className:"upload-dropzone",children:[e.jsx(H,{size:24}),e.jsx("p",{children:"Şəkil yükləmək üçün seçin"}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[e.jsx("button",{className:"btn-secondary",onClick:()=>{const t=document.createElement("input");t.type="file",t.accept="image/*",t.onchange=async a=>{const i=a.target.files?.[0];if(!i)return;const n=await _e(i);if(n&&r>=0&&r<s.length){const d=[...s],h=d[r];if(h){const u=`img-${h.images.length}-${Date.now()}`;h.images.push({id:u,path:n,alt:"",type:"local"}),l(d),E.success("Yeni şəkil əlavə edildi")}}},t.click()},children:"Cihazdan Yüklə"}),e.jsx("button",{className:"btn-secondary",onClick:()=>{const t=`img-${(Y.images||[]).length}`;Xe({pageIdx:r,imgId:t}),B(!0),R(!0)},children:"Kitabxanadan Seç"})]})]})]})]})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"#94a3b8",gap:"1rem"},children:[e.jsx(Bt,{size:48,style:{opacity:.2}}),e.jsx("p",{children:"Redaktə etmək üçün sol tərəfdən bir komponent seçin."})]})})}),o&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-card fade-in",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Yeni Bölmə Əlavə Et"}),e.jsx("button",{onClick:()=>x(!1),children:e.jsx(rs,{size:20})})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Bölmə Başlığı"}),e.jsx("input",{type:"text",value:Ee,onChange:t=>Te(t.target.value),placeholder:"Məs: Xidmətlərimiz, Kampaniyalar...",autoFocus:!0})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>x(!1),children:"Ləğv et"}),e.jsx("button",{className:"btn-primary",onClick:_a,children:"Əlavə et"})]})]})}),k&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-card fade-in",style:{maxWidth:"800px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Sistem Şəkilləri"}),e.jsx("button",{onClick:()=>R(!1),children:e.jsx(rs,{size:20})})]}),e.jsx("div",{className:"modal-body",style:{maxHeight:"60vh",overflowY:"auto"},children:e.jsx("div",{className:"image-selector-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(130px, 1fr))",gap:"1rem"},children:G.length>0?G.map((t,a)=>e.jsxs("div",{className:"selector-image-card",onClick:()=>Pa(t),style:{cursor:"pointer",border:"2px solid #f1f5f9",borderRadius:"12px",overflow:"hidden",transition:"all 0.2s"},children:[e.jsx("div",{style:{aspectRatio:"1/1",background:"#f8fafc"},children:e.jsx("img",{src:t,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})}),e.jsx("div",{style:{padding:"0.5rem",fontSize:"10px",color:"#64748b",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center"},children:t.split("/").pop()})]},a)):e.jsx("div",{style:{gridColumn:"1/-1",textAlign:"center",padding:"3rem",color:"#94a3b8"},children:"Sistemdə heç bir şəkil tapılmadı."})})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"btn-secondary",onClick:()=>R(!1),children:"Bağla"})})]})})]})},Ca="forsaj_admin_user",ka="forsaj_admin_token",us="forsaj:session-expired",ut=()=>{const s=localStorage.getItem(ka);return!s||s==="null"||s==="undefined"?null:s},xe=()=>{localStorage.removeItem(Ca),localStorage.removeItem(ka),window.dispatchEvent(new Event(us))},Bl=({currentUser:s})=>{const[l,r]=g.useState([]),[m,b]=g.useState(!0),[v,f]=g.useState(!1),[A,S]=g.useState(null),y=async()=>{try{const x=ut();if(!x){xe();return}const k=await fetch("/api/users",{headers:{Authorization:`Bearer ${x}`}});if(k.status===401||k.status===403){xe(),E.error("Sessiya müddəti bitib. Yenidən daxil olun.");return}if(!k.ok)throw new Error("Yükləmə uğursuz oldu");const R=await k.json();r(R||[])}catch{E.error("İstifadəçiləri yükləmək mümkün olmadı")}finally{b(!1)}};g.useEffect(()=>{y()},[]);const _=async x=>{if(x.preventDefault(),!A?.username||!A?.name||!A?.id&&!A?.password){E.error("Zəhmət olmasa bütün sahələri doldurun");return}try{const k=ut();if(!k){xe();return}const R=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${k}`},body:JSON.stringify(A)});if(R.status===401||R.status===403){xe(),E.error("Sessiya müddəti bitib. Yenidən daxil olun.");return}if(R.ok)E.success(A.id?"İstifadəçi yeniləndi":"Yeni istifadəçi yaradıldı"),f(!1),S(null),y();else{const I=await R.json();E.error(I.error||"Xəta baş verdi")}}catch{E.error("Serverlə bağlantı kəsildi")}},D=async x=>{if(window.confirm("Bu istifadəçini silmək istədiyinizə əminsiniz?"))try{const k=ut();if(!k){xe();return}const R=await fetch(`/api/users/${x}`,{method:"DELETE",headers:{Authorization:`Bearer ${k}`}});if(R.status===401||R.status===403){xe(),E.error("Sessiya müddəti bitib. Yenidən daxil olun.");return}if(R.ok)E.success("İstifadəçi silindi"),y();else{const I=await R.json();E.error(I.error||"Silmək mümkün olmadı")}}catch{E.error("Serverlə bağlantı kəsildi")}},o=(x=null)=>{S(x?{...x}:{username:"",name:"",password:"",role:"secondary"}),f(!0)};return m?e.jsx("div",{className:"loading-state",children:"Yüklənir..."}):e.jsxs("div",{className:"users-manager fade-in",children:[e.jsxs("div",{className:"manager-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Admin Hesabları"}),e.jsx("p",{children:"Sistemi idarə edən bütün administratorların siyahısı və səlahiyyətləri"})]}),s.role==="master"&&e.jsxs("button",{className:"add-user-btn",onClick:()=>o(),children:[e.jsx(Li,{size:18})," Yeni idarəçi"]})]}),e.jsx("div",{className:"users-grid",children:l.map(x=>e.jsxs("div",{className:"user-card",children:[e.jsxs("div",{className:"user-avatar",children:[e.jsx("img",{src:`https://ui-avatars.com/api/?name=${x.name}&background=${x.role==="master"?"3b82f6":"f59e0b"}&color=fff`,alt:x.name}),e.jsxs("div",{className:`role-badge ${x.role||"secondary"}`,children:[e.jsx(aa,{size:10})," ",x.role==="master"?"Baş admin":"Redaktor"]})]}),e.jsxs("div",{className:"user-details",children:[e.jsx("h3",{children:x.name}),e.jsxs("span",{children:["@",x.username||"username"]})]}),s.role==="master"&&e.jsxs("div",{className:"user-actions",children:[e.jsx("button",{className:"edit-btn",onClick:()=>o(x),title:"Düzəliş et",children:e.jsx(Ci,{size:16})}),e.jsx("button",{className:"delete-btn",onClick:()=>D(x.id.toString()),title:"Sil",children:e.jsx(W,{size:16})})]})]},x.id))}),v&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:A?.id?"İstifadəçini redaktə et":"Yeni idarəçi hesabı"}),e.jsx("button",{onClick:()=>f(!1),children:e.jsx(rs,{size:20})})]}),e.jsxs("form",{onSubmit:_,children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(pt,{size:14})," Tam Ad"]}),e.jsx("input",{type:"text",value:A?.name||"",onChange:x=>S({...A,name:x.target.value}),placeholder:"Məs: Əli Məmmədov",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(pt,{size:14})," İstifadəçi Adı"]}),e.jsx("input",{type:"text",value:A?.username||"",onChange:x=>S({...A,username:x.target.value}),placeholder:"Məs: alimm",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(ds,{size:14})," Şifrə ",A?.id&&e.jsx("span",{className:"helper-text",children:"(Dəyişmək istəmirsinizsə boş saxlayın)"})]}),e.jsx("input",{type:"password",value:A?.password||"",onChange:x=>S({...A,password:x.target.value}),placeholder:"••••••••",required:!A?.id})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(aa,{size:14})," Yetki (Rol)"]}),e.jsxs("select",{value:A?.role||"secondary",onChange:x=>S({...A,role:x.target.value}),children:[e.jsx("option",{value:"master",children:"Baş Admin (Tam səlahiyyət)"}),e.jsx("option",{value:"secondary",children:"Redaktor (Məhdud səlahiyyət)"})]})]}),A?.role==="master"&&e.jsxs("div",{className:"role-warning",children:[e.jsx(ki,{size:14})," Baş Admin bütün sistem daxilində tam səlahiyyətə malikdir."]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>f(!1),children:"Ləğv et"}),e.jsxs("button",{type:"submit",className:"save-btn",children:[e.jsx(ms,{size:18})," Yadda Saxla"]})]})]})]})})]})},Ul=()=>{const[s,l]=g.useState(!1),r=async()=>{l(!0);const b=E.loading("Front qovluğu skan edilir...");try{if(!(await fetch("/api/extract-content",{method:"POST"})).ok)throw new Error("Skan xətası");E.success("Skan tamamlandı! Panel yenilənir...",{id:b}),setTimeout(()=>window.location.reload(),1500)}catch{E.error("Skan uğursuz oldu!",{id:b})}finally{l(!1)}},m=[{id:1,title:"Sitemap Faylını Yaradın",description:"public/sitemap.json faylına menyu strukturunuzu əlavə edin və ya front-dan gətirin.",path:"public/sitemap.json",icon:Ii},{id:2,title:"Front Layihəsini Sinxronlaşdırın",description:"/front qovluğundakı React layihəsini skan edərək bütün səhifələri menyuya çıxarın.",path:"/front/src/pages",icon:Oi},{id:3,title:"Sistem Ayarlarını Tənzimləyin",description:"Saytın ümumi tənzimləmələrini, loqo və əlaqə məlumatlarını idarə edin.",path:"Sistem Ayarları",icon:xa}];return e.jsxs("div",{className:"setup-guide",children:[e.jsxs("div",{className:"setup-header",children:[e.jsxs("div",{className:"setup-brand",children:[e.jsx("div",{className:"octo-logo",children:"🏎️"}),e.jsx("h2",{children:"Forsaj Club İdarəetmə"})]}),e.jsx("h1",{children:"Xoş Gəlmisiniz! Paneli Qurmağa Başlayaq"}),e.jsx("p",{children:"Forsaj Club platformanız üçün premium admin paneli artıq hazırdır. Aşağıdakı addımları izləyərək front layihənizi adminlə birləşdirin."})]}),e.jsxs("div",{className:"setup-grid",children:[e.jsx("div",{className:"steps-container",children:m.map(b=>e.jsxs("div",{className:"step-card",children:[e.jsx("div",{className:"step-icon",children:e.jsx(b.icon,{size:26})}),e.jsxs("div",{className:"step-content",children:[e.jsx("h3",{children:b.title}),e.jsx("p",{children:b.description}),e.jsx("span",{className:"step-badge",children:b.path})]})]},b.id))}),e.jsxs("div",{className:"setup-sidebar-actions",children:[e.jsxs("div",{className:"action-card primary",children:[e.jsx(_i,{size:32}),e.jsx("h4",{children:"Yeni Səhifə Əlavə Et"}),e.jsx("p",{children:"Dinamik olaraq yeni admin səhifəsi yaradın."})]}),e.jsxs("div",{className:"action-card secondary",children:[e.jsx(xs,{size:32}),e.jsx("h4",{children:"Front Skaner"}),e.jsx("p",{children:"/front qosulub. Skanlamağa hazırdır."}),e.jsx("button",{className:`scan-btn ${s?"loading":""}`,onClick:r,disabled:s,children:s?e.jsx(va,{className:"animate-spin"}):"İndi Skan Et"})]})]})]}),e.jsx("div",{className:"setup-footer",children:e.jsxs("div",{className:"info-box",children:[e.jsx("strong",{children:"Məlumat:"})," /front qovluğu aşkar edildi. Sitemap avtomatik generasiya olunduqda bu ekran Dashboard ilə əvəzlənəcək."]})})]})},Pl=({onLogin:s})=>{const[l,r]=g.useState(!0),[m,b]=g.useState(""),[v,f]=g.useState(""),[A,S]=g.useState(""),[y,_]=g.useState(!1);g.useEffect(()=>{(async()=>{try{(await(await fetch("/api/check-setup")).json()).needsSetup&&r(!1)}catch(x){console.error("Setup check failed",x)}})()},[]);const D=async o=>{o.preventDefault();const x=m.trim(),k=A.trim();if(!x||!v.trim()){E.error("İstifadəçi adı və şifrə mütləqdir");return}if(!l&&!k){E.error("Tam ad mütləqdir");return}if(!l&&v.length<6){E.error("Şifrə ən azı 6 simvol olmalıdır");return}_(!0);try{const B=await fetch(l?"/api/login":"/api/setup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l?{username:x,password:v}:{username:x,password:v,name:k})}),G=await B.json();if(!B.ok)throw new Error(G.error||(l?"Giriş uğursuz oldu":"Quraşdırma uğursuz oldu"));l?(localStorage.setItem("forsaj_admin_token",G.token),localStorage.setItem("forsaj_admin_user",JSON.stringify(G.user)),s(G.user),E.success("Xoş gəldiniz!")):(E.success("Baza uğurla başladıldı! İndi daxil ola bilərsiniz."),r(!0))}catch(R){E.error(R.message||"Əməliyyat uğursuz oldu")}finally{_(!1)}};return e.jsx("div",{className:"login-page",children:e.jsxs("div",{className:"login-card fade-in",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("div",{className:"login-logo",children:l?e.jsx(Di,{size:40,className:"logo-icon"}):e.jsx(ds,{size:40,className:"logo-icon"})}),e.jsx("h1",{children:l?"Forsaj İdarəetmə Paneli":"Sistem Quraşdırılması"}),e.jsx("p",{children:l?"Sistemə daxil olmaq üçün məlumatlarınızı daxil edin":"İlkin Baş Admin hesabını yaradaraq sistemi başladın"})]}),e.jsxs("form",{className:"login-form",onSubmit:D,children:[!l&&e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(pt,{size:16})," Tam Adınız"]}),e.jsx("input",{type:"text",value:A,onChange:o=>S(o.target.value),placeholder:"Məs: Əli Məmmədov",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(pt,{size:16})," İstifadəçi Adı"]}),e.jsx("input",{type:"text",value:m,onChange:o=>b(o.target.value),placeholder:"Məs: admin",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(ds,{size:16})," Şifrə"]}),e.jsx("input",{type:"password",value:v,onChange:o=>f(o.target.value),placeholder:"••••••••",required:!0})]}),e.jsx("button",{type:"submit",className:"login-btn",disabled:y,children:y?e.jsxs("div",{className:"loader-container",children:[e.jsx(va,{className:"animate-spin",size:20}),e.jsx("span",{children:"Gözləyin..."})]}):l?"Daxil ol":"Sistemi başlat"})]}),e.jsx("div",{className:"login-footer",children:e.jsx("p",{children:"© 2026 Forsaj Club. Platformanın təhlükəsizliyi üçün mütəmadi olaraq şifrənizi yeniləyin."})})]})})},Fl=()=>{const[s,l]=g.useState([]),[r,m]=g.useState(null),[b,v]=g.useState(!0),[f,A]=g.useState("all"),S=async()=>{const x=localStorage.getItem("forsaj_admin_token");try{const k=await fetch("/api/applications",{headers:{Authorization:`Bearer ${x}`}});if(k.ok){const R=await k.json();l(R)}}catch{E.error("Müraciətlər yüklənərkən xəta baş verdi")}finally{v(!1)}};g.useEffect(()=>{S()},[]);const y=async x=>{const k=localStorage.getItem("forsaj_admin_token");try{(await fetch(`/api/applications/${x}/read`,{method:"POST",headers:{Authorization:`Bearer ${k}`}})).ok&&(l(I=>I.map(B=>B.id===x?{...B,status:"read"}:B)),r?.id===x&&m(I=>I?{...I,status:"read"}:null))}catch(R){console.error(R)}},_=async x=>{if(!window.confirm("Bu müraciəti silmək istədiyinizə əminsiniz?"))return;const k=localStorage.getItem("forsaj_admin_token");try{(await fetch(`/api/applications/${x}`,{method:"DELETE",headers:{Authorization:`Bearer ${k}`}})).ok&&(l(I=>I.filter(B=>B.id!==x)),r?.id===x&&m(null),E.success("Müraciət silindi"))}catch{E.error("Silinmə zamanı xəta baş verdi")}},D=s.filter(x=>f==="unread"?x.status==="unread":f==="read"?x.status==="read":!0),o=x=>{try{const k=JSON.parse(x);return e.jsx("div",{className:"app-details-grid",children:Object.entries(k).map(([R,I])=>e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"detail-label",children:[R.toUpperCase(),":"]}),e.jsx("span",{className:"detail-value",children:String(I)})]},R))})}catch{return e.jsx("div",{className:"detail-text",children:x})}};return b?e.jsx("div",{className:"loading-state",children:"Yüklənir..."}):e.jsxs("div",{className:"applications-manager fade-in",children:[e.jsxs("div",{className:"manager-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Müraciətlər"}),e.jsx("p",{children:"İstifadəçilər tərəfindən göndərilən formlar və qeydiyyatlar"})]}),e.jsxs("div",{className:"filter-tabs",children:[e.jsx("button",{className:f==="all"?"active":"",onClick:()=>A("all"),children:"Hamısı"}),e.jsx("button",{className:f==="unread"?"active":"",onClick:()=>A("unread"),children:"Oxunmamış"}),e.jsx("button",{className:f==="read"?"active":"",onClick:()=>A("read"),children:"Oxunmuş"})]})]}),e.jsxs("div",{className:"manager-body",children:[e.jsx("div",{className:"applications-list",children:D.length===0?e.jsx("div",{className:"empty-list",children:"Heç bir müraciət tapılmadı"}):D.map(x=>e.jsxs("div",{className:`application-item ${x.status} ${r?.id===x.id?"selected":""}`,onClick:()=>{m(x),x.status==="unread"&&y(x.id)},children:[e.jsx("div",{className:"app-item-icon",children:x.status==="unread"?e.jsx(fa,{className:"icon-unread"}):e.jsx(Mi,{className:"icon-read"})}),e.jsxs("div",{className:"app-item-main",children:[e.jsxs("div",{className:"app-item-header",children:[e.jsx("span",{className:"app-item-name",children:x.name}),e.jsx("span",{className:"app-item-date",children:new Date(x.created_at).toLocaleDateString()})]}),e.jsx("div",{className:"app-item-type",children:x.type})]}),e.jsx(wi,{size:16,className:"chevron"})]},x.id))}),e.jsx("div",{className:"application-details",children:r?e.jsxs("div",{className:"details-card fade-in",children:[e.jsxs("div",{className:"details-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Müraciət Təfərrüatları"}),e.jsx("span",{className:`status-badge ${r.status}`,children:r.status==="unread"?"Yeni":"Oxunub"})]}),e.jsx("div",{className:"header-actions",children:e.jsx("button",{className:"btn-delete",onClick:()=>_(r.id),children:e.jsx(W,{size:18})})})]}),e.jsxs("div",{className:"details-info",children:[e.jsxs("div",{className:"info-group",children:[e.jsxs("label",{children:[e.jsx(pt,{size:16})," Göndərən"]}),e.jsx("p",{children:r.name})]}),e.jsxs("div",{className:"info-group",children:[e.jsxs("label",{children:[e.jsx(ha,{size:16})," Əlaqə"]}),e.jsx("p",{children:r.contact})]}),e.jsxs("div",{className:"info-group",children:[e.jsxs("label",{children:[e.jsx(ct,{size:16})," Kateqoriya"]}),e.jsx("p",{children:r.type})]})]}),e.jsxs("div",{className:"details-content",children:[e.jsx("label",{children:"Məzmun"}),e.jsx("div",{className:"content-box",children:o(r.content)})]})]}):e.jsxs("div",{className:"details-placeholder",children:[e.jsx(ma,{size:48}),e.jsx("p",{children:"Baxmaq üçün siyahıdan müraciət seçin"})]})})]})]})},Yl=()=>{const[s,l]=g.useState([]),[r,m]=g.useState(!1),[b,v]=g.useState(!0),f=ps(),A=async()=>{try{const x=await(await fetch("/api/site-content")).json();l(x),v(!1)}catch{E.error("Ayarlar yüklənərkən xəta baş verdi")}};g.useEffect(()=>{A()},[]),g.useEffect(()=>{if(b)return;const x=new URLSearchParams(f.search).get("tab"),R=x?{seo:"seo-basic",general:"branding",contact:"contact-details",social:"social-links",stats:"stats"}[x]:"";R&&setTimeout(()=>{const I=document.querySelector(`[data-settings-section="${R}"]`);I&&I.scrollIntoView({behavior:"smooth",block:"start"})},50)},[f.search,b]);const S=(o,x,k=!1)=>{const R=[...s];let I=R.findIndex(B=>B.id==="general");if(I===-1&&(R.push({id:"general",title:"SİSTEM AYARLARI",sections:[],images:[]}),I=R.length-1),k){const B=R[I].images.findIndex(G=>G.id===o);B===-1?R[I].images.push({id:o,path:x,alt:o,type:"local"}):R[I].images[B].path=x}else{const B=R[I].sections.findIndex(G=>G.id===o);B===-1?R[I].sections.push({id:o,type:"text",label:o,value:x}):R[I].sections[B].value=x}l(R)},y=(o,x=!1)=>{const k=s.find(R=>R.id==="general");return k?x?k.images.find(R=>R.id===o)?.path||"":k.sections.find(R=>R.id===o)?.value||"":""},_=async(o,x)=>{const k=o.target.files?.[0];if(!k)return;const R=new FormData;R.append("image",k);const I=E.loading("Şəkil yüklənir...");try{const B=await fetch("/api/upload-image",{method:"POST",body:R});if(B.ok){const G=await B.json();S(x,G.url,!0),E.success("Şəkil yükləndi",{id:I})}}catch{E.error("Yükləmə xətası",{id:I})}},D=async()=>{m(!0);const o=E.loading("Yadda saxlanılır...");try{await fetch("/api/save-content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),E.success("Ayarlar qeyd edildi!",{id:o})}catch{E.error("Xəta baş verdi",{id:o})}finally{m(!1)}};return b?e.jsx("div",{className:"loading-state",children:"Yüklənir..."}):e.jsxs("div",{className:"general-settings fade-in",children:[e.jsxs("div",{className:"settings-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Sistem Ayarları"}),e.jsx("p",{children:"SEO, Brendinq və ümumi sayt tənzimləmələri"})]}),e.jsxs("button",{className:"save-btn",onClick:D,disabled:r,children:[e.jsx(ms,{size:18}),e.jsx("span",{children:"Yadda Saxla"})]})]}),e.jsxs("div",{className:"settings-grid",children:[e.jsxs("div",{className:"settings-card shadow-sm","data-settings-section":"seo-basic",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(ne,{size:20,className:"text-blue-500"}),e.jsx("h2",{children:"SEO və axtarış motoru"})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Meta başlıq (sayt adı)"}),e.jsx("input",{type:"text",value:y("SEO_TITLE"),onChange:o=>S("SEO_TITLE",o.target.value),placeholder:"Məs: Forsaj Club - Offroad & Motorsport"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Meta təsvir"}),e.jsx("textarea",{value:y("SEO_DESCRIPTION"),onChange:o=>S("SEO_DESCRIPTION",o.target.value),placeholder:"Sayt haqqında qısa məlumat..."})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Açar sözlər"}),e.jsx("input",{type:"text",value:y("SEO_KEYWORDS"),onChange:o=>S("SEO_KEYWORDS",o.target.value),placeholder:"offroad, baki, yarış, mitsubishi, pajero"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Kanonik URL"}),e.jsx("input",{type:"text",value:y("SEO_CANONICAL_URL"),onChange:o=>S("SEO_CANONICAL_URL",o.target.value),placeholder:"https://forsaj.az"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Robots direktivi"}),e.jsx("input",{type:"text",value:y("SEO_ROBOTS"),onChange:o=>S("SEO_ROBOTS",o.target.value),placeholder:"index,follow"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Müəllif"}),e.jsx("input",{type:"text",value:y("SEO_AUTHOR"),onChange:o=>S("SEO_AUTHOR",o.target.value),placeholder:"Forsaj Club"})]})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Dil (html lang)"}),e.jsx("input",{type:"text",value:y("SEO_LANGUAGE"),onChange:o=>S("SEO_LANGUAGE",o.target.value),placeholder:"az"})]})]})]}),e.jsxs("div",{className:"settings-card shadow-sm","data-settings-section":"seo-social",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(ne,{size:20,className:"text-cyan-500"}),e.jsx("h2",{children:"Sosial paylaşım SEO (OG / Twitter)"})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"OG başlıq"}),e.jsx("input",{type:"text",value:y("SEO_OG_TITLE"),onChange:o=>S("SEO_OG_TITLE",o.target.value),placeholder:"Sosial şəbəkə başlığı"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"OG təsvir"}),e.jsx("textarea",{value:y("SEO_OG_DESCRIPTION"),onChange:o=>S("SEO_OG_DESCRIPTION",o.target.value),placeholder:"Sosial şəbəkə paylaşım təsviri"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"OG URL"}),e.jsx("input",{type:"text",value:y("SEO_OG_URL"),onChange:o=>S("SEO_OG_URL",o.target.value),placeholder:"https://forsaj.az"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Twitter kart növü"}),e.jsx("input",{type:"text",value:y("SEO_TWITTER_CARD"),onChange:o=>S("SEO_TWITTER_CARD",o.target.value),placeholder:"summary_large_image"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Twitter hesabı (site)"}),e.jsx("input",{type:"text",value:y("SEO_TWITTER_SITE"),onChange:o=>S("SEO_TWITTER_SITE",o.target.value),placeholder:"@forsajclub"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Twitter müəllif"}),e.jsx("input",{type:"text",value:y("SEO_TWITTER_CREATOR"),onChange:o=>S("SEO_TWITTER_CREATOR",o.target.value),placeholder:"@forsajclub"})]})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"OG şəkli"}),e.jsx("div",{className:"logo-preview",style:{minHeight:"140px"},children:y("SEO_OG_IMAGE",!0)?e.jsx("img",{src:y("SEO_OG_IMAGE",!0),alt:"OG Şəkli"}):e.jsx("div",{className:"no-logo",children:"OG şəkli yoxdur"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",style:{marginTop:"10px"},children:[e.jsxs("label",{className:"upload-btn",children:[e.jsx(es,{size:14})," Şəkil yüklə",e.jsx("input",{type:"file",hidden:!0,onChange:o=>_(o,"SEO_OG_IMAGE")})]}),e.jsx("input",{type:"text",value:y("SEO_OG_IMAGE",!0),onChange:o=>S("SEO_OG_IMAGE",o.target.value,!0),placeholder:"https://forsaj.az/og-cover.jpg"})]})]})]})]}),e.jsxs("div",{className:"settings-card shadow-sm","data-settings-section":"seo-verify",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(ia,{size:20,className:"text-violet-500"}),e.jsx("h2",{children:"Axtarış motoru təsdiqləri"})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Google təsdiq kodu"}),e.jsx("input",{type:"text",value:y("SEO_GOOGLE_VERIFICATION"),onChange:o=>S("SEO_GOOGLE_VERIFICATION",o.target.value),placeholder:"google-site-verification kodu"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Bing təsdiq kodu"}),e.jsx("input",{type:"text",value:y("SEO_BING_VERIFICATION"),onChange:o=>S("SEO_BING_VERIFICATION",o.target.value),placeholder:"msvalidate.01 kodu"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Yandex təsdiq kodu"}),e.jsx("input",{type:"text",value:y("SEO_YANDEX_VERIFICATION"),onChange:o=>S("SEO_YANDEX_VERIFICATION",o.target.value),placeholder:"yandex-verification kodu"})]})]})]}),e.jsxs("div",{className:"settings-card shadow-sm","data-settings-section":"branding",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(he,{size:20,className:"text-orange-500"}),e.jsx("h2",{children:"Brendinq & Loqo"})]}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"logo-upload-grid",children:[e.jsxs("div",{className:"logo-box",children:[e.jsx("label",{children:"Əsas Loqo (Light)"}),e.jsx("div",{className:"logo-preview",children:y("SITE_LOGO_LIGHT",!0)?e.jsx("img",{src:y("SITE_LOGO_LIGHT",!0),alt:"Logo Light"}):e.jsx("div",{className:"no-logo",children:"Loqo yoxdur"})}),e.jsxs("label",{className:"upload-btn",children:[e.jsx(es,{size:14})," Yüklə",e.jsx("input",{type:"file",hidden:!0,onChange:o=>_(o,"SITE_LOGO_LIGHT")})]})]}),e.jsxs("div",{className:"logo-box",children:[e.jsx("label",{children:"Alternativ Loqo (Dark)"}),e.jsx("div",{className:"logo-preview dark-bg",children:y("SITE_LOGO_DARK",!0)?e.jsx("img",{src:y("SITE_LOGO_DARK",!0),alt:"Logo Dark"}):e.jsx("div",{className:"no-logo",children:"Loqo yoxdur"})}),e.jsxs("label",{className:"upload-btn",children:[e.jsx(es,{size:14})," Yüklə",e.jsx("input",{type:"file",hidden:!0,onChange:o=>_(o,"SITE_LOGO_DARK")})]})]})]})})]}),e.jsxs("div",{className:"settings-card shadow-sm","data-settings-section":"contact-details",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(he,{size:20,className:"text-red-500"}),e.jsx("h2",{children:"Əlaqə & Ünvan Məlumatları"})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Baş Ofis Ünvan (Sətir 1)"}),e.jsx("input",{type:"text",value:y("CONTACT_ADDRESS_1"),onChange:o=>S("CONTACT_ADDRESS_1",o.target.value),placeholder:"Məs: AZADLIQ 102, BAKI"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Baş Ofis Ünvan (Sətir 2)"}),e.jsx("input",{type:"text",value:y("CONTACT_ADDRESS_2"),onChange:o=>S("CONTACT_ADDRESS_2",o.target.value),placeholder:"Məs: AZƏRBAYCAN // SECTOR_01"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"İş Saatları"}),e.jsx("input",{type:"text",value:y("CONTACT_HOURS"),onChange:o=>S("CONTACT_HOURS",o.target.value),placeholder:"Məs: 09:00 - 18:00"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Əlaqə Nömrəsi"}),e.jsx("input",{type:"text",value:y("CONTACT_PHONE"),onChange:o=>S("CONTACT_PHONE",o.target.value),placeholder:"+994 50 000 00 00"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Əlaqə E-poçtu"}),e.jsx("input",{type:"text",value:y("CONTACT_EMAIL"),onChange:o=>S("CONTACT_EMAIL",o.target.value),placeholder:"info@forsaj.az"})]})]})]})]}),e.jsxs("div",{className:"settings-card shadow-sm","data-settings-section":"departments",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(zi,{size:20,className:"text-purple-500"}),e.jsx("h2",{children:"Şöbə E-poçtları"})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Baş Ofis (HQ)"}),e.jsx("input",{type:"text",value:y("DEPT_HQ_EMAIL"),onChange:o=>S("DEPT_HQ_EMAIL",o.target.value),placeholder:"hq@forsaj.az"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Media və PR"}),e.jsx("input",{type:"text",value:y("DEPT_PR_EMAIL"),onChange:o=>S("DEPT_PR_EMAIL",o.target.value),placeholder:"pr@forsaj.az"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Texniki Dəstək"}),e.jsx("input",{type:"text",value:y("DEPT_TECH_EMAIL"),onChange:o=>S("DEPT_TECH_EMAIL",o.target.value),placeholder:"tech@forsaj.az"})]})]})]}),e.jsxs("div",{className:"settings-card shadow-sm","data-settings-section":"social-links",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(ne,{size:20,className:"text-pink-500"}),e.jsx("h2",{children:"Sosial Media Linkləri"})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Instagram"}),e.jsx("input",{type:"text",value:y("SOCIAL_INSTAGRAM"),onChange:o=>S("SOCIAL_INSTAGRAM",o.target.value),placeholder:"https://instagram.com/forsajclub"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Youtube"}),e.jsx("input",{type:"text",value:y("SOCIAL_YOUTUBE"),onChange:o=>S("SOCIAL_YOUTUBE",o.target.value),placeholder:"https://youtube.com/@forsajclub"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Facebook"}),e.jsx("input",{type:"text",value:y("SOCIAL_FACEBOOK"),onChange:o=>S("SOCIAL_FACEBOOK",o.target.value),placeholder:"https://facebook.com/forsajclub"})]})]})]}),e.jsxs("div",{className:"settings-card shadow-sm","data-settings-section":"stats",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(ia,{size:20,className:"text-green-500"}),e.jsx("h2",{children:"Sayt Statistikaları"})]}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"stats-edit-grid",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Pilot Sayı"}),e.jsx("input",{type:"text",value:y("STATS_PILOTS"),onChange:o=>S("STATS_PILOTS",o.target.value),placeholder:"Susmaya görə: 140+"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Yarış Sayı"}),e.jsx("input",{type:"text",value:y("STATS_RACES"),onChange:o=>S("STATS_RACES",o.target.value),placeholder:"Susmaya görə: 50+"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Gənc İştirakçı"}),e.jsx("input",{type:"text",value:y("STATS_YOUTH"),onChange:o=>S("STATS_YOUTH",o.target.value),placeholder:"Susmaya görə: 20+"})]})]})})]})]})]})},We=s=>s.toLocaleLowerCase("az").normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim(),Kl={DASHBOARD:"Panel Ana Səhifə","ANA SƏHİFƏ":"Sayt Məzmunu",HAQQIMIZDA:"Haqqımızda",XƏBƏRLƏR:"Xəbərlər",TƏDBİRLƏR:"Tədbirlər",SÜRÜCÜLƏR:"Sürücülər",QALEREYA:"Qalereya",QAYDALAR:"Qaydalar",ƏLAQƏ:"Əlaqə","ADMİN HESABLARI":"İstifadəçi İdarəsi","SİSTEM AYARLARI":"Sistem Ayarları"},$l={"Ümumi Görünüş":"Ana Səhifə Blokları",Naviqasiya:"Menyu və Naviqasiya","Giriş Hissəsi":"Hero Bölməsi","Sürüşən Yazı":"Marquee Yazısı","Sayt Sonu":"Footer","Xəbər Siyahısı":"Xəbər Məzmunu","Xəbər Səhifəsi":"Xəbər Səhifəsi Mətni","Tədbir Təqvimi":"Tədbir Siyahısı","Tədbir Səhifəsi":"Tədbir Səhifəsi Mətni","Sürücü Reytinqi":"Sürücü Cədvəli","Sürücülər Səhifəsi":"Sürücülər Səhifəsi Mətni"},Hl=s=>{const l=Kl[s.title]||s.title;return{...s,title:l,children:s.children?.map(r=>({...r,title:$l[r.title]||r.title}))}},Ia=s=>s&&(s==="/frontend-settings"||s==="/admin/frontend-settings"||s==="/general-settings"||s==="/admin/general-settings"?"/general-settings?tab=general":s),Oa=s=>({...s,path:Ia(s.path),children:s.children?.map(Oa)}),ls=(s=[])=>{const l=new Map;return s.forEach(r=>{const m=`${We(r.title||"")}|${We(r.path||"")}`;m&&l.set(m,r)}),Array.from(l.values())},pa=s=>{const l=We(s?.title||""),r=We(Ia(s?.path)||"");return l==="sistem ayarlari"||r==="/frontend-settings"||r==="/admin/frontend-settings"||r==="/general-settings"||r==="/admin/general-settings"||r.startsWith("/general-settings?")},Gl=()=>{const[s,l]=g.useState(null),[r,m]=g.useState([]),[b,v]=g.useState(0),[f,A]=g.useState(!0);if(g.useEffect(()=>{const y=localStorage.getItem(Ca),_=ut();if(y&&_)try{l(JSON.parse(y))}catch{xe(),l(null)}else xe(),l(null);A(!1)},[]),g.useEffect(()=>{const y=()=>l(null);return window.addEventListener(us,y),()=>window.removeEventListener(us,y)},[]),g.useEffect(()=>{const y=async()=>{const D=ut();if(!D){xe();return}try{let o=b;const x=await fetch("/api/applications/unread-count",{headers:{Authorization:`Bearer ${D}`}});if(x.status===401||x.status===403){xe();return}if(x.ok){const{count:R}=await x.json();o=Number(R)||0,v(o)}const k=await fetch(`/api/sitemap?v=${Date.now()}`);if(k.ok){const R=await k.json();let I=Array.isArray(R)?R:[];I=I.map(w=>Hl(w)).map(w=>Oa(w));const B=I.find(w=>w.path==="/applications");B?o>0?B.badge={text:o.toString(),color:"bg-red-500"}:delete B.badge:I=[...I,{title:"Müraciətlər",path:"/applications",icon:"Inbox",badge:o>0?{text:o.toString(),color:"bg-red-500"}:void 0}];const G=[{title:"SEO Ayarları",path:"/general-settings?tab=seo",icon:"Globe"},{title:"Ümumi Parametrlər",path:"/general-settings?tab=general",icon:"Sliders"},{title:"Əlaqə və Sosial",path:"/general-settings?tab=contact",icon:"Phone"},{title:"Tətbiq Ayarları",path:"/general-settings?tab=stats",icon:"Activity"}],X=I.filter(w=>pa(w));I=I.filter(w=>!pa(w));const Xe={title:"Sistem Ayarları",icon:"Settings",path:"/general-settings?tab=general",children:ls([...G,...X.flatMap(w=>w.children||[])])},Ee=I.findIndex(w=>We(w.path||"")==="/users-management");Ee>=0?I.splice(Ee+1,0,Xe):I.push(Xe);const Te=new Map;for(const w of I){const Fe=We(w.title||"");if(!Fe)continue;const se=Te.get(Fe);if(!se){Te.set(Fe,{...w,children:ls(w.children||[])});continue}Te.set(Fe,{...se,path:se.path||w.path,icon:se.icon||w.icon,badge:se.badge||w.badge,children:ls([...se.children||[],...w.children||[]])})}m(Array.from(Te.values()))}}catch(o){console.error("Fetch data failed",o)}finally{A(!1)}};y();const _=setInterval(y,3e4);return()=>clearInterval(_)},[s]),f)return e.jsx("div",{style:{display:"flex",height:"100vh",width:"100vw",alignItems:"center",justifyContent:"center",background:"#f4f6f9",color:"#3b82f6",fontSize:"1.2rem",fontWeight:"600"},children:"Yüklənir..."});const S=!r||r.length===0;return e.jsx(ui,{basename:"/admin",children:e.jsxs("div",{className:"app-container",children:[e.jsx(Ll,{containerStyle:{zIndex:10001},position:"top-right",reverseOrder:!1}),s?e.jsxs(e.Fragment,{children:[e.jsx(Ui,{menuItems:r,user:s,onLogout:()=>{xe(),l(null)}}),e.jsxs("main",{className:"main-content",children:[e.jsx(Pi,{user:s}),e.jsx("div",{className:"content-body",children:e.jsx(pi,{children:S?e.jsx(Qe,{path:"*",element:e.jsx(Ul,{})}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{path:"/",element:e.jsx(zl,{})}),e.jsx(Qe,{path:"/applications",element:e.jsx(Fl,{})}),e.jsx(Qe,{path:"/general-settings",element:e.jsx(Yl,{})}),e.jsx(Qe,{path:"/users-management",element:e.jsx(Bl,{currentUser:s})}),e.jsx(Qe,{path:"*",element:e.jsx("div",{className:"fade-in",children:e.jsx("h1",{children:"Səhifə tapılmadı"})})})]})})})]})]}):e.jsx(Pl,{onLogin:l})]})})};xi.createRoot(document.getElementById("root")).render(e.jsx(g.StrictMode,{children:e.jsx(Gl,{})}));
