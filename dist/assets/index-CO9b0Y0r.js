import{r as c,u as fs,j as e,N as Ms,B as Lt,a as _t,b as me,d as Dt}from"./vendor-react-B0Xi4u7S.js";import{H as Bt,L as Pt,C as Us,a as $s,G as X,S as Hs,I as Ws,M as Vs,U as Yt,P as Ks,B as Mt,V as cs,b as V,A as $t,T as ms,c as Qs,d as We,e as Ft,F as Ce,f as qt,g as Gt,h as Ut,i as Xs,j as Ht,k as Zs,l as Wt,m as ps,n as js,E as Vt,R as hs,o as vs,p as B,q as H,r as Js,X as Ve,s as Kt,t as Qt,u as Xt,v as Zt,w as Jt,x as Fs,y as ea,z as Ie,D as us,J as sa,K as ta,N as aa,O as ia,Q as et,W as na,Y as la,Z as ds,_ as qs,$ as ra}from"./vendor-ui-DTjJiZ3U.js";import{i as oa}from"./vendor-editor-BvsJV83P.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))h(m);new MutationObserver(m=>{for(const g of m)if(g.type==="childList")for(const o of g.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&h(o)}).observe(document,{childList:!0,subtree:!0});function l(m){const g={};return m.integrity&&(g.integrity=m.integrity),m.referrerPolicy&&(g.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?g.credentials="include":m.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function h(m){if(m.ep)return;m.ep=!0;const g=l(m);fetch(m.href,g)}})();const da=({menuItems:t,user:a,onLogout:l})=>{const h=a?.role||"secondary",[m,g]=c.useState({}),o=fs(),f=n=>{g(d=>({...d,[n]:!d[n]}))},u={Layout:ps,Home:Wt,Menu:Zs,Maximize:Ht,Type:Xs,Star:Ut,Anchor:Gt,Info:qt,FileText:Ce,List:Ft,Calendar:We,Clock:Qs,Trophy:ms,Award:$t,Image:V,Video:cs,BookOpen:Mt,Phone:Ks,Users:Yt,Monitor:Vs,Inbox:Ws,Settings:Hs,Globe:X},p=({name:n,className:d})=>{const N=u[n];return N?e.jsx(N,{className:d,size:18}):e.jsx($s,{className:d,size:18})},v=n=>{const d=n.children&&n.children.length>0,N=m[n.title],j=C=>C?C.includes("?")?o.pathname+o.search===C:o.pathname===C:!1,w=j(n.path)||d&&n.children?.some(C=>j(C.path));return d?e.jsxs("li",{className:`sidebar-item ${w?"active":""}`,children:[e.jsxs("div",{className:`sidebar-link has-children ${N?"active expanded":""}`,onClick:()=>f(n.title),children:[n.icon&&e.jsx(p,{name:n.icon,className:"sidebar-icon"}),e.jsx("span",{className:"sidebar-text",children:n.title}),e.jsx(Us,{className:`sidebar-chevron ${N?"rotate":""}`,size:16})]}),e.jsx("ul",{className:`sidebar-submenu ${N?"show":""}`,children:n.children?.map(C=>e.jsx("li",{className:"sidebar-submenu-item",children:e.jsxs(Ms,{to:C.path||"#",className:()=>`sidebar-submenu-link ${j(C.path)?"active":""}`,children:[e.jsx($s,{size:8,className:"submenu-dot"}),e.jsx("span",{children:C.title})]})},C.title))})]},n.title):e.jsx("li",{className:"sidebar-item",children:e.jsxs(Ms,{to:n.path||"#",className:()=>`sidebar-link ${j(n.path)?"active":""}`,children:[n.icon&&e.jsx(p,{name:n.icon,className:"sidebar-icon"}),e.jsx("span",{className:"sidebar-text",children:n.title}),n.badge&&e.jsx("span",{className:`badge ${n.badge.color} sidebar-badge`,children:n.badge.text})]})},n.title)},k=n=>{const d=["/frontend-settings","/users-management"];return n.map(j=>{const w=j.children?k(j.children):void 0;return h==="secondary"&&d.some(z=>j.path?.toLowerCase()===z)||!j.path&&(!w||w.length===0)?null:{...j,children:w}}).filter(Boolean)};return e.jsxs("aside",{className:"sidebar",children:[e.jsx("div",{className:"sidebar-header",children:e.jsxs("div",{className:"brand-logo",children:[e.jsx(Bt,{className:"logo-icon",size:24,fill:"currentColor"}),e.jsxs("span",{className:"brand-name",children:["FORSAJ",e.jsx("span",{children:"PANEL"})]})]})}),e.jsxs("div",{className:"sidebar-user",children:[e.jsx("img",{src:`https://ui-avatars.com/api/?name=${a?.name||"Admin"}&background=${h==="master"?"3b82f6":"f59e0b"}&color=fff`,alt:"İstifadəçi"}),e.jsxs("div",{className:"user-info",children:[e.jsx("span",{className:"user-name",children:a?.name||"İdarəçi"}),e.jsx("span",{className:"user-role",children:h==="master"?"Baş Admin":"Redaktor"})]})]}),e.jsxs("div",{className:"sidebar-content",children:[e.jsx("div",{className:"sidebar-section-label",children:"ƏSAS NAVİQASİYA"}),e.jsxs("ul",{className:"sidebar-menu",children:[k(t).map(n=>v(n)),t.length===0&&e.jsx("div",{className:"empty-sidebar-msg",children:e.jsx("p",{children:"Menyu boşdur"})})]})]}),e.jsx("div",{className:"sidebar-footer",children:e.jsxs("button",{className:"logout-btn",onClick:l,children:[e.jsx(Pt,{size:18}),e.jsx("span",{children:"Çıxış"})]})})]})},ca=({user:t})=>e.jsxs("header",{className:"header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"icon-btn toggle-sidebar",children:e.jsx(Zs,{size:20})}),e.jsxs("div",{className:"header-search",children:[e.jsx(js,{size:18,className:"search-icon"}),e.jsx("input",{type:"text",placeholder:"Hər şeyi axtar..."})]})]}),e.jsxs("div",{className:"header-right",children:[e.jsxs("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"view-site-btn",children:[e.jsx(Vt,{size:16})," Sayta Bax"]}),e.jsxs("div",{className:"header-profile",children:[e.jsxs("div",{className:"profile-info",children:[e.jsx("span",{className:"profile-name",children:t?.name||"Forsaj İdarəçisi"}),e.jsx("span",{className:"profile-status",children:t?.role==="master"?"Baş Admin":"Sayt Redaktoru"})]}),e.jsx("img",{src:`https://ui-avatars.com/api/?name=${t?.name||"Admin"}&background=random`,alt:"Profil"})]})]})]});let ma={data:""},pa=t=>{if(typeof window=="object"){let a=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return a.nonce=window.__nonce__,a.parentNode||(t||document.head).appendChild(a),a.firstChild}return t||ma},ha=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ua=/\/\*[^]*?\*\/|  +/g,Gs=/\n+/g,ie=(t,a)=>{let l="",h="",m="";for(let g in t){let o=t[g];g[0]=="@"?g[1]=="i"?l=g+" "+o+";":h+=g[1]=="f"?ie(o,g):g+"{"+ie(o,g[1]=="k"?"":a)+"}":typeof o=="object"?h+=ie(o,a?a.replace(/([^,])+/g,f=>g.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,f):f?f+" "+u:u)):g):o!=null&&(g=/^--/.test(g)?g:g.replace(/[A-Z]/g,"-$&").toLowerCase(),m+=ie.p?ie.p(g,o):g+":"+o+";")}return l+(a&&m?a+"{"+m+"}":m)+h},Q={},st=t=>{if(typeof t=="object"){let a="";for(let l in t)a+=l+st(t[l]);return a}return t},xa=(t,a,l,h,m)=>{let g=st(t),o=Q[g]||(Q[g]=(u=>{let p=0,v=11;for(;p<u.length;)v=101*v+u.charCodeAt(p++)>>>0;return"go"+v})(g));if(!Q[o]){let u=g!==t?t:(p=>{let v,k,n=[{}];for(;v=ha.exec(p.replace(ua,""));)v[4]?n.shift():v[3]?(k=v[3].replace(Gs," ").trim(),n.unshift(n[0][k]=n[0][k]||{})):n[0][v[1]]=v[2].replace(Gs," ").trim();return n[0]})(t);Q[o]=ie(m?{["@keyframes "+o]:u}:u,l?"":"."+o)}let f=l&&Q.g?Q.g:null;return l&&(Q.g=Q[o]),((u,p,v,k)=>{k?p.data=p.data.replace(k,u):p.data.indexOf(u)===-1&&(p.data=v?u+p.data:p.data+u)})(Q[o],a,h,f),o},ga=(t,a,l)=>t.reduce((h,m,g)=>{let o=a[g];if(o&&o.call){let f=o(l),u=f&&f.props&&f.props.className||/^go/.test(f)&&f;o=u?"."+u:f&&typeof f=="object"?f.props?"":ie(f,""):f===!1?"":f}return h+m+(o??"")},"");function Xe(t){let a=this||{},l=t.call?t(a.p):t;return xa(l.unshift?l.raw?ga(l,[].slice.call(arguments,1),a.p):l.reduce((h,m)=>Object.assign(h,m&&m.call?m(a.p):m),{}):l,pa(a.target),a.g,a.o,a.k)}let tt,xs,gs;Xe.bind({g:1});let Z=Xe.bind({k:1});function fa(t,a,l,h){ie.p=a,tt=t,xs=l,gs=h}function ne(t,a){let l=this||{};return function(){let h=arguments;function m(g,o){let f=Object.assign({},g),u=f.className||m.className;l.p=Object.assign({theme:xs&&xs()},f),l.o=/ *go\d+/.test(u),f.className=Xe.apply(l,h)+(u?" "+u:"");let p=t;return t[0]&&(p=f.as||t,delete f.as),gs&&p[0]&&gs(f),tt(p,f)}return m}}var ja=t=>typeof t=="function",Qe=(t,a)=>ja(t)?t(a):t,va=(()=>{let t=0;return()=>(++t).toString()})(),at=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let a=matchMedia("(prefers-reduced-motion: reduce)");t=!a||a.matches}return t}})(),ya=20,ys="default",it=(t,a)=>{let{toastLimit:l}=t.settings;switch(a.type){case 0:return{...t,toasts:[a.toast,...t.toasts].slice(0,l)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===a.toast.id?{...o,...a.toast}:o)};case 2:let{toast:h}=a;return it(t,{type:t.toasts.find(o=>o.id===h.id)?1:0,toast:h});case 3:let{toastId:m}=a;return{...t,toasts:t.toasts.map(o=>o.id===m||m===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return a.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==a.toastId)};case 5:return{...t,pausedAt:a.time};case 6:let g=a.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+g}))}}},Ke=[],nt={toasts:[],pausedAt:void 0,settings:{toastLimit:ya}},K={},lt=(t,a=ys)=>{K[a]=it(K[a]||nt,t),Ke.forEach(([l,h])=>{l===a&&h(K[a])})},rt=t=>Object.keys(K).forEach(a=>lt(t,a)),ba=t=>Object.keys(K).find(a=>K[a].toasts.some(l=>l.id===t)),Ze=(t=ys)=>a=>{lt(a,t)},Na={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Sa=(t={},a=ys)=>{let[l,h]=c.useState(K[a]||nt),m=c.useRef(K[a]);c.useEffect(()=>(m.current!==K[a]&&h(K[a]),Ke.push([a,h]),()=>{let o=Ke.findIndex(([f])=>f===a);o>-1&&Ke.splice(o,1)}),[a]);let g=l.toasts.map(o=>{var f,u,p;return{...t,...t[o.type],...o,removeDelay:o.removeDelay||((f=t[o.type])==null?void 0:f.removeDelay)||t?.removeDelay,duration:o.duration||((u=t[o.type])==null?void 0:u.duration)||t?.duration||Na[o.type],style:{...t.style,...(p=t[o.type])==null?void 0:p.style,...o.style}}});return{...l,toasts:g}},ka=(t,a="blank",l)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:a,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...l,id:l?.id||va()}),ze=t=>(a,l)=>{let h=ka(a,t,l);return Ze(h.toasterId||ba(h.id))({type:2,toast:h}),h.id},O=(t,a)=>ze("blank")(t,a);O.error=ze("error");O.success=ze("success");O.loading=ze("loading");O.custom=ze("custom");O.dismiss=(t,a)=>{let l={type:3,toastId:t};a?Ze(a)(l):rt(l)};O.dismissAll=t=>O.dismiss(void 0,t);O.remove=(t,a)=>{let l={type:4,toastId:t};a?Ze(a)(l):rt(l)};O.removeAll=t=>O.remove(void 0,t);O.promise=(t,a,l)=>{let h=O.loading(a.loading,{...l,...l?.loading});return typeof t=="function"&&(t=t()),t.then(m=>{let g=a.success?Qe(a.success,m):void 0;return g?O.success(g,{id:h,...l,...l?.success}):O.dismiss(h),m}).catch(m=>{let g=a.error?Qe(a.error,m):void 0;g?O.error(g,{id:h,...l,...l?.error}):O.dismiss(h)}),t};var wa=1e3,Ca=(t,a="default")=>{let{toasts:l,pausedAt:h}=Sa(t,a),m=c.useRef(new Map).current,g=c.useCallback((k,n=wa)=>{if(m.has(k))return;let d=setTimeout(()=>{m.delete(k),o({type:4,toastId:k})},n);m.set(k,d)},[]);c.useEffect(()=>{if(h)return;let k=Date.now(),n=l.map(d=>{if(d.duration===1/0)return;let N=(d.duration||0)+d.pauseDuration-(k-d.createdAt);if(N<0){d.visible&&O.dismiss(d.id);return}return setTimeout(()=>O.dismiss(d.id,a),N)});return()=>{n.forEach(d=>d&&clearTimeout(d))}},[l,h,a]);let o=c.useCallback(Ze(a),[a]),f=c.useCallback(()=>{o({type:5,time:Date.now()})},[o]),u=c.useCallback((k,n)=>{o({type:1,toast:{id:k,height:n}})},[o]),p=c.useCallback(()=>{h&&o({type:6,time:Date.now()})},[h,o]),v=c.useCallback((k,n)=>{let{reverseOrder:d=!1,gutter:N=8,defaultPosition:j}=n||{},w=l.filter(A=>(A.position||j)===(k.position||j)&&A.height),C=w.findIndex(A=>A.id===k.id),z=w.filter((A,M)=>M<C&&A.visible).length;return w.filter(A=>A.visible).slice(...d?[z+1]:[0,z]).reduce((A,M)=>A+(M.height||0)+N,0)},[l]);return c.useEffect(()=>{l.forEach(k=>{if(k.dismissed)g(k.id,k.removeDelay);else{let n=m.get(k.id);n&&(clearTimeout(n),m.delete(k.id))}})},[l,g]),{toasts:l,handlers:{updateHeight:u,startPause:f,endPause:p,calculateOffset:v}}},Ia=Z`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,za=Z`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Aa=Z`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Ta=ne("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ia} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${za} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Aa} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Ea=Z`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Oa=ne("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Ea} 1s linear infinite;
`,Ra=Z`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,La=Z`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,_a=ne("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ra} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${La} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Da=ne("div")`
  position: absolute;
`,Ba=ne("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Pa=Z`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ya=ne("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Pa} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Ma=({toast:t})=>{let{icon:a,type:l,iconTheme:h}=t;return a!==void 0?typeof a=="string"?c.createElement(Ya,null,a):a:l==="blank"?null:c.createElement(Ba,null,c.createElement(Oa,{...h}),l!=="loading"&&c.createElement(Da,null,l==="error"?c.createElement(Ta,{...h}):c.createElement(_a,{...h})))},$a=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Fa=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,qa="0%{opacity:0;} 100%{opacity:1;}",Ga="0%{opacity:1;} 100%{opacity:0;}",Ua=ne("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Ha=ne("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Wa=(t,a)=>{let l=t.includes("top")?1:-1,[h,m]=at()?[qa,Ga]:[$a(l),Fa(l)];return{animation:a?`${Z(h)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Z(m)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Va=c.memo(({toast:t,position:a,style:l,children:h})=>{let m=t.height?Wa(t.position||a||"top-center",t.visible):{opacity:0},g=c.createElement(Ma,{toast:t}),o=c.createElement(Ha,{...t.ariaProps},Qe(t.message,t));return c.createElement(Ua,{className:t.className,style:{...m,...l,...t.style}},typeof h=="function"?h({icon:g,message:o}):c.createElement(c.Fragment,null,g,o))});fa(c.createElement);var Ka=({id:t,className:a,style:l,onHeightUpdate:h,children:m})=>{let g=c.useCallback(o=>{if(o){let f=()=>{let u=o.getBoundingClientRect().height;h(t,u)};f(),new MutationObserver(f).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,h]);return c.createElement("div",{ref:g,className:a,style:l},m)},Qa=(t,a)=>{let l=t.includes("top"),h=l?{top:0}:{bottom:0},m=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:at()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${a*(l?1:-1)}px)`,...h,...m}},Xa=Xe`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,qe=16,Za=({reverseOrder:t,position:a="top-center",toastOptions:l,gutter:h,children:m,toasterId:g,containerStyle:o,containerClassName:f})=>{let{toasts:u,handlers:p}=Ca(l,g);return c.createElement("div",{"data-rht-toaster":g||"",style:{position:"fixed",zIndex:9999,top:qe,left:qe,right:qe,bottom:qe,pointerEvents:"none",...o},className:f,onMouseEnter:p.startPause,onMouseLeave:p.endPause},u.map(v=>{let k=v.position||a,n=p.calculateOffset(v,{reverseOrder:t,gutter:h,defaultPosition:a}),d=Qa(k,n);return c.createElement(Ka,{id:v.id,key:v.id,onHeightUpdate:p.updateHeight,className:v.visible?Xa:"",style:d},v.type==="custom"?Qe(v.message,v):m?m(v):c.createElement(Va,{toast:v,position:k}))}))},y=O;const Ja={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],["link","image","video"],["clean"]]},Ge=({value:t,onChange:a,id:l,readOnly:h=!1})=>e.jsx("div",{className:"quill-editor-wrapper",id:l,children:e.jsx(oa,{theme:"snow",value:t||"",onChange:a,modules:h?{toolbar:!1}:Ja,readOnly:h,placeholder:"Məzmunu daxil edin..."})}),bs=t=>{if(/^[A-Z0-9_]+$/.test(t.id))return t.id.trim();const a=(t.label||"").trim();return a.startsWith("KEY:")?a.replace(/^KEY:\s*/i,"").trim():""},Ue=(t,a)=>bs(t)?a==="value":!0,ei=t=>!bs(t),He={hero:"Giriş Hissəsi",marquee:"Sürüşən Yazı",navbar:"Naviqasiya",about:"HAQQIMIZDA",mission_vision:"Missiya və Vizyon",values:"Dəyərlərimiz",eventspage:"Tədbirlər Səhifəsi",newspage:"Xəbər Səhifəsi",gallerypage:"Qalereya Səhifəsi",contactpage:"Əlaqə Səhifəsi",rulespage:"Qaydalar Səhifəsi",news:"Xəbərlər Paneli",drivers:"Sürücülər Paneli",categoryleaders:"Kateqoriya Liderləri",gallery:"Qalereya Paneli",videos:"Videolar Paneli",videoarchive:"Video Arxiv",footer:"Sayt Sonu",partners:"Tərəfdaşlar",offroadinfo:"Offroad Nədir?",whatisoffroad:"Offroad Nədir?",nextrace:"Növbəti Yarış",site:"Sayt Ayarları",settings:"Ümumi Parametrlər",general:"SİSTEM AYARLARI",app:"Tətbiq Ayarları"},si=()=>{const[t,a]=c.useState([]),[l,h]=c.useState(0),[m,g]=c.useState(!1),[o,f]=c.useState(!1),[u,p]=c.useState(0),[v,k]=c.useState(""),[n,d]=c.useState(!1),[N,j]=c.useState(!1),[w,C]=c.useState(!1),[z,A]=c.useState(!1),[M,pe]=c.useState(null),[Je,Ns]=c.useState([]),[J,Ss]=c.useState(null),[Ae,ks]=c.useState(""),[$,ot]=c.useState(""),[ee,Te]=c.useState([]),[ve,Ee]=c.useState(null),[E,Oe]=c.useState({}),[se,Re]=c.useState([]),[ye,Le]=c.useState(null),[_,_e]=c.useState({}),[te,De]=c.useState([]),[be,es]=c.useState(null),[P,ss]=c.useState({}),ts=fs(),ws=new URLSearchParams(ts.search),as=ws.get("mode"),Cs=ws.get("page"),[T,F]=c.useState("extract"),[Be,Pe]=c.useState([]),[Ne,Is]=c.useState(null),[le,is]=c.useState({});c.useEffect(()=>{F(as||"extract")},[as,Cs]);const[q,re]=c.useState([]),[R,Se]=c.useState(null),[he,ke]=c.useState(null),[D,ue]=c.useState({}),zs=async()=>{try{const i=await(await fetch("/api/site-content")).json();if(Array.isArray(i)){const fe=["hero","marquee","navbar","about","mission_vision","values","rulespage","eventspage","newspage","gallerypage","contactpage","news","drivers","categoryleaders","gallery","videos","videoarchive","footer","partners","offroadinfo","whatisoffroad","nextrace","site","settings","general","app"],Fe=[...i],Ds=U=>{const ae=U.sections||[];if(ae.some(je=>je.id.includes("label-stat"))&&ae.some(je=>je.id.includes("value-stat")))return;[{label:"PİLOTLAR",value:"140+"},{label:"YARIŞLAR",value:"50+"},{label:"GƏNCLƏR",value:"20+"}].forEach((je,os)=>{const Ys=`${os+1}`;ae.push({id:`label-stat-${Ys}`,type:"text",label:`Statistika Etiketi ${os+1}`,value:je.label}),ae.push({id:`value-stat-${Ys}`,type:"text",label:`Statistika Dəyəri ${os+1}`,value:je.value})}),U.sections=ae};fe.forEach(U=>{const ae=Fe.find(Ps=>Ps.id===U);ae?U==="about"&&Ds(ae):Fe.push({id:U,title:He[U]||U,sections:[{id:`${U}-default`,type:"text",label:"Bölmə",value:""}],images:[]})});const Bs=Fe.find(U=>U.id==="about");Bs&&Ds(Bs),a(Fe)}fetch(`/api/all-images?v=${Date.now()}`).then(fe=>fe.json()).then(fe=>{fe.local&&Ns(fe.local)});const x=await(await fetch("/api/events")).json();Array.isArray(x)&&(Te(x),x.length>0&&ve===null&&(Ee(x[0].id),Oe(x[0])));const S=await(await fetch("/api/news")).json();Array.isArray(S)&&(Re(S),S.length>0&&ye===null&&(Le(S[0].id),_e({...S[0]})));const L=await(await fetch("/api/drivers")).json();Array.isArray(L)&&(re(L),L.length>0&&R===null&&Se(L[0].id));const ge=await(await fetch("/api/gallery-photos")).json();Array.isArray(ge)&&Pe(ge);const $e=await(await fetch("/api/videos")).json();Array.isArray($e)&&(De($e),$e.length>0&&be===null&&Es($e[0].id))}catch(s){console.error("Content load error:",s)}};c.useEffect(()=>{zs(),!localStorage.getItem("forsaj_extracted")&&t.length===0&&!o&&setTimeout(()=>{t.length===0&&ns()},1e3)},[t.length]),c.useEffect(()=>{const s=new URLSearchParams(ts.search),i=s.get("mode"),r=s.get("page");if(i&&["extract","events","news","drivers","videos","photos"].includes(i))F(i);else if(r){F("extract");const x=t.findIndex(b=>b.id===r);x!==-1&&h(x)}},[ts.search,t]),c.useEffect(()=>{T!=="news"&&T!=="events"&&z&&(A(!1),pe(null))},[T,z]);const ns=async()=>{f(!0),k("Front-end komponentləri skan edilir..."),p(30);const s=Date.now(),i=y.loading("Sinxronizasiya başladı...");try{const r=await fetch("/api/extract-content",{method:"POST"});if(!r.ok){const I=await r.text();throw new Error(I||"Extraction failed")}p(60),k("Bulud bazası ilə sinxronizasiya edilir...");const x=await r.json(),b=x.pages||x;await fetch("/api/save-content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),p(90),a(b);const S=Date.now()-s;S<800&&await new Promise(I=>setTimeout(I,800-S)),p(100),k("Tamamlandı!"),setTimeout(()=>{f(!1),localStorage.setItem("forsaj_extracted","true"),y.success("Sinxronizasiya tamamlandı! Baza yeniləndi.",{id:i}),setTimeout(()=>window.location.reload(),1500)},500)}catch(r){console.error("Extraction error:",r),f(!1),y.error(`Sinxronizasiya xətası: ${r.message}`,{id:i})}},ls=(s,i,r,x)=>{const b=[...t],S=b[s].sections.findIndex(I=>I.id===i);if(S!==-1){const I=b[s].sections[S];if(!Ue(I,r))return;b[s].sections[S][r]=x,a(b)}},dt=(s,i,r)=>{const x=[...t],b=x[s].images.findIndex(S=>S.id===i);b!==-1&&(x[s].images[b].alt=r,a(x))},ct=()=>{if(!Ae.trim()){y.error("Başlıq daxil edin!");return}const i={id:Ae.toLowerCase().replace(/\s+/g,"-"),title:Ae,sections:[{id:"text-0",type:"text",label:"Bölmə",value:"Yeni bölmə məzmunu..."}],images:[]};a([...t,i]),h(t.length),d(!1),ks(""),y.success("Yeni bölmə əlavə edildi!")},mt=(s,i)=>{if(i.stopPropagation(),window.confirm("Bu bölməni silmək istədiyinizə əminsiniz?")){const r=t.filter((x,b)=>b!==s);a(r),l>=r.length&&h(Math.max(0,r.length-1)),y.success("Bölmə silindi")}},oe=(s,i,r)=>{if(l<0||l>=t.length)return;const x=[...t],b=x[l];if(b){if(s==="text"){const S=r||`text-${b.sections.length}-${Date.now()}`;b.sections.push({id:S,type:"text",label:i||"Bölmə",value:"Yeni mətn sahəsi..."}),y.success(`${i||"Yeni mətn"} sahəsi əlavə edildi`)}else{const S=r||`img-${b.images.length}-${Date.now()}`;b.images.push({id:S,path:"",alt:"",type:"local"}),y.success("Yeni şəkil sahəsi əlavə edildi")}a(x)}},As=(s,i)=>{if(l<0||l>=t.length)return;const r=[...t],x=r[l];x&&(s==="text"?x.sections=x.sections.filter(b=>b.id!==i):x.images=x.images.filter(b=>b.id!==i),a(r),y.success("Sahə silindi"))},pt=(s,i)=>{Ss({pageIdx:s,imgId:i}),j(!0)},xe=async s=>{const i=new FormData;i.append("image",s);const r=y.loading("Şəkil yüklənir...");try{const x=await fetch("/api/upload-image",{method:"POST",body:i});if(x.ok){const b=await x.json();return y.success("Şəkil uğurla yükləndi",{id:r}),b.url}else throw new Error("Upload fail")}catch(x){return console.error("Upload error:",x),y.error("Görsəl yüklənərkən xəta baş verdi",{id:r}),null}},ht=async(s,i,r)=>{const x=s.target.files?.[0];if(!x)return;const b=await xe(x);if(b){const S=[...t],I=S[i].images.findIndex(L=>L.id===r);I!==-1&&(S[i].images[I].path=b,S[i].images[I].type="local",a(S))}},ut=s=>{if(!J)return;const i=[...t];if(w){const r=`img-${i[J.pageIdx].images.length}-${Date.now()}`;i[J.pageIdx].images.push({id:r,path:s,alt:"Daxil edildi",type:"local"}),C(!1)}else{const r=i[J.pageIdx].images.findIndex(x=>x.id===J.imgId);r!==-1&&(i[J.pageIdx].images[r].path=s,i[J.pageIdx].images[r].type="local")}a(i),j(!1),y.success("Şəkil seçildi")},Ts=async()=>{g(!0);const s=y.loading("Yadda saxlanılır...");try{T==="extract"?await fetch("/api/save-content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}):T==="events"?await fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ee)}):T==="news"?await fetch("/api/news",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)}):T==="drivers"?await fetch("/api/drivers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)}):T==="videos"?await fetch("/api/videos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(te)}):T==="photos"&&await fetch("/api/gallery-photos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Be)}),y.success("Dəyişikliklər bulud bazasına qeyd edildi!",{id:s}),await zs()}catch(i){console.error("Save error:",i),y.error(`Yadda saxlama xətası: ${i.message} `,{id:s})}finally{g(!1)}},xt=s=>{const i=ee.find(r=>r.id===s);i&&(Ee(s),Oe({...i}),pe("event"),A(!0))},W=(s,i,r)=>{const x=r||ve;Oe(b=>{const I=!r||r===ve?{...b,[s]:i}:b;return x&&Te(L=>L.map(Y=>Y.id===x?{...Y,[s]:i}:Y)),I})},gt=()=>{const s=ee.length>0?Math.max(...ee.map(r=>r.id))+1:1,i={id:s,title:"Yeni Tədbir",date:new Date().toISOString().split("T")[0],location:"Bakı",category:"OFFROAD",img:"https://images.unsplash.com/photo-1533473359331-0135ef1b58bf?q=80&w=2070&auto=format&fit=crop",description:"",rules:"",status:"planned"};Te([...ee,i]),Ee(s),Oe(i),y.success("Yeni tədbir yaradıldı")},ft=async(s,i)=>{i.stopPropagation(),window.confirm("Bu tədbiri silmək istədiyinizə əminsiniz?")&&(Te(ee.filter(r=>r.id!==s)),ve===s&&Ee(null),y.success("Tədbir silindi"))},jt=s=>{const i=se.find(r=>r.id===s);i&&(Le(s),_e({...i}),pe("news"),A(!0))},de=(s,i,r)=>{const x=r||ye;_e(b=>{const I=!r||r===ye?{...b,[s]:i}:b;return x&&Re(L=>L.map(Y=>Y.id===x?{...Y,[s]:i}:Y)),I})},vt=()=>{const s=se.length>0?Math.max(...se.map(r=>r.id))+1:1,i={id:s,title:"Yeni Xəbər",date:new Date().toISOString().split("T")[0],img:"https://images.unsplash.com/photo-1503376780353-7e6692767b70?q=80&w=2070&auto=format&fit=crop",description:"",category:"BLOQ",status:"draft"};Re([...se,i]),Le(s),_e(i),y.success("Yeni xəbər yaradıldı")},Es=s=>{es(s);const i=te.find(r=>r.id===s);i&&ss({...i})},Ye=(s,i,r)=>{const x=be;ss(b=>{let I={...b,[s]:i};if(s==="youtubeUrl"){const L=Os(i);L&&(I={...I,videoId:L,thumbnail:`https://img.youtube.com/vi/${L}/maxresdefault.jpg`})}return x&&De(L=>L.map(Y=>{if(Y.id===x){let ge={...Y,[s]:i};if(s==="youtubeUrl"){const Me=Os(i);Me&&(ge.videoId=Me,ge.thumbnail=`https://img.youtube.com/vi/${Me}/maxresdefault.jpg`)}return ge}return Y})),I})},Os=s=>{const i=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,r=s.match(i);return r&&r[2].length===11?r[2]:null},Rs=s=>{Is(s);const i=Be.find(r=>r.id===s);i&&is({...i})},yt=()=>{const s=Date.now(),i={id:s,title:"Yeni Şəkil",url:""};Pe(r=>[...r,i]),Rs(s)},bt=async(s,i)=>{i.stopPropagation(),window.confirm("Bu şəkli silmək istədiyinizə əminsiniz?")&&(Pe(r=>r.filter(x=>x.id!==s)),Ne===s&&(Is(null),is({})),y.success("Şəkil silindi"))},rs=(s,i)=>{is(r=>{const x={...r,[s]:i};return Ne&&Pe(b=>b.map(S=>S.id===Ne?x:S)),x})},Nt=async s=>{const i=s.target.files?.[0];if(!i)return;const r=await xe(i);r&&rs("url",r)},St=()=>{const s=te.length>0?Math.max(...te.map(r=>r.id))+1:1,i={id:s,title:"Yeni Video",youtubeUrl:"",videoId:"",duration:"00:00",thumbnail:"",created_at:new Date().toISOString()};De([...te,i]),es(s),ss(i),y.success("Yeni video əlavə edildi")},kt=async(s,i)=>{i.stopPropagation(),window.confirm("Bu videonu silmək istədiyinizə əminsiniz?")&&(De(te.filter(r=>r.id!==s)),be===s&&es(null),y.success("Video silindi"))},wt=async(s,i)=>{i.stopPropagation(),window.confirm("Bu xəbəri silmək istədiyinizə əminsiniz?")&&(Re(se.filter(r=>r.id!==s)),ye===s&&Le(null),y.success("Xəbər silindi"))},Ct=s=>{Se(s),ke(null),ue({})},It=s=>{ke(s);const r=q.find(x=>x.id===R)?.drivers.find(x=>x.id===s);r&&ue({...r})},ce=(s,i)=>{!R||!he||ue(r=>{const x={...r,[s]:i};return re(b=>b.map(S=>S.id===R?{...S,drivers:S.drivers.map(I=>I.id===he?x:I)}:S)),x})},zt=()=>{if(!R){y.error("Öncə kateqoriya seçin və ya yaradın");return}const s=Date.now(),i={id:s,rank:99,name:"Yeni Sürücü",license:"PILOT LICENSE",team:"TEAM NAME",wins:0,points:0,img:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?q=80&w=400&fit=crop"};re(r=>r.map(x=>x.id===R?{...x,drivers:[...x.drivers,i]}:x)),ke(s),ue(i),y.success("Yeni sürücü siyahıya əlavə edildi")},At=s=>{window.confirm("Bu sürücünü silmək istədiyinizə əminsiniz?")&&(re(i=>i.map(r=>r.id===R?{...r,drivers:r.drivers.filter(x=>x.id!==s)}:r)),he===s&&(ke(null),ue({})),y.success("Sürücü silindi"))},Tt=async()=>{const s=D,i=q.map(x=>x.id===R?{...x,drivers:x.drivers.map(b=>b.id===he?{...b,...s}:b)}:x);g(!0);const r=y.loading("Yadda saxlanılır...");try{if(!(await fetch("/api/drivers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).ok)throw new Error("Yadda saxlama uğursuz oldu");re(i),y.success("Bütün sürücü məlumatları qeyd edildi",{id:r})}catch{y.error("Xəta baş verdi",{id:r})}finally{g(!1)}},Et=()=>{const s=window.prompt("Kateqoriya adı (Məs: UNLIMITED CLASS):");if(!s)return;const i=s.toLowerCase().replace(/[^a-z0-9]+/g,"-");if(q.find(x=>x.id===i)){y.error("Bu adda kateqoriya artıq mövcuddur");return}const r={id:i,name:s,drivers:[]};re([...q,r]),Se(i),y.success("Kateqoriya əlavə edildi")},Ot=()=>{if(!R)return;const s=q.find(i=>i.id===R);if(s&&window.confirm(`"${s.name}" kateqoriyasını və içindəki bütün sürücüləri silmək istədiyinizə əminsiniz?`)){const i=q.filter(r=>r.id!==R);re(i),i.length>0?Se(i[0].id):Se(null),ke(null),ue({}),y.success("Kateqoriya silindi")}};if(t.length===0&&!o&&!localStorage.getItem("forsaj_extracted"))return e.jsx("div",{className:"extractor-overlay",children:e.jsxs("div",{className:"extractor-card fade-in",children:[e.jsx(X,{size:64,className:"text-primary",style:{marginBottom:"1.5rem"}}),e.jsx("h2",{children:"Sayt Məzmununu və Görselləri Çıxarın"}),e.jsx("p",{children:"Front-end layihənizdəki bütün səhifələri, mətnləri və şəkilləri avtomatik olaraq bu panelə yükləyin."}),e.jsx("button",{className:"extract-btn",onClick:ns,children:"Sinxronizasiyanı Başlat"})]})});if(o)return e.jsx("div",{className:"extractor-overlay",children:e.jsxs("div",{className:"extractor-card",children:[e.jsx("div",{className:"loader-ring",style:{marginBottom:"1.5rem"}}),e.jsx("h2",{children:"Avtomatik Sinxronizasiya"}),e.jsx("p",{children:"Zəhmət olmasa gözləyin, front-end məlumatları oxunur..."}),e.jsx("div",{className:"progress-container",children:e.jsx("div",{className:"progress-bar",style:{width:`${u}%`}})}),e.jsx("div",{className:"step-label",children:v})]})});const G=t[l],Rt=t.map((s,i)=>({page:s,idx:i})).filter(({page:s})=>{if(!$)return!0;const i=$.toLowerCase(),r=s.title.toLowerCase().includes(i),x=s.sections.some(S=>S.label.toLowerCase().includes(i)||S.value.toLowerCase().includes(i)),b=s.images.some(S=>S.alt.toLowerCase().includes(i)||S.path.toLowerCase().includes(i));return r||x||b}),Ls=(G?.sections||[]).filter(s=>!$||s.label.toLowerCase().includes($.toLowerCase())||s.value.toLowerCase().includes($.toLowerCase())),_s=(G?.images||[]).filter(s=>!$||s.alt.toLowerCase().includes($.toLowerCase())||s.path.toLowerCase().includes($.toLowerCase()));return e.jsxs("div",{className:"visual-editor fade-in",children:[e.jsxs("div",{className:"editor-header",children:[e.jsxs("div",{className:"header-top-row",children:[e.jsx("div",{className:"header-info",children:e.jsxs("h1",{children:[e.jsx(X,{size:20})," Admin Panel"]})}),e.jsxs("div",{className:"header-search-container",children:[e.jsx(js,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#94a3b8"}}),e.jsx("input",{placeholder:"Komponentləri və məzmunu axtar...",type:"text",value:$,onChange:s=>ot(s.target.value),className:"header-search-input"})]}),e.jsxs("div",{className:"header-actions",children:[e.jsx("button",{className:"sync-btn-compact",onClick:()=>window.location.reload(),title:"Səhifəni yenilə",children:e.jsx(hs,{size:16})}),e.jsxs("button",{className:"sync-btn-compact",onClick:ns,disabled:o,style:{background:"#f0fdf4",border:"1px solid #bbf7d0",color:"#166534",fontWeight:"600",gap:"6px"},children:[e.jsx(hs,{size:16,className:o?"spin":""}),o?"Sinxron...":"Sinxron"]}),e.jsx("button",{className:`save-btn ${m?"saving":""}`,onClick:Ts,disabled:m,children:m?"Gözləyin...":e.jsxs(e.Fragment,{children:[e.jsx(vs,{size:16})," Yenilə"]})})]})]}),e.jsxs("div",{className:"mode-switcher",children:[e.jsx("button",{className:`mode-btn ${T==="extract"?"active":""}`,onClick:()=>F("extract"),children:"Sayt Məzmunu"}),e.jsx("button",{className:`mode-btn ${T==="events"?"active":""}`,onClick:()=>F("events"),children:"Tədbirlər"}),e.jsx("button",{className:`mode-btn ${T==="news"?"active":""}`,onClick:()=>F("news"),children:"Xəbərlər"}),e.jsx("button",{className:`mode-btn ${T==="drivers"?"active":""}`,onClick:()=>F("drivers"),children:"Sürücülər"}),e.jsx("button",{className:`mode-btn ${T==="videos"?"active":""}`,onClick:()=>F("videos"),children:"Videolar"}),e.jsx("button",{className:`mode-btn ${T==="photos"?"active":""}`,onClick:()=>F("photos"),children:"Fotolar"})]})]}),T==="news"?e.jsxs("div",{className:"editor-layout",children:[e.jsxs("aside",{className:"page-list",children:[e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Xəbərlər"}),e.jsx("button",{className:"add-section-btn",onClick:vt,children:e.jsx(B,{size:16})})]}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 300px)"},children:se.length===0?e.jsx("div",{style:{padding:"2rem 1rem",textAlign:"center",color:"#94a3b8",fontSize:"0.875rem",border:"1px dashed #e2e8f0",borderRadius:"8px"},children:'Hələ heç bir xəbər yoxdur. Yeni xəbər yaratmaq üçün yuxarıdakı "+" düyməsini basın.'}):se.map(s=>e.jsxs("div",{className:"page-nav-wrapper",style:{position:"relative",marginBottom:"4px"},children:[e.jsxs("button",{className:`page-nav-item ${ye===s.id?"active":""}`,onClick:()=>jt(s.id),style:{width:"100%",paddingRight:"40px",textAlign:"left"},children:[e.jsx(Ce,{size:14})," ",s.title,e.jsx("div",{style:{fontSize:"10px",color:"#999",marginLeft:"24px"},children:s.date})]}),e.jsx("button",{className:"delete-section-btn",onClick:i=>wt(s.id,i),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ff4d4f",opacity:.5,cursor:"pointer"},children:e.jsx(H,{size:14})})]},s.id))})]}),e.jsx("main",{className:"editor-canvas",style:{padding:"0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#94a3b8",flexDirection:"column",gap:"1rem"},children:[e.jsx(Ce,{size:48,style:{opacity:.2}}),e.jsx("p",{children:"Redaktə etmək üçün sol tərəfdən xəbər seçin və ya yeni yaradın."})]})})]}):T==="events"?e.jsxs("div",{className:"editor-layout",children:[e.jsxs("aside",{className:"page-list",children:[e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Tədbirlər"}),e.jsx("button",{className:"add-section-btn",onClick:gt,children:e.jsx(B,{size:16})})]}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 300px)"},children:ee.length===0?e.jsx("div",{style:{padding:"2rem 1rem",textAlign:"center",color:"#94a3b8",fontSize:"0.875rem",border:"1px dashed #e2e8f0",borderRadius:"8px"},children:'Hələ heç bir tədbir yoxdur. Yeni tədbir yaratmaq üçün yuxarıdakı "+" düyməsini basın.'}):ee.map(s=>e.jsxs("div",{className:"page-nav-wrapper",style:{position:"relative",marginBottom:"4px"},children:[e.jsxs("button",{className:`page-nav-item ${ve===s.id?"active":""}`,onClick:()=>xt(s.id),style:{width:"100%",paddingRight:"40px",textAlign:"left"},children:[e.jsx(We,{size:14})," ",s.title,e.jsx("div",{style:{fontSize:"10px",color:"#999",marginLeft:"24px"},children:s.date})]}),e.jsx("button",{className:"delete-section-btn",onClick:i=>ft(s.id,i),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ff4d4f",opacity:.5,cursor:"pointer"},children:e.jsx(H,{size:14})})]},s.id))})]}),e.jsx("main",{className:"editor-canvas",style:{padding:"0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#94a3b8",flexDirection:"column",gap:"1rem"},children:[e.jsx(We,{size:48,style:{opacity:.2}}),e.jsx("p",{children:"Redaktə etmək üçün sol tərəfdən tədbir seçin və ya yeni yaradın."})]})})]}):T==="drivers"?e.jsxs("div",{className:"editor-layout",children:[e.jsxs("aside",{className:"page-list",children:[e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Kateqoriyalar"}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("button",{className:"add-section-btn",onClick:Et,title:"Kateqoriya əlavə et",children:e.jsx(B,{size:16})}),e.jsx("button",{className:"delete-section-btn",onClick:Ot,title:"Seçilmiş kateqoriyanı sil",style:{background:"none",border:"none",color:"#ff4d4f",cursor:"pointer",padding:"4px"},children:e.jsx(H,{size:16})})]})]}),e.jsx("select",{value:R||"",onChange:s=>Ct(s.target.value),style:{width:"100%",padding:"10px",marginBottom:"1.5rem",borderRadius:"8px",border:"1px solid #e2e8f0",background:"white",fontWeight:"bold"},children:q.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))}),e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Sürücülər"}),e.jsx("button",{className:"add-section-btn",onClick:zt,children:e.jsx(B,{size:16})})]}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 400px)"},children:R&&q.find(s=>s.id===R)?.drivers.length===0?e.jsx("div",{style:{padding:"2rem 1rem",textAlign:"center",color:"#94a3b8",fontSize:"0.875rem"},children:"Bu kateqoriyada sürücü yoxdur."}):q.find(s=>s.id===R)?.drivers.map(s=>e.jsxs("div",{className:"page-nav-wrapper",style:{position:"relative",marginBottom:"4px"},children:[e.jsxs("button",{className:`page-nav-item ${he===s.id?"active":""}`,onClick:()=>It(s.id),style:{width:"100%",paddingRight:"40px",textAlign:"left"},children:[e.jsxs("span",{style:{fontWeight:"900",color:"var(--primary)",marginRight:"8px"},children:["#",s.rank]})," ",s.name]}),e.jsx("button",{className:"delete-section-btn",onClick:i=>{i.stopPropagation(),At(s.id)},style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ff4d4f",opacity:.5,cursor:"pointer"},children:e.jsx(H,{size:14})})]},s.id))})]}),e.jsx("main",{className:"editor-canvas",style:{padding:"0"},children:he!==null&&D.id!==void 0?e.jsxs("div",{style:{padding:"2rem",height:"100%",overflowY:"auto"},children:[e.jsxs("div",{className:"canvas-header",style:{marginBottom:"2rem",borderBottom:"1px solid #eee",paddingBottom:"1rem"},children:[e.jsx("h2",{style:{fontSize:"2rem"},children:D.name}),e.jsxs("p",{style:{color:"#64748b"},children:[q.find(s=>s.id===R)?.name," // RANK #",D.rank]})]}),e.jsxs("div",{className:"edit-grid",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"SÜRÜCÜNÜN ADI VƏ SOYADI"}),e.jsx("input",{type:"text",value:D.name,onChange:s=>ce("name",s.target.value),placeholder:"Məs: Əli Məmmədov",style:{width:"100%",padding:"14px",border:"2px solid #e2e8f0",borderRadius:"12px",fontSize:"16px",fontWeight:"bold"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"YARIŞ SIRALAMASI (RANK)"}),e.jsx("input",{type:"number",value:D.rank,readOnly:!0,style:{width:"100%",padding:"14px",border:"2px solid #e2e8f0",borderRadius:"12px",fontSize:"16px",background:"#f8fafc",color:"#94a3b8",cursor:"not-allowed"}}),e.jsx("p",{style:{fontSize:"11px",color:"#3b82f6",marginTop:"6px",fontWeight:"bold"},children:"ℹ️ Bu sıra ballara görə avtomatik hesablanır"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"PİLOT LİSENZİYASI"}),e.jsx("input",{type:"text",value:D.license,onChange:s=>ce("license",s.target.value),placeholder:"Məs: A-SİNFİ",style:{width:"100%",padding:"14px",border:"2px solid #e2e8f0",borderRadius:"12px",fontSize:"15px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"TƏMSİL ETDİYİ KOMANDA"}),e.jsx("input",{type:"text",value:D.team,onChange:s=>ce("team",s.target.value),placeholder:"Məs: FORSAJ RACING",style:{width:"100%",padding:"14px",border:"2px solid #e2e8f0",borderRadius:"12px",fontSize:"15px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"QALİBİYYƏT (WINS)"}),e.jsx("input",{type:"number",value:D.wins,onChange:s=>ce("wins",parseInt(s.target.value)),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"XAL (POINTS)"}),e.jsx("input",{type:"number",value:D.points,onChange:s=>ce("points",parseInt(s.target.value)),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"PİLOT ŞƏKLİ"}),e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",overflow:"hidden",background:"#f1f5f9",border:"2px solid var(--primary)"},children:D.img?e.jsx("img",{src:D.img,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(V,{size:24,style:{opacity:.2}})})}),e.jsxs("div",{style:{flex:1,display:"flex",gap:"0.5rem"},children:[e.jsx("input",{type:"text",value:D.img||"",onChange:s=>ce("img",s.target.value),placeholder:"Şəkil URL və ya yol...",style:{flex:1,padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),e.jsx("input",{type:"file",id:"driver-img-upload",style:{display:"none"},accept:"image/*",onChange:async s=>{const i=s.target.files?.[0];if(i){const r=await xe(i);r&&ce("img",r)}}}),e.jsx("button",{onClick:()=>document.getElementById("driver-img-upload")?.click(),style:{background:"#f1f5f9",border:"1px solid #e2e8f0",padding:"12px",borderRadius:"8px",cursor:"pointer"},children:"Yüklə"})]})]})]})]}),e.jsx("div",{style:{marginTop:"2rem",display:"flex",justifyContent:"flex-end"},children:e.jsx("button",{className:"btn-primary",onClick:Tt,disabled:m,children:m?"Gözləyin...":"Sürücünü Yadda Saxla"})})]}):e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#94a3b8",flexDirection:"column",gap:"1rem"},children:[e.jsx(ms,{size:48,style:{opacity:.2}}),e.jsx("p",{children:"Redaktə etmək üçün sol tərəfdən sürücü seçin."})]})})]}):T==="videos"?e.jsxs("div",{className:"editor-layout",children:[e.jsxs("aside",{className:"page-list",children:[e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Videolar"}),e.jsx("button",{className:"add-section-btn",onClick:St,children:e.jsx(B,{size:16})})]}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 300px)"},children:te.length===0?e.jsx("div",{style:{padding:"2rem 1rem",textAlign:"center",color:"#94a3b8",fontSize:"0.875rem"},children:"Heç bir video əlavə edilməyib."}):te.map(s=>e.jsxs("div",{className:"page-nav-wrapper",style:{position:"relative",marginBottom:"4px"},children:[e.jsxs("button",{className:`page-nav-item ${be===s.id?"active":""}`,onClick:()=>Es(s.id),style:{width:"100%",paddingRight:"40px",textAlign:"left",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"24px",height:"16px",background:"#333",borderRadius:"2px",overflow:"hidden"},children:s.thumbnail&&e.jsx("img",{src:s.thumbnail,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})}),e.jsx("span",{style:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:s.title})]}),e.jsx("button",{className:"delete-section-btn",onClick:i=>{i.stopPropagation(),kt(s.id,i)},style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ff4d4f",opacity:.5,cursor:"pointer"},children:e.jsx(H,{size:14})})]},s.id))})]}),e.jsx("main",{className:"editor-canvas",style:{padding:"0"},children:be!==null&&P.id!==void 0?e.jsxs("div",{style:{padding:"2rem",height:"100%",overflowY:"auto"},children:[e.jsxs("div",{className:"canvas-header",style:{marginBottom:"2rem",borderBottom:"1px solid #eee",paddingBottom:"1rem"},children:[e.jsx("h2",{style:{fontSize:"2rem"},children:"Video Redaktəsi"}),e.jsxs("p",{style:{color:"#64748b"},children:[P.title," // ID: ",P.id]})]}),e.jsxs("div",{className:"edit-grid",style:{display:"grid",gridTemplateColumns:"1fr",gap:"2rem",maxWidth:"800px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"VİDEO BAŞLIĞI"}),e.jsx("input",{type:"text",value:P.title,onChange:s=>Ye("title",s.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"16px",fontWeight:"bold"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"YOUTUBE URL"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(X,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#94a3b8"}}),e.jsx("input",{type:"text",value:P.youtubeUrl,onChange:s=>Ye("youtubeUrl",s.target.value),placeholder:"https://www.youtube.com/watch?v=...",style:{width:"100%",padding:"12px 12px 12px 40px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),e.jsx("p",{style:{fontSize:"11px",color:"#64748b",marginTop:"6px"},children:"YouTube linkini daxil etdikdə şəkil və ID avtomatik təyin olunacaq."})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"MÜDDƏT (MƏS: 05:20)"}),e.jsx("input",{type:"text",value:P.duration,onChange:s=>Ye("duration",s.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"VİDEO ID (AVTOMATİK)"}),e.jsx("input",{type:"text",value:P.videoId,readOnly:!0,style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#94a3b8"}})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"YARADILMA TARİXİ"}),e.jsx("input",{type:"text",value:P.created_at||"",onChange:s=>Ye("created_at",s.target.value),placeholder:"2026-02-16T10:30:00.000Z",style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"ÖNİZLƏMƏ (THUMBNAIL)"}),e.jsxs("div",{style:{width:"100%",aspectRatio:"16/9",borderRadius:"12px",overflow:"hidden",background:"#000",border:"1px solid #e2e8f0",position:"relative"},children:[P.thumbnail?e.jsx("img",{src:P.thumbnail,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"1rem"},children:[e.jsx(cs,{size:48,style:{opacity:.1,color:"white"}}),e.jsx("p",{style:{color:"#64748b",fontSize:"12px"},children:"YouTube linki daxil edin"})]}),P.videoId&&e.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.3)",cursor:"pointer"},onClick:()=>window.open(P.youtubeUrl,"_blank"),children:e.jsx("div",{style:{background:"#FF4D00",color:"white",padding:"12px",borderRadius:"50%",boxShadow:"0 0 20px rgba(255,77,0,0.4)"},children:e.jsx(Js,{size:24,fill:"currentColor"})})})]})]})]})]}):e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#94a3b8",flexDirection:"column",gap:"1rem"},children:[e.jsx(cs,{size:48,style:{opacity:.2}}),e.jsx("p",{children:"Redaktə etmək üçün sol tərəfdən video seçin və ya yeni əlavə edin."})]})})]}):T==="photos"?e.jsxs("div",{className:"editor-layout",children:[e.jsxs("aside",{className:"page-list",children:[e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Foto Arxiv"}),e.jsx("button",{className:"add-section-btn",onClick:yt,title:"Yeni şəkil əlavə et",children:e.jsx(B,{size:16})})]}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 200px)"},children:Be.length===0?e.jsx("p",{style:{padding:"20px",color:"#94a3b8",textAlign:"center",fontSize:"13px"},children:"Şəkil yoxdur"}):Be.map(s=>e.jsxs("div",{className:"page-nav-wrapper",style:{position:"relative",marginBottom:"4px"},children:[e.jsxs("button",{className:`page-nav-item ${Ne===s.id?"active":""}`,onClick:()=>Rs(s.id),style:{width:"100%",paddingRight:"40px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"4px",overflow:"hidden",flexShrink:0,background:"#eee"},children:s.url?e.jsx("img",{src:s.url,style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx(V,{size:12,style:{margin:"6px",opacity:.3}})}),e.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:s.title})]}),e.jsx("button",{className:"delete-section-btn",onClick:i=>bt(s.id,i),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ff4d4f",opacity:.5,cursor:"pointer"},children:e.jsx(H,{size:14})})]},s.id))})]}),e.jsx("main",{className:"editor-canvas",style:{padding:"0"},children:Ne!==null&&le.id!==void 0?e.jsxs("div",{style:{padding:"2rem",height:"100%",overflowY:"auto"},children:[e.jsxs("div",{className:"canvas-header",style:{marginBottom:"2rem",borderBottom:"1px solid #eee",paddingBottom:"1rem"},children:[e.jsx("h2",{style:{fontSize:"2rem"},children:"Şəkil Redaktəsi"}),e.jsxs("p",{style:{color:"#64748b"},children:[le.title," // ID: ",le.id]})]}),e.jsxs("div",{className:"edit-grid",style:{display:"grid",gridTemplateColumns:"1fr",gap:"2rem",maxWidth:"800px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"ŞƏKİL BAŞLIĞI"}),e.jsx("input",{type:"text",value:le.title,onChange:s=>rs("title",s.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"16px",fontWeight:"bold"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"FOTO"}),e.jsxs("div",{style:{width:"100%",minHeight:"300px",borderRadius:"12px",overflow:"hidden",background:"#f8fafc",border:"1px dashed #cbd5e1",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"1rem"},children:[le.url?e.jsx("img",{src:le.url,alt:"",style:{maxWidth:"100%",maxHeight:"400px",objectFit:"contain"}}):e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"1rem"},children:[e.jsx(V,{size:48,style:{opacity:.1}}),e.jsx("p",{style:{color:"#64748b",fontSize:"12px"},children:"Şəkil seçilməyib"})]}),e.jsxs("div",{style:{marginTop:"1rem",display:"flex",gap:"1rem"},children:[e.jsx("input",{type:"file",id:"gallery-photo-upload",style:{display:"none"},accept:"image/*",onChange:Nt}),e.jsxs("button",{onClick:()=>document.getElementById("gallery-photo-upload")?.click(),className:"btn-primary",style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(B,{size:18})," Şəkil Yüklə"]}),e.jsx("input",{type:"text",value:le.url||"",onChange:s=>rs("url",s.target.value),placeholder:"URL və ya yol...",style:{padding:"10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px",width:"250px"}})]})]})]})]})]}):e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#94a3b8",flexDirection:"column",gap:"1rem"},children:[e.jsx(V,{size:48,style:{opacity:.2}}),e.jsx("p",{children:"Redaktə etmək üçün sol tərəfdən şəkil seçin və ya yeni əlavə edin."})]})})]}):e.jsxs("div",{className:"editor-layout",children:[e.jsxs("aside",{className:"page-list",children:[e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Komponentlər"}),e.jsx("button",{className:"add-section-btn",onClick:()=>d(!0),children:e.jsx(B,{size:16})})]}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 300px)"},children:Rt.map(({page:s,idx:i})=>e.jsxs("div",{className:"page-nav-wrapper",style:{position:"relative",marginBottom:"4px"},children:[e.jsxs("button",{className:`page-nav-item ${l===i?"active":""}`,onClick:()=>h(i),style:{width:"100%",paddingRight:"40px",textAlign:"left"},children:[e.jsx(ps,{size:16})," ",He[s.id]||s.title||s.id]}),!He[s.id]&&e.jsx("button",{className:"delete-section-btn",onClick:r=>mt(i,r),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ff4d4f",opacity:.3,cursor:"pointer"},children:e.jsx(H,{size:14})})]},i))})]}),e.jsx("main",{className:"editor-canvas",children:G?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"canvas-header",children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:800,color:"var(--text-main)"},children:He[G.id]||G.title}),e.jsxs("div",{className:"canvas-actions",style:{display:"flex",gap:"10px",alignItems:"center"},children:[G.id==="about"&&e.jsxs("button",{className:"add-field-minimal",onClick:()=>{oe("text","Statistika Etiketi",`label-stat-${Date.now()}`),oe("text","Statistika Dəyəri",`value-stat-${Date.now()}`)},style:{background:"#f5f3ff",color:"#7c3aed",border:"1px solid #ddd6fe"},children:[e.jsx(ms,{size:14})," Statistika Əlavə Et"]}),G.id==="values"&&e.jsxs("button",{className:"add-field-minimal",onClick:()=>{oe("text","İkon Kodu (Shield/Users/Leaf/Zap)",`val-icon-${Date.now()}`),oe("text","Dəyər Başlığı",`val-title-${Date.now()}`),oe("text","Dəyər Təsviri",`val-desc-${Date.now()}`)},style:{background:"#f0fdf4",color:"#16a34a",border:"1px solid #bbf7d0"},children:[e.jsx(B,{size:14})," Yeni Dəyər Əlavə Et"]}),e.jsx("div",{style:{width:"1px",height:"24px",background:"#e2e8f0",margin:"0 4px"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"#f8fafc",padding:"4px 12px",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:800,color:"#64748b"},children:"VƏZİYYƏT:"}),e.jsx("button",{onClick:()=>{const s=[...t];s[l].active=G?.active===!1,a(s),y.success(s[l].active?"Bölmə aktivləşdirildi":"Bölmə deaktiv edildi")},style:{width:"36px",height:"18px",borderRadius:"9px",background:G?.active!==!1?"#10b981":"#cbd5e1",position:"relative",cursor:"pointer",border:"none",transition:"background 0.3s"},children:e.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:"white",position:"absolute",top:"2px",left:G?.active!==!1?"20px":"2px",transition:"left 0.3s"}})})]})]})]}),e.jsxs("div",{className:"edit-fields",children:[e.jsxs("div",{className:"field-group",children:[e.jsxs("div",{className:"field-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("label",{children:[e.jsx(Xs,{size:16})," Mətn Rezervləri"]}),e.jsxs("button",{className:"add-field-minimal",onClick:()=>oe("text"),children:[e.jsx(B,{size:14})," Mətn Əlavə Et"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:Ls.length===0&&$?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#94a3b8",fontSize:"0.9rem",border:"1px dashed #e2e8f0",borderRadius:"8px"},children:"Bu səhifədə sorğuya uyğun mətn tapılmadı."}):Ls.map(s=>{const i=bs(s),r=Ue(s,"label"),x=Ue(s,"value"),b=Ue(s,"url"),S=ei(s);return e.jsxs("div",{className:"field-item-wrapper",style:{position:"relative",background:"#fcfcfd",padding:"1rem",borderRadius:"12px",border:"1px solid #f0f0f2"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",marginBottom:"0.5rem"},children:[e.jsx("input",{type:"text",value:s.label,onChange:I=>ls(l,s.id,"label",I.target.value),disabled:!r,style:{fontSize:"0.7rem",fontWeight:800,textTransform:"uppercase",color:"var(--primary)",border:"none",background:"none",width:"auto",padding:0}}),e.jsx("span",{style:{fontSize:"10px",color:"#ccc"},children:i?"• MƏZMUN AÇARI (YALNIZ DƏYƏR)":"• REZERV"})]}),e.jsx(Ge,{id:`editor-${s.id}`,value:s.value||"",onChange:I=>ls(l,s.id,"value",I),readOnly:!x}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(X,{size:14,style:{color:"#94a3b8"}}),e.jsx("input",{type:"text",value:s.url||"",onChange:I=>ls(l,s.id,"url",I.target.value),disabled:!b,placeholder:"URL (Məs: /about veya https://...)",style:{fontSize:"12px",padding:"6px 10px",border:"1px solid #e2e8f0",borderRadius:"6px",flex:1}})]}),S&&e.jsx("button",{className:"field-delete-btn",onClick:()=>As("text",s.id),style:{position:"absolute",right:"10px",top:"10px",background:"#fff",border:"1px solid #fee2e2",color:"#ef4444",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:e.jsx(H,{size:12})})]},s.id)})})]}),e.jsxs("div",{className:"field-group",children:[e.jsxs("div",{className:"field-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("label",{children:[e.jsx(V,{size:16})," Bölmədəki Şəkillər"]}),e.jsxs("button",{className:"add-field-minimal",onClick:()=>oe("image"),children:[e.jsx(B,{size:14})," Yeni Şəkil Yeri"]})]}),e.jsx("div",{className:"images-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))",gap:"1.5rem"},children:_s.length>0?_s.map(s=>e.jsxs("div",{className:"image-edit-card",style:{border:"1px solid #eee",borderRadius:"12px",overflow:"hidden",background:"#fff",position:"relative"},children:[e.jsx("button",{className:"field-delete-btn",onClick:()=>As("image",s.id),style:{position:"absolute",right:"8px",top:"8px",zIndex:10,background:"rgba(255,255,255,0.9)",border:"1px solid #fee2e2",color:"#ef4444",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(H,{size:12})}),e.jsx("div",{style:{height:"120px",background:"#f8fafc",position:"relative",overflow:"hidden"},children:s.path&&(s.path.startsWith("http")||s.path.startsWith("/"))?e.jsx("img",{src:s.path,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"#f1f5f9"},children:[e.jsx(V,{size:32,style:{opacity:.1}}),e.jsx("span",{style:{fontSize:"10px",color:"#999",position:"absolute",bottom:"10px"},children:"Yol yoxdur"})]})}),e.jsxs("div",{style:{padding:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.25rem",marginBottom:"4px"},children:[e.jsx("input",{type:"text",placeholder:"Resur yolu...",value:s.path,onChange:i=>{if(l<0||l>=t.length)return;const r=[...t],x=r[l];if(!x)return;const b=x.images.findIndex(S=>S.id===s.id);b!==-1&&(x.images[b].path=i.target.value,a(r))},style:{fontSize:"0.75rem",flex:1,padding:"0.4rem",border:"1px solid #eee",borderRadius:"4px"}}),e.jsx("button",{onClick:()=>pt(l,s.id),title:"Sistemdən seç",style:{padding:"0 8px",background:"#f1f5f9",border:"1px solid #e2e8f0",borderRadius:"4px",cursor:"pointer"},children:e.jsx(X,{size:14})}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:"file",id:`file-up-${s.id}`,style:{display:"none"},accept:"image/*",onChange:i=>ht(i,l,s.id)}),e.jsx("button",{onClick:()=>document.getElementById(`file-up-${s.id}`)?.click(),title:"Kompüterdən yüklə",style:{padding:"0 8px",height:"100%",background:"#f1f5f9",border:"1px solid #e2e8f0",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(B,{size:14})})]})]}),e.jsx("input",{type:"text",placeholder:"Alt mətni...",value:s.alt,onChange:i=>dt(l,s.id,i.target.value),style:{fontSize:"0.75rem",width:"100%",padding:"0.4rem",border:"1px solid #eee",borderRadius:"4px"}})]})]},s.id)):e.jsx("div",{className:"empty-fields-tip",style:{gridColumn:"1/-1",textAlign:"center",padding:"2rem",background:"#f8fafc",borderRadius:"12px",border:"1px dashed #cbd5e1",color:"#64748b"},children:$?"Sorğuya uyğun şəkil tapılmadı.":"Bu bölmədə redaktə ediləcək şəkil yoxdur."})})]}),e.jsxs("div",{className:"field-group",children:[e.jsxs("label",{children:[e.jsx(V,{size:16})," Yeni Şəkil Yüklə"]}),e.jsxs("div",{className:"upload-dropzone",children:[e.jsx(B,{size:24}),e.jsx("p",{children:"Şəkil yükləmək üçün seçin"}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[e.jsx("button",{className:"btn-secondary",onClick:()=>{const s=document.createElement("input");s.type="file",s.accept="image/*",s.onchange=async i=>{const r=i.target.files?.[0];if(!r)return;const x=await xe(r);if(x&&l>=0&&l<t.length){const b=[...t],S=b[l];if(S){const I=`img-${S.images.length}-${Date.now()}`;S.images.push({id:I,path:x,alt:"",type:"local"}),a(b),y.success("Yeni şəkil əlavə edildi")}}},s.click()},children:"Cihazdan Yüklə"}),e.jsx("button",{className:"btn-secondary",onClick:()=>{const s=`img-${(G.images||[]).length}`;Ss({pageIdx:l,imgId:s}),C(!0),j(!0)},children:"Kitabxanadan Seç"})]})]})]})]})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"#94a3b8",gap:"1rem"},children:[e.jsx(ps,{size:48,style:{opacity:.2}}),e.jsx("p",{children:"Redaktə etmək üçün sol tərəfdən bir komponent seçin."})]})})]}),n&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-card fade-in",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Yeni Bölmə Əlavə Et"}),e.jsx("button",{onClick:()=>d(!1),children:e.jsx(Ve,{size:20})})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Bölmə Başlığı"}),e.jsx("input",{type:"text",value:Ae,onChange:s=>ks(s.target.value),placeholder:"Məs: Xidmətlərimiz, Kampaniyalar...",autoFocus:!0})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>d(!1),children:"Ləğv et"}),e.jsx("button",{className:"btn-primary",onClick:ct,children:"Əlavə et"})]})]})}),N&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-card fade-in",style:{maxWidth:"800px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Sistem Şəkilləri"}),e.jsx("button",{onClick:()=>j(!1),children:e.jsx(Ve,{size:20})})]}),e.jsx("div",{className:"modal-body",style:{maxHeight:"60vh",overflowY:"auto"},children:e.jsx("div",{className:"image-selector-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(130px, 1fr))",gap:"1rem"},children:Je.length>0?Je.map((s,i)=>e.jsxs("div",{className:"selector-image-card",onClick:()=>ut(s),style:{cursor:"pointer",border:"2px solid #f1f5f9",borderRadius:"12px",overflow:"hidden",transition:"all 0.2s"},children:[e.jsx("div",{style:{aspectRatio:"1/1",background:"#f8fafc"},children:e.jsx("img",{src:s,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})}),e.jsx("div",{style:{padding:"0.5rem",fontSize:"10px",color:"#64748b",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center"},children:s.split("/").pop()})]},i)):e.jsx("div",{style:{gridColumn:"1/-1",textAlign:"center",padding:"3rem",color:"#94a3b8"},children:"Sistemdə heç bir şəkil tapılmadı."})})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"btn-secondary",onClick:()=>j(!1),children:"Bağla"})})]})}),z&&e.jsx("div",{className:"modal-overlay",onClick:()=>A(!1),children:e.jsxs("div",{className:"modal-card full-screen fade-in",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[M==="news"?e.jsx(Ce,{size:20}):e.jsx(We,{size:20}),M==="news"?"Xəbəri Redaktə Et":"Tədbiri Redaktə Et"]}),e.jsx("button",{onClick:()=>A(!1),children:e.jsx(Ve,{size:20})})]}),e.jsx("div",{className:"modal-body",children:M==="news"?e.jsxs("div",{className:"edit-grid",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"BAŞLIQ (AZ)"}),e.jsx("input",{type:"text",value:_.title,onChange:s=>de("title",s.target.value,_.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"TARİX"}),e.jsx("input",{type:"date",value:_.date,onChange:s=>de("date",s.target.value,_.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"KATEQORİYA"}),e.jsx("input",{type:"text",value:_.category,onChange:s=>de("category",s.target.value,_.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"VƏZİYYƏT"}),e.jsxs("select",{value:_.status,onChange:s=>de("status",s.target.value,_.id),children:[e.jsx("option",{value:"draft",children:"Qaralama"}),e.jsx("option",{value:"published",children:"Dərc edilib"})]})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{children:"ŞƏKİL"}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("input",{type:"text",value:_.img,onChange:s=>de("img",s.target.value,_.id),style:{flex:1}}),e.jsx("input",{type:"file",id:"news-modal-img",style:{display:"none"},onChange:async s=>{const i=s.target.files?.[0];if(i){const r=await xe(i);r&&de("img",r,_.id)}}}),e.jsx("button",{onClick:()=>document.getElementById("news-modal-img")?.click(),className:"btn-secondary",children:"Yüklə"})]})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{children:"MƏZMUN"}),e.jsx(Ge,{id:"news-modal-desc",value:_.description||"",onChange:s=>de("description",s,_.id)})]})]}):e.jsxs("div",{className:"edit-grid",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"TƏDBİR ADI"}),e.jsx("input",{type:"text",value:E.title,onChange:s=>W("title",s.target.value,E.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"TARİX"}),e.jsx("input",{type:"date",value:E.date,onChange:s=>W("date",s.target.value,E.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"MƏKAN"}),e.jsx("input",{type:"text",value:E.location,onChange:s=>W("location",s.target.value,E.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"KATEQORİYA"}),e.jsx("input",{type:"text",value:E.category,onChange:s=>W("category",s.target.value,E.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"VƏZİYYƏT"}),e.jsxs("select",{value:E.status,onChange:s=>W("status",s.target.value,E.id),children:[e.jsx("option",{value:"planned",children:"Gələcək"}),e.jsx("option",{value:"past",children:"Keçmiş"})]})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{children:"ŞƏKİL"}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("input",{type:"text",value:E.img,onChange:s=>W("img",s.target.value,E.id),style:{flex:1}}),e.jsx("input",{type:"file",id:"event-modal-img",style:{display:"none"},onChange:async s=>{const i=s.target.files?.[0];if(i){const r=await xe(i);r&&W("img",r,E.id)}}}),e.jsx("button",{onClick:()=>document.getElementById("event-modal-img")?.click(),className:"btn-secondary",children:"Yüklə"})]})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{children:"TƏSVİR"}),e.jsx(Ge,{id:"event-modal-desc",value:E.description||"",onChange:s=>W("description",s,E.id)})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{children:"PDF URL"}),e.jsx("input",{type:"text",value:E.pdfUrl||"",onChange:s=>W("pdfUrl",s.target.value,E.id),placeholder:"https://.../rules.pdf"})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{children:"QAYDALAR"}),e.jsx(Ge,{id:"event-modal-rules",value:E.rules||"",onChange:s=>W("rules",s,E.id)})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>A(!1),children:"Bağla"}),e.jsx("button",{className:"btn-primary",onClick:()=>{A(!1),Ts()},children:"Yadda Saxla"})]})]})})]})},ti=()=>{const[t,a]=c.useState("stopped"),[l,h]=c.useState("3000"),[m,g]=c.useState("development"),[o,f]=c.useState({cpu:0,ram:{total:0,used:0,percentage:0},versions:{node:"",vite:"",project:""},uptime:""}),u=()=>{fetch("/api/frontend/status").then(v=>v.json()).then(v=>{a(v.status),h(v.port.toString()),v.stats&&f(v.stats)}).catch(()=>console.log("Status check failed"))};c.useEffect(()=>{u();const v=setInterval(u,5e3);return()=>clearInterval(v)},[]);const p=async v=>{v==="restart"&&a("restarting");try{await fetch("/api/frontend/action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:v})}),setTimeout(u,2e3),y.success(`${v.charAt(0).toUpperCase()+v.slice(1)} əmri göndərildi`)}catch{y.error("Əməliyyat uğursuz oldu")}};return e.jsxs("div",{className:"settings-container fade-in",children:[e.jsxs("div",{className:"settings-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Frontend tənzimləmələri"}),e.jsx("p",{children:"Sistem infrastrukturunu və server parametrlərini idarə edin"})]}),e.jsxs("div",{className:`status-badge ${t}`,children:[e.jsx("div",{className:"pulse"}),t==="running"?"Aktiv":t==="stopped"?"Dayandırılıb":"Yenidən başladılır..."]})]}),e.jsxs("div",{className:"settings-grid",children:[e.jsxs("div",{className:"settings-card controls",children:[e.jsxs("h3",{children:[e.jsx(Vs,{size:20})," Server Nəzarəti"]}),e.jsxs("div",{className:"action-buttons",children:[e.jsxs("button",{className:"btn-start",disabled:t==="running"||t==="restarting",onClick:()=>p("start"),children:[e.jsx(Js,{size:18})," Başla"]}),e.jsxs("button",{className:"btn-stop",disabled:t==="stopped"||t==="restarting",onClick:()=>p("stop"),children:[e.jsx(Kt,{size:18})," Dayandır"]}),e.jsxs("button",{className:"btn-restart",disabled:t==="restarting",onClick:()=>p("restart"),children:[e.jsx(hs,{size:18})," Yenidən işə sal"]})]})]}),e.jsxs("div",{className:"settings-card config",children:[e.jsxs("h3",{children:[e.jsx(Qt,{size:20})," Şəbəkə Parametrləri"]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Port Nömrəsi"}),e.jsx("input",{type:"number",value:l,onChange:v=>h(v.target.value),placeholder:"3000"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Mühit"}),e.jsxs("select",{value:m,onChange:v=>g(v.target.value),children:[e.jsx("option",{value:"development",children:"İnkişaf"}),e.jsx("option",{value:"production",children:"Canlı"}),e.jsx("option",{value:"staging",children:"Sınaq"})]})]})]}),e.jsxs("div",{className:"settings-card stats",children:[e.jsxs("h3",{children:[e.jsx(Xt,{size:20})," Resurs İstifadəsi"]}),e.jsxs("div",{className:"stats-row",children:[e.jsx("span",{children:"CPU Yükü"}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"fill",style:{width:`${o.cpu}%`}})}),e.jsxs("span",{children:[o.cpu,"%"]})]}),e.jsxs("div",{className:"stats-row",children:[e.jsx("span",{children:"RAM İstifadəsi"}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"fill",style:{width:`${o.ram.percentage}%`}})}),e.jsxs("span",{children:[o.ram.used.toFixed(1),"GB / ",o.ram.total.toFixed(1),"GB"]})]})]}),e.jsxs("div",{className:"settings-card info",children:[e.jsxs("h3",{children:[e.jsx(Zt,{size:20})," Sistem Məlumatı"]}),e.jsxs("div",{className:"info-list",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("span",{children:"Versiya:"})," ",e.jsx("strong",{children:o.versions.project})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{children:"Node.js:"})," ",e.jsx("strong",{children:o.versions.node})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{children:"Vite:"})," ",e.jsx("strong",{children:o.versions.vite})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{children:"İşləmə Müddəti:"})," ",e.jsx("strong",{children:o.uptime})]})]})]})]}),e.jsx("div",{className:"settings-footer",children:e.jsx("button",{className:"btn-save",onClick:()=>y.success("Ayarlar yadda saxlanıldı!"),children:"Dəyişiklikləri Yadda Saxla"})})]})},ai=({currentUser:t})=>{const[a,l]=c.useState([]),[h,m]=c.useState(!0),[g,o]=c.useState(!1),[f,u]=c.useState(null),p=async()=>{try{const d=localStorage.getItem("forsaj_admin_token"),N=await fetch("/api/users",{headers:{Authorization:`Bearer ${d}`}});if(!N.ok)throw new Error("Yükləmə uğursuz oldu");const j=await N.json();l(j||[])}catch{y.error("İstifadəçiləri yükləmək mümkün olmadı")}finally{m(!1)}};c.useEffect(()=>{p()},[]);const v=async d=>{if(d.preventDefault(),!f?.username||!f?.name||!f?.id&&!f?.password){y.error("Zəhmət olmasa bütün sahələri doldurun");return}try{const N=localStorage.getItem("forsaj_admin_token"),j=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${N}`},body:JSON.stringify(f)});if(j.ok)y.success(f.id?"İstifadəçi yeniləndi":"Yeni istifadəçi yaradıldı"),o(!1),u(null),p();else{const w=await j.json();y.error(w.error||"Xəta baş verdi")}}catch{y.error("Serverlə bağlantı kəsildi")}},k=async d=>{if(window.confirm("Bu istifadəçini silmək istədiyinizə əminsiniz?"))try{const N=localStorage.getItem("forsaj_admin_token"),j=await fetch(`/api/users/${d}`,{method:"DELETE",headers:{Authorization:`Bearer ${N}`}});if(j.ok)y.success("İstifadəçi silindi"),p();else{const w=await j.json();y.error(w.error||"Silmək mümkün olmadı")}}catch{y.error("Serverlə bağlantı kəsildi")}},n=(d=null)=>{u(d?{...d}:{username:"",name:"",password:"",role:"secondary"}),o(!0)};return h?e.jsx("div",{className:"loading-state",children:"Yüklənir..."}):e.jsxs("div",{className:"users-manager fade-in",children:[e.jsxs("div",{className:"manager-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Admin Hesabları"}),e.jsx("p",{children:"Sistemi idarə edən bütün administratorların siyahısı və səlahiyyətləri"})]}),t.role==="master"&&e.jsxs("button",{className:"add-user-btn",onClick:()=>n(),children:[e.jsx(Jt,{size:18})," Yeni idarəçi"]})]}),e.jsx("div",{className:"users-grid",children:a.map(d=>e.jsxs("div",{className:"user-card",children:[e.jsxs("div",{className:"user-avatar",children:[e.jsx("img",{src:`https://ui-avatars.com/api/?name=${d.name}&background=${d.role==="master"?"3b82f6":"f59e0b"}&color=fff`,alt:d.name}),e.jsxs("div",{className:`role-badge ${d.role||"secondary"}`,children:[e.jsx(Fs,{size:10})," ",d.role==="master"?"Baş admin":"Redaktor"]})]}),e.jsxs("div",{className:"user-details",children:[e.jsx("h3",{children:d.name}),e.jsxs("span",{children:["@",d.username||"username"]})]}),t.role==="master"&&e.jsxs("div",{className:"user-actions",children:[e.jsx("button",{className:"edit-btn",onClick:()=>n(d),title:"Düzəliş et",children:e.jsx(ea,{size:16})}),e.jsx("button",{className:"delete-btn",onClick:()=>k(d.id.toString()),title:"Sil",children:e.jsx(H,{size:16})})]})]},d.id))}),g&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:f?.id?"İstifadəçini redaktə et":"Yeni idarəçi hesabı"}),e.jsx("button",{onClick:()=>o(!1),children:e.jsx(Ve,{size:20})})]}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(Ie,{size:14})," Tam Ad"]}),e.jsx("input",{type:"text",value:f?.name||"",onChange:d=>u({...f,name:d.target.value}),placeholder:"Məs: Əli Məmmədov",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(Ie,{size:14})," İstifadəçi Adı"]}),e.jsx("input",{type:"text",value:f?.username||"",onChange:d=>u({...f,username:d.target.value}),placeholder:"Məs: alimm",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(us,{size:14})," Şifrə ",f?.id&&e.jsx("span",{className:"helper-text",children:"(Dəyişmək istəmirsinizsə boş saxlayın)"})]}),e.jsx("input",{type:"password",value:f?.password||"",onChange:d=>u({...f,password:d.target.value}),placeholder:"••••••••",required:!f?.id})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(Fs,{size:14})," Yetki (Rol)"]}),e.jsxs("select",{value:f?.role||"secondary",onChange:d=>u({...f,role:d.target.value}),children:[e.jsx("option",{value:"master",children:"Baş Admin (Tam səlahiyyət)"}),e.jsx("option",{value:"secondary",children:"Redaktor (Məhdud səlahiyyət)"})]})]}),f?.role==="master"&&e.jsxs("div",{className:"role-warning",children:[e.jsx(sa,{size:14})," Baş Admin bütün sistem daxilində tam səlahiyyətə malikdir."]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>o(!1),children:"Ləğv et"}),e.jsxs("button",{type:"submit",className:"save-btn",children:[e.jsx(vs,{size:18})," Yadda Saxla"]})]})]})]})})]})},ii=()=>{const[t,a]=c.useState(!1),l=async()=>{a(!0);const m=y.loading("Front qovluğu skan edilir...");try{if(!(await fetch("/api/extract-content",{method:"POST"})).ok)throw new Error("Skan xətası");y.success("Skan tamamlandı! Panel yenilənir...",{id:m}),setTimeout(()=>window.location.reload(),1500)}catch{y.error("Skan uğursuz oldu!",{id:m})}finally{a(!1)}},h=[{id:1,title:"Sitemap Faylını Yaradın",description:"public/sitemap.json faylına menyu strukturunuzu əlavə edin və ya front-dan gətirin.",path:"public/sitemap.json",icon:ta},{id:2,title:"Front Layihəsini Sinxronlaşdırın",description:"/front qovluğundakı React layihəsini skan edərək bütün səhifələri menyuya çıxarın.",path:"/front/src/pages",icon:aa},{id:3,title:"Sistem Ayarlarını Tənzimləyin",description:"Saytın ümumi tənzimləmələrini, loqo və əlaqə məlumatlarını idarə edin.",path:"Sistem Ayarları",icon:Hs}];return e.jsxs("div",{className:"setup-guide",children:[e.jsxs("div",{className:"setup-header",children:[e.jsxs("div",{className:"setup-brand",children:[e.jsx("div",{className:"octo-logo",children:"🏎️"}),e.jsx("h2",{children:"Forsaj Club İdarəetmə"})]}),e.jsx("h1",{children:"Xoş Gəlmisiniz! Paneli Qurmağa Başlayaq"}),e.jsx("p",{children:"Forsaj Club platformanız üçün premium admin paneli artıq hazırdır. Aşağıdakı addımları izləyərək front layihənizi adminlə birləşdirin."})]}),e.jsxs("div",{className:"setup-grid",children:[e.jsx("div",{className:"steps-container",children:h.map(m=>e.jsxs("div",{className:"step-card",children:[e.jsx("div",{className:"step-icon",children:e.jsx(m.icon,{size:26})}),e.jsxs("div",{className:"step-content",children:[e.jsx("h3",{children:m.title}),e.jsx("p",{children:m.description}),e.jsx("span",{className:"step-badge",children:m.path})]})]},m.id))}),e.jsxs("div",{className:"setup-sidebar-actions",children:[e.jsxs("div",{className:"action-card primary",children:[e.jsx(ia,{size:32}),e.jsx("h4",{children:"Yeni Səhifə Əlavə Et"}),e.jsx("p",{children:"Dinamik olaraq yeni admin səhifəsi yaradın."})]}),e.jsxs("div",{className:"action-card secondary",children:[e.jsx(js,{size:32}),e.jsx("h4",{children:"Front Skaner"}),e.jsx("p",{children:"/front qosulub. Skanlamağa hazırdır."}),e.jsx("button",{className:`scan-btn ${t?"loading":""}`,onClick:l,disabled:t,children:t?e.jsx(et,{className:"animate-spin"}):"İndi Skan Et"})]})]})]}),e.jsx("div",{className:"setup-footer",children:e.jsxs("div",{className:"info-box",children:[e.jsx("strong",{children:"Məlumat:"})," /front qovluğu aşkar edildi. Sitemap avtomatik generasiya olunduqda bu ekran Dashboard ilə əvəzlənəcək."]})})]})},ni=({onLogin:t})=>{const[a,l]=c.useState(!0),[h,m]=c.useState(""),[g,o]=c.useState(""),[f,u]=c.useState(""),[p,v]=c.useState(!1);c.useEffect(()=>{(async()=>{try{(await(await fetch("/api/check-setup")).json()).needsSetup&&l(!1)}catch(d){console.error("Setup check failed",d)}})()},[]);const k=async n=>{n.preventDefault(),v(!0);try{const j=await fetch(a?"/api/login":"/api/setup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a?{username:h,password:g}:{username:h,password:g,name:f})}),w=await j.json();if(!j.ok)throw new Error(w.error||(a?"Giriş uğursuz oldu":"Quraşdırma uğursuz oldu"));a?(localStorage.setItem("forsaj_admin_token",w.token),localStorage.setItem("forsaj_admin_user",JSON.stringify(w.user)),t(w.user),y.success("Xoş gəldiniz!")):(y.success("Baza uğurla başladıldı! İndi daxil ola bilərsiniz."),l(!0))}catch(d){y.error(d.message||"Əməliyyat uğursuz oldu")}finally{v(!1)}};return e.jsx("div",{className:"login-page",children:e.jsxs("div",{className:"login-card fade-in",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("div",{className:"login-logo",children:a?e.jsx(na,{size:40,className:"logo-icon"}):e.jsx(us,{size:40,className:"logo-icon"})}),e.jsx("h1",{children:a?"Forsaj İdarəetmə Paneli":"Sistem Quraşdırılması"}),e.jsx("p",{children:a?"Sistemə daxil olmaq üçün məlumatlarınızı daxil edin":"İlkin Baş Admin hesabını yaradaraq sistemi başladın"})]}),e.jsxs("form",{className:"login-form",onSubmit:k,children:[!a&&e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(Ie,{size:16})," Tam Adınız"]}),e.jsx("input",{type:"text",value:f,onChange:n=>u(n.target.value),placeholder:"Məs: Əli Məmmədov",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(Ie,{size:16})," İstifadəçi Adı"]}),e.jsx("input",{type:"text",value:h,onChange:n=>m(n.target.value),placeholder:"Məs: admin",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(us,{size:16})," Şifrə"]}),e.jsx("input",{type:"password",value:g,onChange:n=>o(n.target.value),placeholder:"••••••••",required:!0})]}),e.jsx("button",{type:"submit",className:"login-btn",disabled:p,children:p?e.jsxs("div",{className:"loader-container",children:[e.jsx(et,{className:"animate-spin",size:20}),e.jsx("span",{children:"Gözləyin..."})]}):a?"Daxil ol":"Sistemi başlat"})]}),e.jsx("div",{className:"login-footer",children:e.jsx("p",{children:"© 2026 Forsaj Club. Platformanın təhlükəsizliyi üçün mütəmadi olaraq şifrənizi yeniləyin."})})]})})},li=()=>{const[t,a]=c.useState([]),[l,h]=c.useState(null),[m,g]=c.useState(!0),[o,f]=c.useState("all"),u=async()=>{const d=localStorage.getItem("forsaj_admin_token");try{const N=await fetch("/api/applications",{headers:{Authorization:`Bearer ${d}`}});if(N.ok){const j=await N.json();a(j)}}catch{y.error("Müraciətlər yüklənərkən xəta baş verdi")}finally{g(!1)}};c.useEffect(()=>{u()},[]);const p=async d=>{const N=localStorage.getItem("forsaj_admin_token");try{(await fetch(`/api/applications/${d}/read`,{method:"POST",headers:{Authorization:`Bearer ${N}`}})).ok&&(a(w=>w.map(C=>C.id===d?{...C,status:"read"}:C)),l?.id===d&&h(w=>w?{...w,status:"read"}:null))}catch(j){console.error(j)}},v=async d=>{if(!window.confirm("Bu müraciəti silmək istədiyinizə əminsiniz?"))return;const N=localStorage.getItem("forsaj_admin_token");try{(await fetch(`/api/applications/${d}`,{method:"DELETE",headers:{Authorization:`Bearer ${N}`}})).ok&&(a(w=>w.filter(C=>C.id!==d)),l?.id===d&&h(null),y.success("Müraciət silindi"))}catch{y.error("Silinmə zamanı xəta baş verdi")}},k=t.filter(d=>o==="unread"?d.status==="unread":o==="read"?d.status==="read":!0),n=d=>{try{const N=JSON.parse(d);return e.jsx("div",{className:"app-details-grid",children:Object.entries(N).map(([j,w])=>e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"detail-label",children:[j.toUpperCase(),":"]}),e.jsx("span",{className:"detail-value",children:String(w)})]},j))})}catch{return e.jsx("div",{className:"detail-text",children:d})}};return m?e.jsx("div",{className:"loading-state",children:"Yüklənir..."}):e.jsxs("div",{className:"applications-manager fade-in",children:[e.jsxs("div",{className:"manager-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Müraciətlər"}),e.jsx("p",{children:"İstifadəçilər tərəfindən göndərilən formlar və qeydiyyatlar"})]}),e.jsxs("div",{className:"filter-tabs",children:[e.jsx("button",{className:o==="all"?"active":"",onClick:()=>f("all"),children:"Hamısı"}),e.jsx("button",{className:o==="unread"?"active":"",onClick:()=>f("unread"),children:"Oxunmamış"}),e.jsx("button",{className:o==="read"?"active":"",onClick:()=>f("read"),children:"Oxunmuş"})]})]}),e.jsxs("div",{className:"manager-body",children:[e.jsx("div",{className:"applications-list",children:k.length===0?e.jsx("div",{className:"empty-list",children:"Heç bir müraciət tapılmadı"}):k.map(d=>e.jsxs("div",{className:`application-item ${d.status} ${l?.id===d.id?"selected":""}`,onClick:()=>{h(d),d.status==="unread"&&p(d.id)},children:[e.jsx("div",{className:"app-item-icon",children:d.status==="unread"?e.jsx(Qs,{className:"icon-unread"}):e.jsx(la,{className:"icon-read"})}),e.jsxs("div",{className:"app-item-main",children:[e.jsxs("div",{className:"app-item-header",children:[e.jsx("span",{className:"app-item-name",children:d.name}),e.jsx("span",{className:"app-item-date",children:new Date(d.created_at).toLocaleDateString()})]}),e.jsx("div",{className:"app-item-type",children:d.type})]}),e.jsx(Us,{size:16,className:"chevron"})]},d.id))}),e.jsx("div",{className:"application-details",children:l?e.jsxs("div",{className:"details-card fade-in",children:[e.jsxs("div",{className:"details-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Müraciət Təfərrüatları"}),e.jsx("span",{className:`status-badge ${l.status}`,children:l.status==="unread"?"Yeni":"Oxunub"})]}),e.jsx("div",{className:"header-actions",children:e.jsx("button",{className:"btn-delete",onClick:()=>v(l.id),children:e.jsx(H,{size:18})})})]}),e.jsxs("div",{className:"details-info",children:[e.jsxs("div",{className:"info-group",children:[e.jsxs("label",{children:[e.jsx(Ie,{size:16})," Göndərən"]}),e.jsx("p",{children:l.name})]}),e.jsxs("div",{className:"info-group",children:[e.jsxs("label",{children:[e.jsx(Ks,{size:16})," Əlaqə"]}),e.jsx("p",{children:l.contact})]}),e.jsxs("div",{className:"info-group",children:[e.jsxs("label",{children:[e.jsx(Ce,{size:16})," Kateqoriya"]}),e.jsx("p",{children:l.type})]})]}),e.jsxs("div",{className:"details-content",children:[e.jsx("label",{children:"Məzmun"}),e.jsx("div",{className:"content-box",children:n(l.content)})]})]}):e.jsxs("div",{className:"details-placeholder",children:[e.jsx(Ws,{size:48}),e.jsx("p",{children:"Baxmaq üçün siyahıdan müraciət seçin"})]})})]})]})},ri=()=>{const[t,a]=c.useState([]),[l,h]=c.useState(!1),[m,g]=c.useState(!0),o=fs(),f=async()=>{try{const d=await(await fetch("/api/site-content")).json();a(d),g(!1)}catch{y.error("Ayarlar yüklənərkən xəta baş verdi")}};c.useEffect(()=>{f()},[]),c.useEffect(()=>{if(m)return;const d=new URLSearchParams(o.search).get("tab"),j=d?{seo:"seo-basic",general:"branding",contact:"contact-details",social:"social-links",stats:"stats"}[d]:"";j&&setTimeout(()=>{const w=document.querySelector(`[data-settings-section="${j}"]`);w&&w.scrollIntoView({behavior:"smooth",block:"start"})},50)},[o.search,m]);const u=(n,d,N=!1)=>{const j=[...t];let w=j.findIndex(C=>C.id==="general");if(w===-1&&(j.push({id:"general",title:"SİSTEM AYARLARI",sections:[],images:[]}),w=j.length-1),N){const C=j[w].images.findIndex(z=>z.id===n);C===-1?j[w].images.push({id:n,path:d,alt:n,type:"local"}):j[w].images[C].path=d}else{const C=j[w].sections.findIndex(z=>z.id===n);C===-1?j[w].sections.push({id:n,type:"text",label:n,value:d}):j[w].sections[C].value=d}a(j)},p=(n,d=!1)=>{const N=t.find(j=>j.id==="general");return N?d?N.images.find(j=>j.id===n)?.path||"":N.sections.find(j=>j.id===n)?.value||"":""},v=async(n,d)=>{const N=n.target.files?.[0];if(!N)return;const j=new FormData;j.append("image",N);const w=y.loading("Şəkil yüklənir...");try{const C=await fetch("/api/upload-image",{method:"POST",body:j});if(C.ok){const z=await C.json();u(d,z.url,!0),y.success("Şəkil yükləndi",{id:w})}}catch{y.error("Yükləmə xətası",{id:w})}},k=async()=>{h(!0);const n=y.loading("Yadda saxlanılır...");try{await fetch("/api/save-content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),y.success("Ayarlar qeyd edildi!",{id:n})}catch{y.error("Xəta baş verdi",{id:n})}finally{h(!1)}};return m?e.jsx("div",{className:"loading-state",children:"Yüklənir..."}):e.jsxs("div",{className:"general-settings fade-in",children:[e.jsxs("div",{className:"settings-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Sistem Ayarları"}),e.jsx("p",{children:"SEO, Brendinq və ümumi sayt tənzimləmələri"})]}),e.jsxs("button",{className:"save-btn",onClick:k,disabled:l,children:[e.jsx(vs,{size:18}),e.jsx("span",{children:"Yadda Saxla"})]})]}),e.jsxs("div",{className:"settings-grid",children:[e.jsxs("div",{className:"settings-card shadow-sm","data-settings-section":"seo-basic",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(X,{size:20,className:"text-blue-500"}),e.jsx("h2",{children:"SEO və axtarış motoru"})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Meta başlıq (sayt adı)"}),e.jsx("input",{type:"text",value:p("SEO_TITLE"),onChange:n=>u("SEO_TITLE",n.target.value),placeholder:"Məs: Forsaj Club - Offroad & Motorsport"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Meta təsvir"}),e.jsx("textarea",{value:p("SEO_DESCRIPTION"),onChange:n=>u("SEO_DESCRIPTION",n.target.value),placeholder:"Sayt haqqında qısa məlumat..."})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Açar sözlər"}),e.jsx("input",{type:"text",value:p("SEO_KEYWORDS"),onChange:n=>u("SEO_KEYWORDS",n.target.value),placeholder:"offroad, baki, yarış, mitsubishi, pajero"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Kanonik URL"}),e.jsx("input",{type:"text",value:p("SEO_CANONICAL_URL"),onChange:n=>u("SEO_CANONICAL_URL",n.target.value),placeholder:"https://forsaj.az"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Robots direktivi"}),e.jsx("input",{type:"text",value:p("SEO_ROBOTS"),onChange:n=>u("SEO_ROBOTS",n.target.value),placeholder:"index,follow"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Müəllif"}),e.jsx("input",{type:"text",value:p("SEO_AUTHOR"),onChange:n=>u("SEO_AUTHOR",n.target.value),placeholder:"Forsaj Club"})]})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Dil (html lang)"}),e.jsx("input",{type:"text",value:p("SEO_LANGUAGE"),onChange:n=>u("SEO_LANGUAGE",n.target.value),placeholder:"az"})]})]})]}),e.jsxs("div",{className:"settings-card shadow-sm","data-settings-section":"seo-social",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(X,{size:20,className:"text-cyan-500"}),e.jsx("h2",{children:"Sosial paylaşım SEO (OG / Twitter)"})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"OG başlıq"}),e.jsx("input",{type:"text",value:p("SEO_OG_TITLE"),onChange:n=>u("SEO_OG_TITLE",n.target.value),placeholder:"Sosial şəbəkə başlığı"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"OG təsvir"}),e.jsx("textarea",{value:p("SEO_OG_DESCRIPTION"),onChange:n=>u("SEO_OG_DESCRIPTION",n.target.value),placeholder:"Sosial şəbəkə paylaşım təsviri"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"OG URL"}),e.jsx("input",{type:"text",value:p("SEO_OG_URL"),onChange:n=>u("SEO_OG_URL",n.target.value),placeholder:"https://forsaj.az"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Twitter kart növü"}),e.jsx("input",{type:"text",value:p("SEO_TWITTER_CARD"),onChange:n=>u("SEO_TWITTER_CARD",n.target.value),placeholder:"summary_large_image"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Twitter hesabı (site)"}),e.jsx("input",{type:"text",value:p("SEO_TWITTER_SITE"),onChange:n=>u("SEO_TWITTER_SITE",n.target.value),placeholder:"@forsajclub"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Twitter müəllif"}),e.jsx("input",{type:"text",value:p("SEO_TWITTER_CREATOR"),onChange:n=>u("SEO_TWITTER_CREATOR",n.target.value),placeholder:"@forsajclub"})]})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"OG şəkli"}),e.jsx("div",{className:"logo-preview",style:{minHeight:"140px"},children:p("SEO_OG_IMAGE",!0)?e.jsx("img",{src:p("SEO_OG_IMAGE",!0),alt:"OG Şəkli"}):e.jsx("div",{className:"no-logo",children:"OG şəkli yoxdur"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",style:{marginTop:"10px"},children:[e.jsxs("label",{className:"upload-btn",children:[e.jsx(ds,{size:14})," Şəkil yüklə",e.jsx("input",{type:"file",hidden:!0,onChange:n=>v(n,"SEO_OG_IMAGE")})]}),e.jsx("input",{type:"text",value:p("SEO_OG_IMAGE",!0),onChange:n=>u("SEO_OG_IMAGE",n.target.value,!0),placeholder:"https://forsaj.az/og-cover.jpg"})]})]})]})]}),e.jsxs("div",{className:"settings-card shadow-sm","data-settings-section":"seo-verify",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(qs,{size:20,className:"text-violet-500"}),e.jsx("h2",{children:"Axtarış motoru təsdiqləri"})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Google təsdiq kodu"}),e.jsx("input",{type:"text",value:p("SEO_GOOGLE_VERIFICATION"),onChange:n=>u("SEO_GOOGLE_VERIFICATION",n.target.value),placeholder:"google-site-verification kodu"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Bing təsdiq kodu"}),e.jsx("input",{type:"text",value:p("SEO_BING_VERIFICATION"),onChange:n=>u("SEO_BING_VERIFICATION",n.target.value),placeholder:"msvalidate.01 kodu"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Yandex təsdiq kodu"}),e.jsx("input",{type:"text",value:p("SEO_YANDEX_VERIFICATION"),onChange:n=>u("SEO_YANDEX_VERIFICATION",n.target.value),placeholder:"yandex-verification kodu"})]})]})]}),e.jsxs("div",{className:"settings-card shadow-sm","data-settings-section":"branding",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(V,{size:20,className:"text-orange-500"}),e.jsx("h2",{children:"Brendinq & Loqo"})]}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"logo-upload-grid",children:[e.jsxs("div",{className:"logo-box",children:[e.jsx("label",{children:"Əsas Loqo (Light)"}),e.jsx("div",{className:"logo-preview",children:p("SITE_LOGO_LIGHT",!0)?e.jsx("img",{src:p("SITE_LOGO_LIGHT",!0),alt:"Logo Light"}):e.jsx("div",{className:"no-logo",children:"Loqo yoxdur"})}),e.jsxs("label",{className:"upload-btn",children:[e.jsx(ds,{size:14})," Yüklə",e.jsx("input",{type:"file",hidden:!0,onChange:n=>v(n,"SITE_LOGO_LIGHT")})]})]}),e.jsxs("div",{className:"logo-box",children:[e.jsx("label",{children:"Alternativ Loqo (Dark)"}),e.jsx("div",{className:"logo-preview dark-bg",children:p("SITE_LOGO_DARK",!0)?e.jsx("img",{src:p("SITE_LOGO_DARK",!0),alt:"Logo Dark"}):e.jsx("div",{className:"no-logo",children:"Loqo yoxdur"})}),e.jsxs("label",{className:"upload-btn",children:[e.jsx(ds,{size:14})," Yüklə",e.jsx("input",{type:"file",hidden:!0,onChange:n=>v(n,"SITE_LOGO_DARK")})]})]})]})})]}),e.jsxs("div",{className:"settings-card shadow-sm","data-settings-section":"contact-details",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(V,{size:20,className:"text-red-500"}),e.jsx("h2",{children:"Əlaqə & Ünvan Məlumatları"})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Baş Ofis Ünvan (Sətir 1)"}),e.jsx("input",{type:"text",value:p("CONTACT_ADDRESS_1"),onChange:n=>u("CONTACT_ADDRESS_1",n.target.value),placeholder:"Məs: AZADLIQ 102, BAKI"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Baş Ofis Ünvan (Sətir 2)"}),e.jsx("input",{type:"text",value:p("CONTACT_ADDRESS_2"),onChange:n=>u("CONTACT_ADDRESS_2",n.target.value),placeholder:"Məs: AZƏRBAYCAN // SECTOR_01"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"İş Saatları"}),e.jsx("input",{type:"text",value:p("CONTACT_HOURS"),onChange:n=>u("CONTACT_HOURS",n.target.value),placeholder:"Məs: 09:00 - 18:00"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Əlaqə Nömrəsi"}),e.jsx("input",{type:"text",value:p("CONTACT_PHONE"),onChange:n=>u("CONTACT_PHONE",n.target.value),placeholder:"+994 50 000 00 00"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Əlaqə E-poçtu"}),e.jsx("input",{type:"text",value:p("CONTACT_EMAIL"),onChange:n=>u("CONTACT_EMAIL",n.target.value),placeholder:"info@forsaj.az"})]})]})]})]}),e.jsxs("div",{className:"settings-card shadow-sm","data-settings-section":"departments",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(ra,{size:20,className:"text-purple-500"}),e.jsx("h2",{children:"Şöbə E-poçtları"})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Baş Ofis (HQ)"}),e.jsx("input",{type:"text",value:p("DEPT_HQ_EMAIL"),onChange:n=>u("DEPT_HQ_EMAIL",n.target.value),placeholder:"hq@forsaj.az"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Media və PR"}),e.jsx("input",{type:"text",value:p("DEPT_PR_EMAIL"),onChange:n=>u("DEPT_PR_EMAIL",n.target.value),placeholder:"pr@forsaj.az"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Texniki Dəstək"}),e.jsx("input",{type:"text",value:p("DEPT_TECH_EMAIL"),onChange:n=>u("DEPT_TECH_EMAIL",n.target.value),placeholder:"tech@forsaj.az"})]})]})]}),e.jsxs("div",{className:"settings-card shadow-sm","data-settings-section":"social-links",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(X,{size:20,className:"text-pink-500"}),e.jsx("h2",{children:"Sosial Media Linkləri"})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Instagram"}),e.jsx("input",{type:"text",value:p("SOCIAL_INSTAGRAM"),onChange:n=>u("SOCIAL_INSTAGRAM",n.target.value),placeholder:"https://instagram.com/forsajclub"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Youtube"}),e.jsx("input",{type:"text",value:p("SOCIAL_YOUTUBE"),onChange:n=>u("SOCIAL_YOUTUBE",n.target.value),placeholder:"https://youtube.com/@forsajclub"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Facebook"}),e.jsx("input",{type:"text",value:p("SOCIAL_FACEBOOK"),onChange:n=>u("SOCIAL_FACEBOOK",n.target.value),placeholder:"https://facebook.com/forsajclub"})]})]})]}),e.jsxs("div",{className:"settings-card shadow-sm","data-settings-section":"stats",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(qs,{size:20,className:"text-green-500"}),e.jsx("h2",{children:"Sayt Statistikaları"})]}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"stats-edit-grid",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Pilot Sayı"}),e.jsx("input",{type:"text",value:p("STATS_PILOTS"),onChange:n=>u("STATS_PILOTS",n.target.value),placeholder:"Susmaya görə: 140+"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Yarış Sayı"}),e.jsx("input",{type:"text",value:p("STATS_RACES"),onChange:n=>u("STATS_RACES",n.target.value),placeholder:"Susmaya görə: 50+"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Gənc İştirakçı"}),e.jsx("input",{type:"text",value:p("STATS_YOUTH"),onChange:n=>u("STATS_YOUTH",n.target.value),placeholder:"Susmaya görə: 20+"})]})]})})]})]})]})},we=t=>t.toLocaleLowerCase("az").normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim(),oi={DASHBOARD:"Panel Ana Səhifə","ANA SƏHİFƏ":"Sayt Məzmunu",HAQQIMIZDA:"Haqqımızda",XƏBƏRLƏR:"Xəbərlər",TƏDBİRLƏR:"Tədbirlər",SÜRÜCÜLƏR:"Sürücülər",QALEREYA:"Qalereya",QAYDALAR:"Qaydalar",ƏLAQƏ:"Əlaqə","ADMİN HESABLARI":"İstifadəçi İdarəsi","SİSTEM AYARLARI":"Frontend Ayarları"},di={"Ümumi Görünüş":"Ana Səhifə Blokları",Naviqasiya:"Menyu və Naviqasiya","Giriş Hissəsi":"Hero Bölməsi","Sürüşən Yazı":"Marquee Yazısı","Sayt Sonu":"Footer","Xəbər Siyahısı":"Xəbər Məzmunu","Xəbər Səhifəsi":"Xəbər Səhifəsi Mətni","Tədbir Təqvimi":"Tədbir Siyahısı","Tədbir Səhifəsi":"Tədbir Səhifəsi Mətni","Sürücü Reytinqi":"Sürücü Cədvəli","Sürücülər Səhifəsi":"Sürücülər Səhifəsi Mətni"},ci=t=>{const a=oi[t.title]||t.title;return{...t,title:a,children:t.children?.map(l=>({...l,title:di[l.title]||l.title}))}},mi=()=>{const[t,a]=c.useState(null),[l,h]=c.useState([]),[m,g]=c.useState(0),[o,f]=c.useState(!0);if(c.useEffect(()=>{const p=localStorage.getItem("forsaj_admin_user"),v=localStorage.getItem("forsaj_admin_token");a(p&&v?JSON.parse(p):null),f(!1)},[]),c.useEffect(()=>{const p=async()=>{const k=localStorage.getItem("forsaj_admin_token");if(k)try{const n=await fetch("/api/applications/unread-count",{headers:{Authorization:`Bearer ${k}`}});if(n.ok){const{count:N}=await n.json();g(N)}const d=await fetch(`/api/sitemap?v=${Date.now()}`);if(d.ok){const N=await d.json();let j=Array.isArray(N)?N:[];j=j.map(z=>z?.path==="/frontend-settings"?{...z,title:"Frontend Ayarları"}:z),j=j.map(z=>ci(z));const w=j.find(z=>z.path==="/applications");w?m>0&&(w.badge={text:m.toString(),color:"bg-red-500"}):j=[...j,{title:"Müraciətlər",path:"/applications",icon:"Inbox",badge:m>0?{text:m.toString(),color:"bg-red-500"}:void 0}],j=j.filter(z=>{const A=we(z?.title||""),M=we(z?.id||""),pe=we(z?.path||"");return!(A==="sistem ayarlari"||A==="system settings"||(M==="general"||M==="settings"||M==="sistem-ayarlari")||(pe==="/general-settings"||pe==="/settings"))}),j=[...j,{title:"Sistem Ayarları",icon:"Settings",children:[{title:"SEO Ayarları",path:"/general-settings?tab=seo",icon:"Globe"},{title:"Ümumi Ayarlar",path:"/general-settings?tab=general",icon:"Settings"},{title:"Əlaqə və Sosial",path:"/general-settings?tab=contact",icon:"Phone"}]}];const C=new Map;for(const z of j){const A=`${we(z.path||"")}|${we(z.title||"")}`;C.set(A,z)}h(Array.from(C.values()))}}catch(n){console.error("Fetch data failed",n)}finally{f(!1)}};p();const v=setInterval(p,3e4);return()=>clearInterval(v)},[t,m]),o)return e.jsx("div",{style:{display:"flex",height:"100vh",width:"100vw",alignItems:"center",justifyContent:"center",background:"#f4f6f9",color:"#3b82f6",fontSize:"1.2rem",fontWeight:"600"},children:"Yüklənir..."});const u=!l||l.length===0;return e.jsx(Lt,{basename:"/admin",children:e.jsxs("div",{className:"app-container",children:[e.jsx(Za,{containerStyle:{zIndex:10001},position:"top-right",reverseOrder:!1}),t?e.jsxs(e.Fragment,{children:[e.jsx(da,{menuItems:l,user:t,onLogout:()=>{localStorage.removeItem("forsaj_admin_user"),a(null)}}),e.jsxs("main",{className:"main-content",children:[e.jsx(ca,{user:t}),e.jsx("div",{className:"content-body",children:e.jsx(_t,{children:u?e.jsx(me,{path:"*",element:e.jsx(ii,{})}):e.jsxs(e.Fragment,{children:[e.jsx(me,{path:"/",element:e.jsx(si,{})}),e.jsx(me,{path:"/applications",element:e.jsx(li,{})}),e.jsx(me,{path:"/general-settings",element:e.jsx(ri,{})}),e.jsx(me,{path:"/users-management",element:e.jsx(ai,{currentUser:t})}),e.jsx(me,{path:"/frontend-settings",element:t.role==="master"?e.jsx(ti,{}):e.jsxs("div",{className:"fade-in",children:[e.jsx("h1",{children:"İcazə yoxdur"}),e.jsx("p",{children:"Bu səhifə yalnız Baş Admin üçündür."})]})}),e.jsx(me,{path:"*",element:e.jsx("div",{className:"fade-in",children:e.jsx("h1",{children:"Səhifə tapılmadı"})})})]})})})]})]}):e.jsx(ni,{onLogin:a})]})})};Dt.createRoot(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsx(mi,{})}));
